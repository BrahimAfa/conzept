const endpoint="https://"+window.getParameterByName("l")+".wikipedia.org/w/api.php",domParser=new DOMParser;function queryApi(t){const e=new URL(endpoint),i={format:"json",origin:"*",...t};return Object.keys(i).forEach(t=>e.searchParams.append(t,i[t])),fetch(e).then(t=>t.json())}const getPageTitle=t=>t.split("/").filter(t=>t).pop();function getPageName(t){return queryApi({action:"query",titles:t,redirects:1}).then(t=>Object.values(t.query.pages)[0].title)}const isArticle=t=>!(t.endsWith(":")?t.slice(0,-1):t).includes(":");function getPageHtml(t){return queryApi({action:"parse",page:t,prop:"text",redirects:1}).then(t=>t.parse.text["*"])}function getFirstParagraph(t){return r=Array.from(t.querySelectorAll("p:not(.mw-empty-elt)")).find(t=>!t.querySelector("#coordinates")),r}function getWikiLinks(t){var e=$(t),i=[];return $("p a, li a",e).each((function(t,e){(e=$(this).attr("href")||"").startsWith("/wiki/")&&(e.startsWith("/wiki/Special:")||e.startsWith("/wiki/Template:")||e.startsWith("/wiki/Template_talk:")||e.startsWith("/wiki/File:")||e.startsWith("/wiki/File_talk:")||e.startsWith("/wiki/Help:")||e.startsWith("/wiki/Help_talk:")||e.startsWith("/wiki/Wikipedia:")||e.startsWith("/wiki/Wikipedia_talk:")||e.startsWith("/wiki/User:")||e.startsWith("/wiki/User_talk:")||e.includes("(identifier)")||(e=(e=(e=e.split("/").filter(t=>t).pop()).split("#")[0]).replace(/_/g," "),i.push(e)))})),i=i.filter((t,e,i)=>i.indexOf(t)===e).filter((t,e)=>e<18)}function getSubPages(t){return getPageHtml(t).then(getWikiLinks)}function getRandomArticle(){return queryApi({action:"query",list:"random",rnlimit:1,rnnamespace:0}).then(t=>t.query.random[0].title)}function getSuggestions(t){return queryApi({action:"opensearch",search:t,limit:10,namespace:0}).then(t=>t[1])}
