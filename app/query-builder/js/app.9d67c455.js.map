{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/AddCondition.vue?a198","webpack:///./src/components/ValueTypeDropDown.vue?2752","webpack:///./src/components/SubclassCheckbox.vue?4468","webpack:///./src/components/QueryBuilder.vue?0db4","webpack:///./src/components/QueryCondition.vue?b1ed","webpack:///./src/components/Footer.vue?566f","webpack:///./src/components/Limit.vue?b264","webpack:///./src/components/SharableLink.vue?56e5","webpack:///./src/components/QueryResult.vue?59bf","webpack:///./src/components/InfoTooltip.vue?8af5","webpack:///./src/components/DeleteConditionButton.vue?0cad","webpack:///./src/App.vue?29e6","webpack:///./src/components/QueryBuilder.vue?58ce","webpack:///./src/components/Footer.vue?3ab3","webpack:///./src/serialization/QuerySerializer.ts","webpack:///./src/components/Footer.vue","webpack:///./src/components/Footer.vue?bc24","webpack:///./src/components/Footer.vue?9652","webpack:///./src/components/ConditionRelationToggle.vue?ff97","webpack:///./src/components/ConditionRelationToggle.vue","webpack:///./src/components/ConditionRelationToggle.vue?bf59","webpack:///./src/components/ConditionRelationToggle.vue?23df","webpack:///./src/components/QueryCondition.vue?0912","webpack:///./src/components/ValueInput.vue?8aa6","webpack:///./src/components/ItemValueLookup.vue?7c03","webpack:///./src/components/EntityLookup.vue?c2c1","webpack:///./src/components/InfoTooltip.vue?f9b2","webpack:///./src/components/InfoTooltip.vue","webpack:///./src/components/InfoTooltip.vue?122b","webpack:///./src/components/InfoTooltip.vue?667b","webpack:///./src/components/EntityLookup.vue","webpack:///./src/components/EntityLookup.vue?e7dd","webpack:///./src/components/EntityLookup.vue?aa6d","webpack:///./src/components/ItemValueLookup.vue","webpack:///./src/components/ItemValueLookup.vue?04d7","webpack:///./src/components/ItemValueLookup.vue?0b20","webpack:///./src/components/StringValueInput.vue?5d52","webpack:///./src/components/StringValueInput.vue","webpack:///./src/components/StringValueInput.vue?5340","webpack:///./src/components/StringValueInput.vue?ecdb","webpack:///./src/components/QuantityValueInput.vue?da25","webpack:///./src/form/QuantityValidator.ts","webpack:///./src/components/QuantityValueInput.vue","webpack:///./src/data-model/PropertyValueRelation.ts","webpack:///./src/components/QuantityValueInput.vue?14d1","webpack:///./src/components/QuantityValueInput.vue?7b5d","webpack:///./src/components/DateValueInput.vue?68f9","webpack:///./src/components/DateValueInput.vue","webpack:///./src/components/DateValueInput.vue?98eb","webpack:///./src/components/DateValueInput.vue?3811","webpack:///./src/components/ValueInput.vue","webpack:///./src/components/ValueInput.vue?2eee","webpack:///./src/components/ValueInput.vue?141d","webpack:///./src/components/DeleteConditionButton.vue?87c9","webpack:///./src/components/DeleteConditionButton.vue","webpack:///./src/components/DeleteConditionButton.vue?8f9a","webpack:///./src/components/DeleteConditionButton.vue?a486","webpack:///./src/components/PropertyLookup.vue?9543","webpack:///./src/components/PropertyLookup.vue","webpack:///./src/components/PropertyLookup.vue?9d70","webpack:///./src/components/PropertyLookup.vue?ba22","webpack:///./src/components/ValueTypeDropDown.vue?30e4","webpack:///./src/data-model/ReferenceRelation.ts","webpack:///./src/components/ValueTypeDropDown.vue","webpack:///./src/components/ValueTypeDropDown.vue?38c2","webpack:///./src/components/ValueTypeDropDown.vue?264e","webpack:///./src/components/SubclassCheckbox.vue?22cd","webpack:///./src/components/SubclassCheckbox.vue","webpack:///./src/components/SubclassCheckbox.vue?5800","webpack:///./src/components/SubclassCheckbox.vue?39ae","webpack:///./src/components/ReferenceRelationDropDown.vue?c520","webpack:///./src/sparql/DateValuePatternBuilder.ts","webpack:///./src/components/ReferenceRelationDropDown.vue","webpack:///./src/components/ReferenceRelationDropDown.vue?7fd8","webpack:///./src/components/ReferenceRelationDropDown.vue?4e8a","webpack:///./src/components/NegationToggle.vue?60e0","webpack:///./src/components/NegationToggle.vue","webpack:///./src/components/NegationToggle.vue?984a","webpack:///./src/components/NegationToggle.vue?7d35","webpack:///./src/components/QueryCondition.vue","webpack:///./src/components/QueryCondition.vue?5e04","webpack:///./src/components/QueryCondition.vue?7363","webpack:///./src/components/QueryResult.vue?d992","webpack:///./src/components/QueryResult.vue","webpack:///./src/components/QueryResult.vue?f3b8","webpack:///./src/components/QueryResult.vue?7311","webpack:///./src/sparql/rdfNamespaces.ts","webpack:///./src/sparql/QueryBuilderSparqlGenerator.ts","webpack:///./src/sparql/SyntaxBuilder.ts","webpack:///./src/sparql/TripleBuilder.ts","webpack:///./src/sparql/ItemValueBuilder.ts","webpack:///./src/sparql/LimitedSupportPatternBuilder.ts","webpack:///./src/sparql/QuantityValuePatternBuilder.ts","webpack:///./src/sparql/StringValuePatternBuilder.ts","webpack:///./src/sparql/PatternBuilder.ts","webpack:///./src/sparql/QueryObjectBuilder.ts","webpack:///./src/sparql/buildQuery.ts","webpack:///./src/components/AddCondition.vue?11d8","webpack:///./src/data-model/ConditionRelation.ts","webpack:///./src/components/AddCondition.vue","webpack:///./src/components/AddCondition.vue?d0d8","webpack:///./src/components/AddCondition.vue?783e","webpack:///./src/components/Limit.vue?7449","webpack:///./src/store/RootState.ts","webpack:///./src/components/Limit.vue","webpack:///./src/components/Limit.vue?5c8e","webpack:///./src/components/Limit.vue?b441","webpack:///./src/components/LabelOptout.vue?94c9","webpack:///./src/components/LabelOptout.vue","webpack:///./src/components/LabelOptout.vue?227e","webpack:///./src/components/LabelOptout.vue?d426","webpack:///./src/components/SharableLink.vue?ed51","webpack:///./src/components/SharableLink.vue","webpack:///./src/components/SharableLink.vue?b9e3","webpack:///./src/components/SharableLink.vue?acf9","webpack:///./src/components/QueryBuilder.vue","webpack:///./src/components/QueryBuilder.vue?154b","webpack:///./src/components/QueryBuilder.vue?12ca","webpack:///./src/data-access/AbstractLanguageService.ts","webpack:///./src/data-access/FetchLanguageService.ts","webpack:///./src/QueryBuilderServices.ts","webpack:///./src/data-access/errors/TechnicalProblem.ts","webpack:///./src/data-access/FetchSearchEntityRepository.ts","webpack:///./src/data-access/errors/PrecisionError.ts","webpack:///./src/data-access/FetchParseValueRepository.ts","webpack:///./src/data-access/FetchFormatValueRepository.ts","webpack:///./src/data-access/StatsvMetricsCollector.ts","webpack:///./src/ServicesFactory.ts","webpack:///./src/App.vue","webpack:///./src/App.vue?96c8","webpack:///./src/App.vue?bff9","webpack:///./src/allowedDataTypes.ts","webpack:///./src/form/BaseValidator.ts","webpack:///./src/form/DateValidator.ts","webpack:///./src/form/Validator.ts","webpack:///./src/serialization/DeserializationError.ts","webpack:///./src/serialization/QueryDeserializer.ts","webpack:///./src/store/actions.ts","webpack:///./src/store/mutations.ts","webpack:///./src/store/getters.ts","webpack:///./src/store/index.ts","webpack:///./src/main.ts","webpack:///./src/components/LabelOptout.vue?de89"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","attrs","lang","textDirection","_e","staticRenderFns","staticClass","directives","rawName","msg","expression","domProps","_s","$i18n","conditionRows","_l","condition","index","conditionId","class","isAboveOr","isBelowOr","conditionRelation","on","$event","setConditionRelation","addCondition","nativeOn","runQuery","encodedQuery","iframeRenderKey","license","buildTime","commitLink","bugLink","privacyPolicy","state","conditions","forEach","propertyId","propertyData","isPropertySet","id","propertyDataType","datatype","propertyValueRelation","propertyValueRelationData","referenceRelation","getValueFromCondition","subclasses","negate","JSON","stringify","limit","useLimit","omitLabels","valueData","quantityValue","unit","dateValue","parseResult","time","precision","extend","computed","buildDate","Date","setTime","parseInt","toUTCString","commitHash","querySerializer","serializedQuery","serialize","$store","current","URL","location","href","searchParams","set","title","desc","phabricatorLink","encodeURI","component","$emit","scopedSlots","_u","fn","_v","proxy","components","ToggleButton","ToggleButtonGroup","props","type","String","default","model","callback","$$v","negateValue","propertyError","conditionIndex","selectedProperty","limitedSupport","selectedPropertyValueRelation","isValueInputDisabled","valueError","conditionValue","setSubclasses","selectedReferenceRelation","removeCondition","dispatchComponent","tag","disabled","error","searchForItems","message","searchResults","search","placeholder","label","handleScroll","noMatchFoundMessage","tooltip","position","Icon","Button","Popover","required","NUMBER_OF_SEARCH_RESULTS","InfoTooltip","Lookup","topItemIndex","debouncedUpdateMenuItems","methods","event","searchOptions","offset","searchEntities","concat","searchForMenuItems","map","item","updateMenuItems","debouncedSearchOptions","watch","isDisabled","newSearchString","mounted","Function","Boolean","EntityLookup","options","dispatch","TextInput","quantityError","subproperty","numberInputValue","unitLookupValue","onValueChange","$rawInput","isNaN","Number","rawUnitInput","QuantityValidator","UNIT_ERROR","NUMBER_ERROR","COMBINED_ERROR","BasePropertyValueRelation","RangePropertyValueRelation","toString","parseNumberInputValue","rawValue","isValidNumberValue","NaN","$nextTick","QuantityInput","formattedValue","onInput","rawInput","debouncedDateValue","debouncedDateInput","DateInput","StringValueInput","ItemValueLookup","QuantityValueInput","DateValueInput","searchForProperties","setTagForSearchResults","selected","optionItems","ReferenceRelation","PropertyValueRelation","relationOptions","values","description","find","option","Dropdown","isChecked","Math","random","Checkbox","Precision","Regardless","getters","Matching","isSubclassCheckboxVisible","valueBoolean","ValueInput","PropertyLookup","ReferenceRelationDropDown","ValueTypeDropDown","DeleteConditionButton","NegationToggle","SubclassCheckbox","queryServiceUrl","errors","queryServiceEmbedUrl","updateInputTextValue","Message","wikibase","wd","wdt","wdtn","wds","wdref","wdv","ps","psv","psn","pq","pqv","pqn","pr","prv","prn","wdno","wdata","rdfs","rdf","owl","skos","xsd","prov","ontolex","schema","geo","geof","dct","bd","bds","gas","hint","sparqlGenerator","query","queryString","entries","prefix","iri","replace","subject","predicateValue","predicate","termType","pathItems","buildPropertyPath","predicateItem","pathType","items","triples","leftSideTerm","operator","rightSideTerm","buildOperationsExpression","leftSide","rightSide","args","numericValue","dateTime","syntaxBuilder","statementVariable","referencePattern","buildSimpleTriple","rdfNamespaces","With","buildBgpPattern","tripleBuilder","patterns","buildRegardlessOfValuePattern","buildValuePattern","addReferenceFilterPatternIfNeeded","negatePatternsIfNeeded","isDateValue","Error","DAY","buildDayPrecisionPatterns","buildLowPrecisionPatterns","addEntityToStatementPattern","addStatementToStatementValuePattern","addStatementValueToTimeValuePattern","addStatementValueToPrecisionPattern","addPrecisionFilterPattern","datetimeVariable","getConditionVariable","matchingDateBind","variable","buildLiteralTermForDateTime","NotMatching","notMatchingFilter","buildOperatorFilterPattern","LessThan","beforeFilter","MoreThan","afterFilter","addRangeSafeHintPattern","addDateTimeFilterPattern","dateTimeFilterPattern","buildDateTimeFilterPattern","followingDateTime","MONTH","calculateFollowingMonthDateTime","YEAR","calculateFollowingYearDateTime","dateTimeVariable","originalDateTime","match","groups","originalYear","year","originalSign","sign","followingYear","followingMonth","originalMonth","month","padStart","entityToStatementTriple","statementValueVariable","statementToStatementValueTriple","statementToValueTriple","precisionVariable","statementValueToPrecisionTriple","precisionPattern","hintRangeSafeTriple","hintPattern","precisionFilterPattern","referenceFilterPattern","buildReferenceFilterPattern","buildVariableTermFromName","repeatingPropertyIndex","buildPathTriple","buildStatementToValuePredicateItems","buildObjectItems","entityValuePattern","notMatchingPattern","buildNotMatchingPattern","notMatchingValueTriple","statementToValuePredicateItems","getSubclassPropertyId","propertyMap","parse","propertyIndex","buildValuePatterns","isQuantityValue","buildPatternsForUnitlessValue","buildFullQuantityPattern","numericQuantityVariable","bgp","userQuantityVariable","userQuantityBind","buildLiteralTermForDecimalNumber","userUnitVariable","userUnitBind","conversionPropertyId","getSiConversionPropertyId","conversionFactorVariable","unitToConversionFactorTriple","coherentUnitVariable","unitToCoherentUnitTriple","conversionGroup","coherentUserQuantityVariable","coherentUserQuantityBind","statementQuantityVariable","statementToAmountTriple","statementToUnitTyple","entityQuantityGroup","getFilterOperatorFromRelation","valueFilterPattern","ALLOWED_DATATYPES","includes","getValuePatternBuilderForDatatype","buildValuePatternFromCondition","buildLabelServiceTriple","buildAnyValueTripe","queryRepresentation","queryObject","queryType","distinct","variables","where","prefixes","patternBuilder","buildConditionTree","Array","isArray","buildUnion","buildFromQueryCondition","isOnlyNegateQuery","unshift","buildAnyValuePattern","wrapQueryWithLabel","filter","rootNode","attachToPreviousConditionWithOr","attachToRootWithAnd","lastElementIsSingleCondition","makeLastElementIntoConditionGroup","attachToExistingConditionGroup","pop","unionConditions","propertyRegardlessOfValueOccursMoreThanOnce","unionConditionGroup","union","wrapperQuery","buildLabelServicePattern","silent","buildQuery","queryObjectBuilder","buildFromQueryRepresentation","queryBuilderSparqlGenerator","getString","ConditionRelation","checked","onLimitChange","DEFAULT_LIMIT","undefined","storeLimit","newStoreLimitValue","copyTextToClipboard","shortenUrl","navigator","clipboard","writeText","url","requestOptions","method","headers","params","action","format","origin","shortnerUrl","fetch","response","ok","json","protocol","shortenurl","shorturl","shorturlalt","created","incrementMetric","metric","urlParams","URLSearchParams","has","web_url","json_url","top","postMessage","event_id","query_json","setTimeout","document","getElementsByClassName","scrollIntoView","behavior","toggle","querySelectorAll","focus","Or","ConditionRelationToggle","QueryResult","QueryCondition","AddCondition","Limit","LabelOptout","Footer","SharableLink","code","responseLang","console","warn","Promise","resolve","services","service","languageCode","endpoint","forLanguageCode","searchString","entityType","language","uselang","formatversion","errorformat","continue","status","statusText","concatinateValues","join","validate","extractPlaintextErrorMessageFromData","results","text","dataValue","generate","datavalue","info","StatsvMetricsCollector","sendBacon","sendBeacon","e","createElement","src","languageService","getAppLanguageCode","config","errorHandler","increment","isi18nLoaded","fetchi18n","reconstructStateFromURL","updated","sampleElement","getElementById","getComputedStyle","direction","getMessagesForLangCode","messages","en","use","locale","wikilinks","QueryBuilder","allowedDataTypes","BaseValidator","VALUE_MISSING_ERROR","formValues","validationResult","formErrors","fieldErrors","isEmpty","conditionValues","validateCondition","some","validateConditionValue","validateValue","validateQuantityValue","getPropertyData","getConditionValue","after","before","calendarmodel","timezone","_conditionValue","searchEntityRepository","metricsCollector","parseValueRepository","formatValueRepository","searchProperties","_context","searchResult","searchItemValues","updateDateValue","context","payload","commit","errorsToClear","parseValues","parsedValue","errorDateValue","formatValue","validDateValue","updateValue","unsetProperty","updateProperty","oldDatatype","updatePropertyValueRelation","setReferenceRelation","setNegate","setLimit","setUseLimit","setOmitLabels","setErrors","setConditionAsLimitedSupport","validateForm","validator","rootState","conditionRow","validateLimit","parseState","deserializer","deserialize","setValue","clearValue","setProperty","setPropertyValueRelation","getFreshConditionRow","setFieldErrors","clearFieldErrors","setState","assign","getQueryValueFromStoreValue","storeValue","getErrors","newEmptyPropertyData","isFirstCondition","And","getInitialState","createStore","actions","mutations","productionTip","store","render","h","App","$mount"],"mappings":"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","file":"js/app.9d67c455.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddCondition.vue?vue&type=style&index=0&id=499e8a00&scoped=true&lang=scss&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ValueTypeDropDown.vue?vue&type=style&index=0&lang=scss&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SubclassCheckbox.vue?vue&type=style&index=0&lang=scss&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./QueryBuilder.vue?vue&type=style&index=0&lang=scss&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./QueryCondition.vue?vue&type=style&index=0&id=134d60f2&scoped=true&lang=scss&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Footer.vue?vue&type=style&index=0&lang=scss&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Limit.vue?vue&type=style&index=0&lang=scss&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharableLink.vue?vue&type=style&index=0&id=6ab07608&scoped=true&lang=scss&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./QueryResult.vue?vue&type=style&index=0&lang=scss&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InfoTooltip.vue?vue&type=style&index=0&lang=scss&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DeleteConditionButton.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\",\"lang\":_vm.lang,\"dir\":_vm.textDirection}},[(_vm.isi18nLoaded)?_c('QueryBuilder'):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"querybuilder\"},[_c('main',[_c('h1',{staticClass:\"querybuilder__heading\"},[_c('bdi',{directives:[{name:\"i18n\",rawName:\"v-i18n\",value:({msg: 'query-builder-heading'}),expression:\"{msg: 'query-builder-heading'}\"}],attrs:{\"id\":\"directionSample\"}})]),_c('p',{staticClass:\"querybuilder__description\",domProps:{\"innerHTML\":_vm._s(_vm.$i18n(\n\t\t\t\t'query-builder-intro-text',\n\t\t\t\t'https://www.wikidata.org/wiki/Special:MyLanguage/Wikidata:SPARQL_tutorial',\n\t\t\t\t'https://www.wikidata.org/wiki/Wikidata_talk:Query_Builder'\n\t\t\t) )}}),_c('div',{attrs:{\"role\":\"form\"}},[_c('h2',{staticClass:\"querybuilder__query-title\",domProps:{\"innerHTML\":_vm._s(_vm.$i18n('query-builder-query-heading'))}}),_c('p',{directives:[{name:\"i18n\",rawName:\"v-i18n\",value:({msg: 'query-builder-find-all-items'}),expression:\"{msg: 'query-builder-find-all-items'}\"}],staticClass:\"querybuilder__query-subtitle\"}),(!_vm.conditionRows.length)?_c('div',{directives:[{name:\"i18n\",rawName:\"v-i18n\",value:({msg: 'query-builder-condition-placeholder'}),expression:\"{msg: 'query-builder-condition-placeholder'}\"}],staticClass:\"querybuilder__condition-placeholder\"}):_vm._e(),_vm._l((_vm.conditionRows),function(condition,index){return _c('div',{key:condition.conditionId,class:[\n\t\t\t\t\t'querybuilder__condition-group',\n\t\t\t\t\t(_vm.isAboveOr(index)) ? 'querybuilder__condition-group--above' : '' ]},[_c('div',{class:[\n\t\t\t\t\t\t'querybuilder__condition-wrapper',\n\t\t\t\t\t\t(index == 0) ? 'querybuilder__condition-wrapper--first' : '',\n\t\t\t\t\t\t((index + 1) == _vm.conditionRows.length) ? 'querybuilder__condition-wrapper--last' : '',\n\t\t\t\t\t\t(_vm.isBelowOr(index)) ? 'querybuilder__condition-wrapper--below' : '',\n\t\t\t\t\t\t(_vm.isAboveOr(index)) ? 'querybuilder__condition-wrapper--above' : '' ]},[_c('QueryCondition',{attrs:{\"condition-index\":index}})],1),((index + 1) !== _vm.conditionRows.length)?_c('ConditionRelationToggle',{class:[\n\t\t\t\t\t\t'querybuilder__condition-relation-toggle',\n\t\t\t\t\t\t(_vm.isBelowOr(index + 1)) ? 'querybuilder__condition-relation-toggle-or' : '' ],attrs:{\"value\":_vm.conditionRows[index + 1].conditionRelation},on:{\"set-relation-toggle\":function($event){return _vm.setConditionRelation($event, index)}}}):_vm._e()],1)}),_c('AddCondition',{on:{\"add-condition\":_vm.addCondition}}),_c('h2',{staticClass:\"querybuilder__setting-header\",domProps:{\"innerHTML\":_vm._s(_vm.$i18n('query-builder-settings-heading'))}}),_c('div',{staticClass:\"querybuilder__settings\"},[_c('Limit'),_c('LabelOptout')],1),_c('div',{staticClass:\"querybuilder__run\"},[_c('Button',{directives:[{name:\"i18n\",rawName:\"v-i18n\",value:({msg: 'query-builder-run-query'}),expression:\"{msg: 'query-builder-run-query'}\"}],attrs:{\"type\":\"progressive\",\"variant\":\"primary\"},nativeOn:{\"click\":function($event){return _vm.runQuery($event)}}}),_c('SharableLink')],1)],2),_c('QueryResult',{attrs:{\"encodedQuery\":_vm.encodedQuery,\"iframeRenderKey\":_vm.iframeRenderKey}})],1),_c('div',{staticClass:\"query-builder__footer\"},[_c('Footer')],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('footer',{staticClass:\"querybuilder-footer\"},[_c('div',{staticClass:\"querybuilder-footer__column\"},[_c('h2',{directives:[{name:\"i18n\",rawName:\"v-i18n\",value:({msg: 'query-builder-footer-about-query-builder'}),expression:\"{msg: 'query-builder-footer-about-query-builder'}\"}],staticClass:\"querybuilder-footer__title\"}),_c('p',{domProps:{\"innerHTML\":_vm._s(_vm.$i18n('query-builder-footer-licence', _vm.license))}}),(_vm.buildTime && _vm.commitLink)?_c('p',{staticClass:\"querybuilder-footer__build-info\",domProps:{\"innerHTML\":_vm._s(_vm.$i18n('query-builder-footer-build-time', _vm.commitLink, _vm.buildTime))}}):_vm._e(),_c('p',[_c('a',{directives:[{name:\"i18n\",rawName:\"v-i18n\",value:({msg: 'query-builder-footer-view-source'}),expression:\"{msg: 'query-builder-footer-view-source'}\"}],attrs:{\"href\":\"https://gerrit.wikimedia.org/g/wikidata/query-builder\"}})]),_c('p',{staticClass:\"querybuilder-footer__report-link\"},[_c('a',{directives:[{name:\"i18n\",rawName:\"v-i18n\",value:({msg: 'query-builder-footer-report-link'}),expression:\"{msg: 'query-builder-footer-report-link'}\"}],attrs:{\"href\":_vm.bugLink}})])]),_c('div',{staticClass:\"querybuilder-footer__column\"},[_c('h2',{directives:[{name:\"i18n\",rawName:\"v-i18n\",value:({msg: 'query-builder-footer-about-us'}),expression:\"{msg: 'query-builder-footer-about-us'}\"}],staticClass:\"querybuilder-footer__title\"}),(_vm.privacyPolicy)?_c('p',{staticClass:\"querybuilder-footer__privacy-policy\"},[_c('a',{directives:[{name:\"i18n\",rawName:\"v-i18n\",value:({msg: 'query-builder-footer-privacy-policy'}),expression:\"{msg: 'query-builder-footer-privacy-policy'}\"}],attrs:{\"href\":_vm.privacyPolicy}})]):_vm._e(),_c('p',[_c('a',{directives:[{name:\"i18n\",rawName:\"v-i18n\",value:({msg: 'query-builder-footer-wikimedia-deutchland'}),expression:\"{msg: 'query-builder-footer-wikimedia-deutchland'}\"}],attrs:{\"href\":\"https://www.wikimedia.de/\"}})]),_c('p',[_c('a',{directives:[{name:\"i18n\",rawName:\"v-i18n\",value:({msg: 'query-builder-footer-team'}),expression:\"{msg: 'query-builder-footer-team'}\"}],attrs:{\"href\":\"https://www.wikidata.org/wiki/Wikidata:Contact_the_development_team\"}})])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import RootState, { ConditionRow, ItemValue, QuantityValue, DateValue } from '@/store/RootState';\nimport SerializedObject, { SerializedValue } from '@/data-model/SerializedObject';\n\nexport default class QuerySerializer {\n\tpublic serialize( state: RootState ): string {\n\t\tconst conditions: SerializedObject[] = [];\n\t\tstate.conditionRows.forEach( ( condition: ConditionRow ) => {\n\t\t\tconditions.push(\n\t\t\t\t{\n\t\t\t\t\tpropertyId: condition.propertyData.isPropertySet ? condition.propertyData.id : '',\n\t\t\t\t\tpropertyDataType: condition.propertyData.datatype,\n\t\t\t\t\tpropertyValueRelation: condition.propertyValueRelationData.value,\n\t\t\t\t\treferenceRelation: condition.referenceRelation,\n\t\t\t\t\tvalue: this.getValueFromCondition( condition ),\n\t\t\t\t\tsubclasses: condition.subclasses,\n\t\t\t\t\tconditionRelation: condition.conditionRelation,\n\t\t\t\t\tnegate: condition.negate,\n\t\t\t\t},\n\t\t\t);\n\t\t} );\n\t\treturn JSON.stringify( {\n\t\t\tconditions,\n\t\t\tlimit: state.limit,\n\t\t\tuseLimit: state.useLimit,\n\t\t\tomitLabels: state.omitLabels,\n\t\t} );\n\t}\n\n\tprivate getValueFromCondition( condition: ConditionRow ): SerializedValue {\n\t\tif ( !condition.valueData.value ) {\n\t\t\treturn ''; // maybe better return null?\n\t\t}\n\t\tif ( condition.propertyData.datatype === 'wikibase-item' ) {\n\t\t\treturn ( condition.valueData.value as ItemValue ).id;\n\t\t}\n\t\tif ( condition.propertyData.datatype === 'quantity' ) {\n\t\t\tconst quantityValue: QuantityValue = condition.valueData.value as QuantityValue;\n\t\t\treturn {\n\t\t\t\tvalue: quantityValue.value,\n\t\t\t\tunit: quantityValue.unit ? quantityValue.unit.id : null,\n\t\t\t};\n\t\t}\n\t\tif ( condition.propertyData.datatype === 'time' ) {\n\t\t\tconst dateValue: DateValue = condition.valueData.value as DateValue;\n\n\t\t\tif ( dateValue.parseResult ) {\n\t\t\t\treturn {\n\t\t\t\t\tvalue: dateValue.parseResult.value.time,\n\t\t\t\t\tprecision: dateValue.parseResult.value.precision,\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn '';\n\t\t}\n\t\treturn condition.valueData.value as string;\n\t}\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport QuerySerializer from '@/serialization/QuerySerializer';\nimport Vue from 'vue';\n\nexport default Vue.extend( {\n\tname: 'Footer',\n\tdata() {\n\t\treturn {\n\t\t\t// eslint-disable-next-line max-len\n\t\t\tlicense: 'https://gerrit.wikimedia.org/r/plugins/gitiles/wikidata/query-builder/+/refs/heads/master/LICENSE',\n\t\t};\n\t},\n\tcomputed: {\n\t\tbuildTime(): string | false {\n\t\t\tconst buildDate = new Date();\n\t\t\tif ( !process.env.VUE_APP_BUILD_TIME ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tbuildDate.setTime( parseInt( process.env.VUE_APP_BUILD_TIME ) );\n\t\t\treturn buildDate.toUTCString();\n\t\t},\n\t\tcommitLink(): string | false {\n\t\t\tconst commitHash = process.env.VUE_APP_GIT_COMMIT;\n\t\t\tif ( !commitHash ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn `https://gerrit.wikimedia.org/g/wikidata/query-builder/+/${commitHash}`;\n\t\t},\n\t\tbugLink(): string {\n\t\t\tconst querySerializer = new QuerySerializer();\n\t\t\tconst serializedQuery = querySerializer.serialize( this.$store.state );\n\t\t\tconst current = new URL( window.location.href );\n\t\t\tcurrent.searchParams.set( 'query', serializedQuery );\n\t\t\tconst title = 'Wikidata%20Query%20Builder+Ticket+Template';\n\t\t\tconst desc = '**Problem:**\\n\\n**Example:**\\n\\n**Screenshots:**\\n\\n**Link+to+query:**\\n';\n\t\t\tconst phabricatorLink = 'https://phabricator.wikimedia.org/maniphest/task/edit/form/1/?title=';\n\t\t\treturn phabricatorLink + title + '&description=' + encodeURI( desc + current.href ) +\n          '&projects=Wikidata_Query_Builder';\n\t\t},\n\t\tprivacyPolicy(): string | undefined {\n\t\t\treturn process.env.VUE_APP_PRIVACY_POLICY_URL;\n\t\t},\n\t},\n} );\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Footer.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Footer.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Footer.vue?vue&type=template&id=5e715f77&\"\nimport script from \"./Footer.vue?vue&type=script&lang=ts&\"\nexport * from \"./Footer.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Footer.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ToggleButtonGroup',{staticClass:\"conditionRelationToggle\",attrs:{\"value\":_vm.value},on:{\"input\":function($event){return _vm.$emit('set-relation-toggle', $event)}},scopedSlots:_vm._u([{key:\"default\",fn:function(){return [_c('ToggleButton',{attrs:{\"value\":\"and\"}},[_vm._v(_vm._s(_vm.$i18n( 'query-builder-condition-relation-toggle-and' )))]),_c('ToggleButton',{attrs:{\"value\":\"or\"}},[_vm._v(_vm._s(_vm.$i18n( 'query-builder-condition-relation-toggle-or' )))])]},proxy:true}])})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { ToggleButton, ToggleButtonGroup } from '@wmde/wikit-vue-components';\nimport Vue from 'vue';\n\nexport default Vue.extend( {\n\tname: 'ConditionRelationToggle',\n\tcomponents: { ToggleButton, ToggleButtonGroup },\n\tprops: {\n\t\tvalue: {\n\t\t\ttype: String,\n\t\t\tdefault: 'add',\n\t\t},\n\t},\n} );\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ConditionRelationToggle.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ConditionRelationToggle.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./ConditionRelationToggle.vue?vue&type=template&id=71b4bfcd&\"\nimport script from \"./ConditionRelationToggle.vue?vue&type=script&lang=ts&\"\nexport * from \"./ConditionRelationToggle.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"query-condition\"},[_c('NegationToggle',{staticClass:\"query-condition__toggle-button-group\",model:{value:(_vm.negateValue),callback:function ($$v) {_vm.negateValue=$$v},expression:\"negateValue\"}}),_c('div',{staticClass:\"query-condition__input-container\"},[_c('div',[_c('PropertyLookup',{staticClass:\"query-condition__property-lookup\",attrs:{\"error\":_vm.propertyError(_vm.conditionIndex)},model:{value:(_vm.selectedProperty),callback:function ($$v) {_vm.selectedProperty=$$v},expression:\"selectedProperty\"}})],1),_c('div',[_c('ValueTypeDropDown',{staticClass:\"query-condition__value-type-dropdown\",attrs:{\"disabled\":_vm.limitedSupport(_vm.conditionIndex),\"datatype\":_vm.datatype},model:{value:(_vm.selectedPropertyValueRelation),callback:function ($$v) {_vm.selectedPropertyValueRelation=$$v},expression:\"selectedPropertyValueRelation\"}})],1),_c('div',[_c('ValueInput',{staticClass:\"query-condition__value-input\",attrs:{\"disabled\":_vm.isValueInputDisabled(),\"error\":_vm.valueError,\"datatype\":_vm.datatype},model:{value:(_vm.conditionValue),callback:function ($$v) {_vm.conditionValue=$$v},expression:\"conditionValue\"}}),(_vm.isSubclassCheckboxVisible)?_c('SubclassCheckbox',{attrs:{\"disabled\":_vm.isValueInputDisabled(),\"isChecked\":_vm.subclasses(_vm.conditionIndex)},on:{\"subclass-check\":_vm.setSubclasses}}):_vm._e()],1),_c('div',[_c('ReferenceRelationDropDown',{staticClass:\"query-condition__references\",model:{value:(_vm.selectedReferenceRelation),callback:function ($$v) {_vm.selectedReferenceRelation=$$v},expression:\"selectedReferenceRelation\"}})],1)]),_c('DeleteConditionButton',{staticClass:\"query-condition__remove\",on:{\"click\":_vm.removeCondition}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(_vm.dispatchComponent,{tag:\"component\",attrs:{\"value\":_vm.value,\"disabled\":_vm.disabled,\"error\":_vm.error},on:{\"input\":function($event){return _vm.$emit('input', $event)}}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('EntityLookup',{attrs:{\"value\":_vm.value,\"error\":_vm.error,\"searchForMenuItems\":_vm.searchForItems,\"label\":_vm.$i18n('query-builder-input-value-label'),\"tooltip\":_vm.$i18n('query-builder-input-value-tooltip'),\"placeholder\":_vm.$i18n('query-builder-input-value-placeholder'),\"no-match-found-message\":_vm.$i18n('query-builder-item-value-lookup-no-match-found'),\"disabled\":_vm.disabled},on:{\"input\":function($event){return _vm.$emit( 'input', $event )}}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Lookup',{attrs:{\"value\":_vm.value,\"error\":_vm.error ? {message: _vm.$i18n(_vm.error.message), type: _vm.error.type} : null,\"menu-items\":_vm.searchResults,\"search-input\":_vm.search,\"placeholder\":_vm.placeholder,\"label\":_vm.label,\"disabled\":_vm.disabled},on:{\"input\":function($event){return _vm.$emit( 'input', $event )},\"update:searchInput\":function($event){_vm.search=$event},\"update:search-input\":function($event){_vm.search=$event},\"scroll\":_vm.handleScroll},scopedSlots:_vm._u([{key:\"no-results\",fn:function(){return [_vm._v(_vm._s(_vm.noMatchFoundMessage))]},proxy:true},(_vm.tooltip)?{key:\"suffix\",fn:function(){return [_c('InfoTooltip',{attrs:{\"position\":\"top-end\",\"message\":_vm.tooltip}})]},proxy:true}:null],null,true)})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"querybuilder-tooltip\"},[_c('Popover',{attrs:{\"reactToHover\":true,\"position\":_vm.position},scopedSlots:_vm._u([{key:\"target\",fn:function(){return [_c('Button',{attrs:{\"variant\":\"quiet\",\"type\":\"neutral\",\"iconOnly\":\"\",\"aria-label\":\"open tooltip with more information\"}},[_c('Icon',{attrs:{\"type\":\"info-outlined\",\"size\":\"small\"}})],1)]},proxy:true}])},[_c('div',{domProps:{\"innerHTML\":_vm._s(_vm.message)}})])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from 'vue';\nimport { Icon, Button, Popover } from '@wmde/wikit-vue-components';\n\nexport default Vue.extend( {\n\tname: 'InfoTooltip',\n\tcomponents: {\n\t\tIcon,\n\t\tButton,\n\t\tPopover,\n\t},\n\tprops: {\n\t\tposition: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tmessage: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n} );\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InfoTooltip.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InfoTooltip.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./InfoTooltip.vue?vue&type=template&id=10352385&\"\nimport script from \"./InfoTooltip.vue?vue&type=script&lang=ts&\"\nexport * from \"./InfoTooltip.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./InfoTooltip.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { MenuItem } from '@wmde/wikit-vue-components/dist/components/MenuItem';\nimport Vue, { PropType } from 'vue';\nimport debounce from 'lodash/debounce';\n\nimport { Lookup } from '@wmde/wikit-vue-components';\nimport SearchResult from '@/data-access/SearchResult';\nimport SearchOptions from '@/data-access/SearchOptions';\nimport InfoTooltip from '@/components/InfoTooltip.vue';\n\nconst NUMBER_OF_SEARCH_RESULTS = 12;\n\nexport default Vue.extend( {\n\tname: 'EntityLookup',\n\tcomponents: {\n\t\tInfoTooltip,\n\t\tLookup,\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tsearch: '',\n\t\t\tsearchResults: [] as MenuItem[],\n\t\t\ttopItemIndex: 1,\n\t\t\tdebouncedUpdateMenuItems: null as Function | null,\n\t\t};\n\t},\n\tmethods: {\n\t\tasync handleScroll( event: number ): Promise<void> {\n\t\t\tif ( this.topItemIndex <= event ) {\n\t\t\t\tthis.topItemIndex += NUMBER_OF_SEARCH_RESULTS;\n\n\t\t\t\tconst searchOptions: SearchOptions = {\n\t\t\t\t\tsearch: this.search,\n\t\t\t\t\toffset: this.topItemIndex,\n\t\t\t\t\tlimit: NUMBER_OF_SEARCH_RESULTS,\n\t\t\t\t};\n\n\t\t\t\tthis.searchResults = this.searchResults.concat(\n\t\t\t\t\tawait this.searchEntities( searchOptions ),\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\t\tasync searchEntities( searchOptions: SearchOptions ): Promise<SearchResult[]> {\n\t\t\tconst searchResults = await this.searchForMenuItems( searchOptions );\n\t\t\treturn searchResults.map(\n\t\t\t\t( item: MenuItem & SearchResult ) => {\n\t\t\t\t\titem.tag = item.tag && this.$i18n( item.tag );\n\t\t\t\t\treturn item;\n\t\t\t\t},\n\t\t\t);\n\t\t},\n\t\tupdateMenuItems( searchOptions: SearchOptions ): void {\n\t\t\tif ( this.debouncedUpdateMenuItems === null ) {\n\t\t\t\tthis.debouncedUpdateMenuItems = debounce(\n\t\t\t\t\tasync ( debouncedSearchOptions: SearchOptions ) => {\n\t\t\t\t\t\tthis.searchResults = await this.searchForMenuItems( debouncedSearchOptions );\n\t\t\t\t\t},\n\t\t\t\t\t150,\n\t\t\t\t);\n\t\t\t}\n\t\t\tthis.debouncedUpdateMenuItems( searchOptions );\n\t\t},\n\t},\n\twatch: {\n\t\tdisabled( isDisabled: boolean ): void {\n\t\t\tif ( isDisabled ) {\n\t\t\t\tthis.search = '';\n\t\t\t}\n\t\t},\n\t\tsearch( newSearchString: string ): void {\n\t\t\tthis.topItemIndex = 0;\n\t\t\tif ( !newSearchString ) {\n\t\t\t\tthis.searchResults = [];\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst searchOptions: SearchOptions = {\n\t\t\t\tsearch: newSearchString,\n\t\t\t\tlimit: NUMBER_OF_SEARCH_RESULTS,\n\t\t\t};\n\t\t\tthis.updateMenuItems( searchOptions );\n\t\t},\n\t},\n\tmounted() {\n\t\tif ( this.value && this.value.label && !this.search ) {\n\t\t\tthis.search = this.value.label;\n\t\t}\n\t},\n\tprops: {\n\t\tsearchForMenuItems: {\n\t\t\ttype: Function as PropType<( searchOptions: SearchOptions ) => Promise<SearchResult[]>>,\n\t\t\trequired: true,\n\t\t},\n\t\tvalue: {\n\t\t\ttype: Object as PropType<MenuItem>,\n\t\t\tdefault: null,\n\t\t},\n\t\terror: {\n\t\t\ttype: Object,\n\t\t\tdefault: null,\n\t\t},\n\t\tdisabled: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tlabel: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tnoMatchFoundMessage: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tplaceholder: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\ttooltip: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t},\n} );\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EntityLookup.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EntityLookup.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./EntityLookup.vue?vue&type=template&id=eb675f3e&\"\nimport script from \"./EntityLookup.vue?vue&type=script&lang=ts&\"\nexport * from \"./EntityLookup.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport EntityLookup from '@/components/EntityLookup.vue';\nimport SearchOptions from '@/data-access/SearchOptions';\nimport SearchResult from '@/data-access/SearchResult';\nimport { MenuItem } from '@wmde/wikit-vue-components/dist/components/MenuItem';\nimport Vue, { PropType } from 'vue';\n\nexport default Vue.extend( {\n\tname: 'ItemValueLookup',\n\tcomponents: {\n\t\tEntityLookup,\n\t},\n\tmethods: {\n\t\tsearchForItems( options: SearchOptions ): Promise<SearchResult[]> {\n\t\t\treturn this.$store.dispatch( 'searchItemValues', options );\n\t\t},\n\t},\n\tprops: {\n\t\tvalue: {\n\t\t\ttype: Object as PropType<MenuItem>,\n\t\t\tdefault: null,\n\t\t},\n\t\terror: {\n\t\t\ttype: Object,\n\t\t\tdefault: null,\n\t\t},\n\t\tdisabled: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n} );\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ItemValueLookup.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ItemValueLookup.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./ItemValueLookup.vue?vue&type=template&id=c3bac8fa&\"\nimport script from \"./ItemValueLookup.vue?vue&type=script&lang=ts&\"\nexport * from \"./ItemValueLookup.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('TextInput',{attrs:{\"label\":_vm.$i18n('query-builder-input-value-label'),\"value\":_vm.value,\"error\":_vm.error ? {message: _vm.$i18n(_vm.error.message), type: _vm.error.type} : null,\"placeholder\":_vm.$i18n('query-builder-input-value-placeholder'),\"disabled\":_vm.disabled},on:{\"input\":function($event){return _vm.$emit('input', $event)}},scopedSlots:_vm._u([{key:\"suffix\",fn:function(){return [_c('InfoTooltip',{attrs:{\"position\":\"end\",\"message\":_vm.$i18n('query-builder-input-value-tooltip')}})]},proxy:true}])})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { TextInput } from '@wmde/wikit-vue-components';\nimport Vue from 'vue';\nimport InfoTooltip from '@/components/InfoTooltip.vue';\n\nexport default Vue.extend( {\n\tname: 'StringValueInput',\n\tprops: {\n\t\tvalue: {\n\t\t\ttype: String,\n\t\t\tdefault: null,\n\t\t},\n\t\terror: {\n\t\t\ttype: Object,\n\t\t\tdefault: null,\n\t\t},\n\t\tdisabled: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tcomponents: {\n\t\tTextInput,\n\t\tInfoTooltip,\n\t},\n} );\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StringValueInput.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StringValueInput.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./StringValueInput.vue?vue&type=template&id=38c37b1c&\"\nimport script from \"./StringValueInput.vue?vue&type=script&lang=ts&\"\nexport * from \"./StringValueInput.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('QuantityInput',{attrs:{\"label\":_vm.$i18n('query-builder-quantity-value-label'),\"error\":_vm.quantityError ? {message: _vm.$i18n(_vm.quantityError.message), type: _vm.quantityError.type} : null,\"errorCause\":_vm.quantityError ? _vm.quantityError.subproperty : null,\"numberInputValue\":_vm.numberInputValue,\"numberInputPlaceholder\":_vm.$i18n('query-builder-quantity-value-number-input-placeholder'),\"unitLookupValue\":_vm.unitLookupValue,\"unitLookupPlaceholder\":_vm.$i18n('query-builder-quantity-value-unit-lookup-input-placeholder'),\"unitLookupLabel\":_vm.$i18n('query-builder-quantity-value-unit-lookup-label'),\"unitLookupMenuItems\":_vm.searchResults,\"unitLookupSearchInput\":_vm.search,\"disabled\":_vm.disabled},on:{\"update:numberInputValue\":[_vm.onValueChange,function($event){_vm.numberInputValue=$event}],\"update:unitLookupValue\":[_vm.onValueChange,function($event){_vm.unitLookupValue=$event}],\"update:number-input-value\":function($event){_vm.numberInputValue=$event},\"update:unit-lookup-value\":function($event){_vm.unitLookupValue=$event},\"update:unitLookupSearchInput\":function($event){_vm.search=$event},\"update:unit-lookup-search-input\":function($event){_vm.search=$event},\"scroll\":_vm.handleScroll},scopedSlots:_vm._u([{key:\"no-results\",fn:function(){return [_vm._v(\" \"+_vm._s(_vm.$i18n( 'query-builder-property-lookup-no-match-found' ))+\" \")]},proxy:true},{key:\"suffix\",fn:function(){return [_c('InfoTooltip',{attrs:{\"position\":\"top-end\",\"message\":_vm.$i18n('query-builder-input-value-tooltip')}})]},proxy:true}])})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { QuantityError } from '@/data-model/Error';\nimport { QuantityValue } from '@/store/RootState';\n\nexport default class QuantityValidator {\n\n\tpublic static readonly NUMBER_ERROR: QuantityError = {\n\t\ttype: 'error',\n\t\tmessage: 'query-builder-quantity-value-error-number',\n\t\tsubproperty: 'number',\n\t};\n\n\tpublic static readonly UNIT_ERROR: QuantityError = {\n\t\ttype: 'error',\n\t\tmessage: 'query-builder-quantity-value-error-unit',\n\t\tsubproperty: 'unit',\n\t};\n\n\tpublic static readonly COMBINED_ERROR: QuantityError = {\n\t\ttype: 'error',\n\t\tmessage: 'query-builder-quantity-value-error-number-and-unit',\n\t\tsubproperty: 'both',\n\t};\n\n\tpublic isValidNumberValue( $rawInput: string | null ): boolean {\n\t\tif ( $rawInput === null ) {\n\t\t\treturn false;\n\t\t}\n\t\treturn !isNaN( Number( $rawInput ) );\n\t}\n\n\tpublic validateQuantityValue( value: QuantityValue | null ): null | QuantityError {\n\t\tif ( !value ) {\n\t\t\treturn QuantityValidator.NUMBER_ERROR;\n\t\t}\n\n\t\tif ( !value.value && value.rawUnitInput && !value.unit ) {\n\t\t\treturn QuantityValidator.COMBINED_ERROR;\n\t\t}\n\n\t\tif ( !value.value ) {\n\t\t\treturn QuantityValidator.NUMBER_ERROR;\n\t\t}\n\n\t\tif ( value.rawUnitInput && !value.unit ) {\n\t\t\treturn QuantityValidator.UNIT_ERROR;\n\t\t}\n\n\t\treturn null;\n\t}\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { QuantityInput } from '@wmde/wikit-vue-components';\nimport Vue, { PropType } from 'vue';\nimport { MenuItem } from '@wmde/wikit-vue-components/dist/components/MenuItem';\nimport SearchOptions from '@/data-access/SearchOptions';\nimport SearchResult from '@/data-access/SearchResult';\nimport InfoTooltip from '@/components/InfoTooltip.vue';\nimport { QuantityError } from '@/data-model/Error';\nimport QuantityValidator from '@/form/QuantityValidator';\nimport { QuantityValue } from '@/store/RootState';\nimport debounce from 'lodash/debounce';\n\nconst NUMBER_OF_SEARCH_RESULTS = 12;\n\nexport default Vue.extend( {\n\tname: 'QuantityValueInput',\n\tdata() {\n\t\treturn {\n\t\t\tsearch: '',\n\t\t\tsearchResults: [] as MenuItem[],\n\t\t\ttopItemIndex: 1,\n\t\t\tnumberInputValue: this.value === null ? null : this.value.value.toString(),\n\t\t\tunitLookupValue: this.value === null ? null : this.value.unit,\n\t\t\tdebouncedUpdateMenuItems: null as Function | null,\n\t\t\tquantityError: this.error,\n\t\t};\n\t},\n\tmethods: {\n\t\tparseNumberInputValue( rawValue: string | null ): number {\n\t\t\tif ( !( new QuantityValidator() ).isValidNumberValue( rawValue ) ) {\n\t\t\t\tthis.quantityError = QuantityValidator.NUMBER_ERROR;\n\t\t\t\treturn NaN;\n\t\t\t}\n\n\t\t\tthis.quantityError = null;\n\t\t\treturn Number( rawValue );\n\t\t},\n\t\tasync onValueChange(): Promise<void> {\n\t\t\tawait this.$nextTick();\n\t\t\tconst value: QuantityValue = {\n\t\t\t\tvalue: this.parseNumberInputValue( this.numberInputValue ),\n\t\t\t\tunit: this.unitLookupValue,\n\t\t\t\trawUnitInput: this.search,\n\t\t\t};\n\n\t\t\tthis.$emit( 'input', value );\n\t\t},\n\t\tasync handleScroll( event: number ): Promise<void> {\n\t\t\tif ( this.topItemIndex <= event ) {\n\t\t\t\tthis.topItemIndex += NUMBER_OF_SEARCH_RESULTS;\n\n\t\t\t\tconst searchOptions: SearchOptions = {\n\t\t\t\t\tsearch: this.search,\n\t\t\t\t\toffset: this.topItemIndex,\n\t\t\t\t\tlimit: NUMBER_OF_SEARCH_RESULTS,\n\t\t\t\t};\n\n\t\t\t\tthis.searchResults = this.searchResults.concat(\n\t\t\t\t\tawait this.searchEntities( searchOptions ),\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\t\tasync searchEntities( searchOptions: SearchOptions ): Promise<SearchResult[]> {\n\t\t\tconst searchResults = await this.searchForItems( searchOptions );\n\t\t\treturn searchResults.map(\n\t\t\t\t( item: MenuItem & SearchResult ) => {\n\t\t\t\t\titem.tag = item.tag && this.$i18n( item.tag );\n\t\t\t\t\treturn item;\n\t\t\t\t},\n\t\t\t);\n\t\t},\n\t\tsearchForItems( options: SearchOptions ): Promise<SearchResult[]> {\n\t\t\treturn this.$store.dispatch( 'searchItemValues', options );\n\t\t},\n\t\tupdateMenuItems( searchOptions: SearchOptions ): void {\n\t\t\tif ( this.debouncedUpdateMenuItems === null ) {\n\t\t\t\tthis.debouncedUpdateMenuItems = debounce(\n\t\t\t\t\tasync ( debouncedSearchOptions: SearchOptions ) => {\n\t\t\t\t\t\tthis.searchResults = await this.searchForItems( debouncedSearchOptions );\n\t\t\t\t\t},\n\t\t\t\t\t150,\n\t\t\t\t);\n\t\t\t}\n\t\t\tthis.debouncedUpdateMenuItems( searchOptions );\n\t\t},\n\t},\n\twatch: {\n\t\tdisabled( isDisabled: boolean ): void {\n\t\t\tif ( isDisabled ) {\n\t\t\t\tthis.search = '';\n\t\t\t\tthis.numberInputValue = '';\n\t\t\t}\n\t\t},\n\t\tsearch( newSearchString: string ): void {\n\t\t\tthis.onValueChange();\n\t\t\tthis.topItemIndex = 0;\n\t\t\tif ( !newSearchString ) {\n\t\t\t\tthis.searchResults = [];\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst searchOptions: SearchOptions = {\n\t\t\t\tsearch: newSearchString,\n\t\t\t\tlimit: NUMBER_OF_SEARCH_RESULTS,\n\t\t\t};\n\t\t\tthis.updateMenuItems( searchOptions );\n\t\t},\n\t\terror( error: QuantityError | null ): void {\n\t\t\tthis.quantityError = error;\n\t\t},\n\t},\n\tmounted() {\n\t\tif ( this.value?.unit?.id && !this.search ) {\n\t\t\tthis.search = this.value.unit.id;\n\t\t}\n\t},\n\tprops: {\n\t\tvalue: {\n\t\t\ttype: Object as PropType<QuantityValue | null>,\n\t\t\tdefault: null,\n\t\t},\n\t\terror: {\n\t\t\ttype: Object as PropType<QuantityError | null>,\n\t\t\tdefault: null,\n\t\t},\n\t\tdisabled: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tcomponents: {\n\t\tQuantityInput,\n\t\tInfoTooltip,\n\t},\n} );\n","export enum BasePropertyValueRelation {\n\tMatching = 'matching',\n\tNotMatching = 'without',\n\tRegardless = 'regardless-of-value',\n}\n\nexport enum RangePropertyValueRelation {\n\tLessThan = 'less-than',\n\tMoreThan = 'more-than',\n}\n\nconst PropertyValueRelation = {\n\t...BasePropertyValueRelation,\n\t...RangePropertyValueRelation,\n};\n\ntype PropertyValueRelation = BasePropertyValueRelation | RangePropertyValueRelation;\n\nexport default PropertyValueRelation;\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./QuantityValueInput.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./QuantityValueInput.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./QuantityValueInput.vue?vue&type=template&id=a2f292ec&\"\nimport script from \"./QuantityValueInput.vue?vue&type=script&lang=ts&\"\nexport * from \"./QuantityValueInput.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('DateInput',{attrs:{\"label\":_vm.$i18n('query-builder-date-input-value-label'),\"placeholder\":_vm.$i18n('query-builder-date-input-placeholder'),\"promptText\":_vm.$i18n('query-builder-date-input-prompt-text'),\"resultsIntroText\":_vm.$i18n('query-builder-date-input-results-intro-text'),\"calendarNotice\":_vm.$i18n('query-builder-date-input-calendar-notice-text'),\"error\":_vm.error ? {message: _vm.$i18n(_vm.error.message), type: _vm.error.type} : null,\"parsedValue\":(_vm.value && _vm.value.formattedValue) ? _vm.value.formattedValue : null,\"disabled\":_vm.disabled},on:{\"input\":function($event){return _vm.onInput( $event )}},scopedSlots:_vm._u([{key:\"suffix\",fn:function(){return [_c('InfoTooltip',{attrs:{\"position\":\"top-end\",\"message\":_vm.$i18n('query-builder-input-value-tooltip')}})]},proxy:true}]),model:{value:(_vm.rawInput),callback:function ($$v) {_vm.rawInput=$$v},expression:\"rawInput\"}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { DateInput } from '@wmde/wikit-vue-components';\nimport { DateValue } from '@/store/RootState';\nimport Vue, { PropType } from 'vue';\nimport InfoTooltip from '@/components/InfoTooltip.vue';\nimport debounce from 'lodash/debounce';\n\nexport default Vue.extend( {\n\tname: 'DateValueInput',\n\tdata() {\n\t\treturn {\n\t\t\trawInput: '',\n\t\t\tdebouncedDateValue: null as Function | null,\n\t\t};\n\t},\n\tmethods: {\n\t\tonInput( event: string ): void {\n\t\t\tif ( this.debouncedDateValue === null ) {\n\t\t\t\tthis.debouncedDateValue = debounce( async ( debouncedDateInput: string ) => {\n\t\t\t\t\tthis.$emit( 'input', debouncedDateInput );\n\t\t\t\t}, 150 );\n\t\t\t}\n\n\t\t\tthis.debouncedDateValue( event );\n\t\t},\n\t},\n\tmounted() {\n\t\tif ( this.value ) {\n\t\t\tthis.rawInput = this.value.formattedValue || '';\n\t\t}\n\t},\n\tprops: {\n\t\tvalue: {\n\t\t\ttype: Object as PropType<DateValue>,\n\t\t\tdefault: null,\n\t\t},\n\t\terror: {\n\t\t\ttype: Object,\n\t\t\tdefault: null,\n\t\t},\n\t\tdisabled: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\twatch: {\n\t\tdisabled( isDisabled: boolean ): void {\n\t\t\tif ( isDisabled ) {\n\t\t\t\tthis.rawInput = '';\n\t\t\t}\n\t\t},\n\t},\n\tcomponents: {\n\t\tDateInput,\n\t\tInfoTooltip,\n\t},\n} );\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DateValueInput.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DateValueInput.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./DateValueInput.vue?vue&type=template&id=1dd53084&\"\nimport script from \"./DateValueInput.vue?vue&type=script&lang=ts&\"\nexport * from \"./DateValueInput.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\nimport ItemValueLookup from '@/components/ItemValueLookup.vue';\nimport StringValueInput from '@/components/StringValueInput.vue';\nimport QuantityValueInput from '@/components/QuantityValueInput.vue';\nimport DateValueInput from '@/components/DateValueInput.vue';\n\nimport Vue from 'vue';\n\nexport default Vue.extend( {\n\tname: 'ValueInput',\n\tcomponents: {\n\t\tStringValueInput,\n\t\tItemValueLookup,\n\t\tQuantityValueInput,\n\t\tDateValueInput,\n\t},\n\tcomputed: {\n\t\tdispatchComponent(): string {\n\t\t\tswitch ( this.datatype ) {\n\t\t\t\tcase 'wikibase-item':\n\t\t\t\t\treturn 'ItemValueLookup';\n\t\t\t\tcase 'quantity':\n\t\t\t\t\treturn 'QuantityValueInput';\n\t\t\t\tcase 'time':\n\t\t\t\t\treturn 'DateValueInput';\n\t\t\t\tcase 'string':\n\t\t\t\tcase 'external-id':\n\t\t\t\tdefault:\n\t\t\t\t\treturn 'StringValueInput';\n\t\t\t}\n\t\t},\n\t},\n\tprops: {\n\t\tdatatype: {\n\t\t\trequired: true,\n\t\t},\n\t\tvalue: {\n\t\t\tdefault: null,\n\t\t},\n\t\terror: {\n\t\t\ttype: Object,\n\t\t\tdefault: null,\n\t\t},\n\t\tdisabled: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n} );\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ValueInput.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ValueInput.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./ValueInput.vue?vue&type=template&id=d68b8b42&\"\nimport script from \"./ValueInput.vue?vue&type=script&lang=ts&\"\nexport * from \"./ValueInput.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Button',{staticClass:\"delete-condition\",attrs:{\"iconOnly\":\"\",\"type\":\"neutral\",\"variant\":\"quiet\",\"aria-label\":_vm.$i18n('query-builder-delete-condition'),\"disabled\":_vm.disabled},nativeOn:{\"click\":function($event){return _vm.$emit('click')}}},[_c('Icon',{staticClass:\"delete-condition__icon\",attrs:{\"type\":\"trash\",\"size\":\"large\",\"color\":\"inherit\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Button, Icon } from '@wmde/wikit-vue-components';\nimport Vue from 'vue';\nexport default Vue.extend( {\n\tname: 'DeleteConditionButton',\n\tprops: {\n\t\tdisabled: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tcomponents: {\n\t\tButton,\n\t\tIcon,\n\t},\n} );\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DeleteConditionButton.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DeleteConditionButton.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./DeleteConditionButton.vue?vue&type=template&id=cff630ca&\"\nimport script from \"./DeleteConditionButton.vue?vue&type=script&lang=ts&\"\nexport * from \"./DeleteConditionButton.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./DeleteConditionButton.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('EntityLookup',{attrs:{\"value\":_vm.value,\"error\":_vm.error,\"searchForMenuItems\":_vm.searchForProperties,\"tooltip\":_vm.$i18n('query-builder-property-lookup-tooltip'),\"label\":_vm.$i18n('query-builder-property-lookup-label'),\"placeholder\":_vm.$i18n('query-builder-property-lookup-placeholder'),\"no-match-found-message\":_vm.$i18n('query-builder-property-lookup-no-match-found')},on:{\"input\":function($event){return _vm.$emit( 'input', $event )}}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport EntityLookup from '@/components/EntityLookup.vue';\nimport SearchOptions from '@/data-access/SearchOptions';\nimport SearchResult from '@/data-access/SearchResult';\nimport { MenuItem } from '@wmde/wikit-vue-components/dist/components/MenuItem';\nimport Vue, { PropType } from 'vue';\n\nexport default Vue.extend( {\n\tname: 'PropertyLookup',\n\tcomponents: {\n\t\tEntityLookup,\n\t},\n\tmethods: {\n\t\tsetTagForSearchResults( searchResults: SearchResult[] ): SearchResult[] {\n\t\t\treturn searchResults.map(\n\t\t\t\t( item: MenuItem & SearchResult ) => {\n\t\t\t\t\tif ( item.tag ) {\n\t\t\t\t\t\titem.tag = this.$i18n( item.tag );\n\t\t\t\t\t}\n\t\t\t\t\treturn item;\n\t\t\t\t},\n\t\t\t);\n\t\t},\n\t\tasync searchForProperties( options: SearchOptions ): Promise<SearchResult[]> {\n\t\t\treturn this.setTagForSearchResults(\n\t\t\t\tawait this.$store.dispatch( 'searchProperties', options ),\n\t\t\t);\n\t\t},\n\t},\n\tprops: {\n\t\tvalue: {\n\t\t\ttype: Object as PropType<MenuItem>,\n\t\t\tdefault: null,\n\t\t},\n\t\terror: {\n\t\t\ttype: Object,\n\t\t\tdefault: null,\n\t\t},\n\t},\n} );\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PropertyLookup.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PropertyLookup.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./PropertyLookup.vue?vue&type=template&id=26f4bba8&\"\nimport script from \"./PropertyLookup.vue?vue&type=script&lang=ts&\"\nexport * from \"./PropertyLookup.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"querybuilder-dropdown\"},[_c('Dropdown',{staticClass:\"querybuilder-dropdown__select\",attrs:{\"value\":_vm.selected,\"label\":\"Value Type\",\"menuItems\":_vm.optionItems,\"disabled\":_vm.disabled},on:{\"input\":_vm.onInput}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","enum ReferenceRelation {\n\t// these values also used as part of message keys and\n\t// so any changes made to this enum have to also be reflected in en.json and qqq.json\n\tWith = 'with',\n\tWithout = 'without',\n\tRegardless = 'regardless',\n}\n\nexport default ReferenceRelation;\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue, { PropType } from 'vue';\nimport PropertyValueRelation, {\n\tBasePropertyValueRelation,\n\tRangePropertyValueRelation,\n} from '@/data-model/PropertyValueRelation';\nimport { MenuItem } from '@wmde/wikit-vue-components/dist/components/MenuItem';\nimport { Dropdown } from '@wmde/wikit-vue-components';\n\ninterface PropertyValueRelationMenuItem extends MenuItem {\n\tvalue: PropertyValueRelation;\n}\n\nexport default Vue.extend( {\n\tname: 'ValueTypeDropDown',\n\tprops: {\n\t\tvalue: {\n\t\t\ttype: String as PropType<PropertyValueRelation>,\n\t\t\trequired: true,\n\t\t},\n\t\tdatatype: {\n\t\t\ttype: String,\n\t\t\tdefault: null,\n\t\t},\n\t\tdisabled: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tmethods: {\n\t\tonInput( event: PropertyValueRelationMenuItem ): void {\n\t\t\tthis.$emit( 'input', event.value );\n\t\t},\n\t},\n\tcomputed: {\n\t\toptionItems(): PropertyValueRelationMenuItem[] {\n\t\t\tconst relationOptions: PropertyValueRelationMenuItem[] = Object.values( BasePropertyValueRelation ).map(\n\t\t\t\t( value: BasePropertyValueRelation ) => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t/*\n\t\t\t\t\t\t* Values that can be used here:\n\t\t\t\t\t\t* query-builder-value-type-relation-dropdown-matching\n\t\t\t\t\t\t* query-builder-value-type-relation-dropdown-without\n\t\t\t\t\t\t* query-builder-value-type-relation-dropdown-regardless-of-value\n\t\t\t\t\t\t*/\n\t\t\t\t\t\tlabel: this.$i18n( `query-builder-value-type-relation-dropdown-${value}` ),\n\t\t\t\t\t\tdescription: '',\n\t\t\t\t\t\tvalue,\n\t\t\t\t\t};\n\t\t\t\t},\n\t\t\t);\n\n\t\t\tif ( this.datatype === 'quantity' ) {\n\t\t\t\trelationOptions.push( ...Object.values( RangePropertyValueRelation ).map(\n\t\t\t\t\t( value: RangePropertyValueRelation ) => {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t/*\n\t\t\t\t\t\t\t* Values that can be used here:\n\t\t\t\t\t\t\t* query-builder-value-type-relation-dropdown-less-than-quantity\n\t\t\t\t\t\t\t* query-builder-value-type-relation-dropdown-more-than-quantity\n\t\t\t\t\t\t\t*/\n\t\t\t\t\t\t\tlabel: this.$i18n( `query-builder-value-type-relation-dropdown-${value}-quantity` ),\n\t\t\t\t\t\t\tdescription: '',\n\t\t\t\t\t\t\tvalue,\n\t\t\t\t\t\t};\n\t\t\t\t\t},\n\t\t\t\t) );\n\t\t\t}\n\n\t\t\tif ( this.datatype === 'time' ) {\n\t\t\t\trelationOptions.push( ...Object.values( RangePropertyValueRelation ).map(\n\t\t\t\t\t( value: RangePropertyValueRelation ) => {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t/*\n\t\t\t\t\t\t\t* Values that can be used here:\n\t\t\t\t\t\t\t* query-builder-value-type-relation-dropdown-less-than-date\n\t\t\t\t\t\t\t* query-builder-value-type-relation-dropdown-more-than-date\n\t\t\t\t\t\t\t*/\n\t\t\t\t\t\t\tlabel: this.$i18n( `query-builder-value-type-relation-dropdown-${value}-date` ),\n\t\t\t\t\t\t\tdescription: '',\n\t\t\t\t\t\t\tvalue,\n\t\t\t\t\t\t};\n\t\t\t\t\t},\n\t\t\t\t) );\n\t\t\t}\n\n\t\t\treturn relationOptions;\n\t\t},\n\t\tselected(): PropertyValueRelationMenuItem | null {\n\t\t\treturn this.optionItems.find(\n\t\t\t\t( option: PropertyValueRelationMenuItem ) => option.value === this.value,\n\t\t\t) || null;\n\t\t},\n\t},\n\tcomponents: {\n\t\tDropdown,\n\t},\n} );\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ValueTypeDropDown.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ValueTypeDropDown.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./ValueTypeDropDown.vue?vue&type=template&id=2d6647b8&\"\nimport script from \"./ValueTypeDropDown.vue?vue&type=script&lang=ts&\"\nexport * from \"./ValueTypeDropDown.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./ValueTypeDropDown.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"querybuilder-include-subclasses\"},[_c('Checkbox',{staticClass:\"querybuilder-include-subclasses__checkbox\",attrs:{\"id\":_vm.id,\"checked\":_vm.isChecked,\"disabled\":_vm.disabled,\"label\":_vm.$i18n('query-builder-include-subclasses' )},on:{\"update:checked\":function($event){return _vm.$emit( 'subclass-check', $event )}},scopedSlots:_vm._u([{key:\"suffix\",fn:function(){return [_c('InfoTooltip',{attrs:{\"position\":\"end\",\"message\":_vm.$i18n('query-builder-include-subclasses-tooltip')}})]},proxy:true}])})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from 'vue';\nimport { Checkbox } from '@wmde/wikit-vue-components';\nimport InfoTooltip from '@/components/InfoTooltip.vue';\nexport default Vue.extend( {\n\tname: 'SubclassCheckbox',\n\tdata() {\n\t\treturn {\n\t\t\tid: `include-subclasses-${Math.random()}`,\n\t\t};\n\t},\n\tprops: {\n\t\tisChecked: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\tdisabled: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tcomponents: {\n\t\tCheckbox,\n\t\tInfoTooltip,\n\t},\n} );\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SubclassCheckbox.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SubclassCheckbox.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./SubclassCheckbox.vue?vue&type=template&id=6d60b032&\"\nimport script from \"./SubclassCheckbox.vue?vue&type=script&lang=ts&\"\nexport * from \"./SubclassCheckbox.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./SubclassCheckbox.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"query-condition-references\"},[_c('Dropdown',{staticClass:\"query-condition-references__select\",attrs:{\"value\":_vm.selected,\"label\":_vm.$i18n('query-builder-reference-relation-label'),\"menuItems\":_vm.optionItems,\"disabled\":_vm.disabled},on:{\"input\":_vm.onInput},scopedSlots:_vm._u([{key:\"suffix\",fn:function(){return [_c('InfoTooltip',{attrs:{\"position\":\"top\",\"message\":_vm.$i18n('query-builder-reference-relation-tooltip')}})]},proxy:true}])})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import PropertyValueRelation from '@/data-model/PropertyValueRelation';\nimport ReferenceRelation from '@/data-model/ReferenceRelation';\nimport TimeValue from '@/data-model/TimeValue';\nimport { Condition, ConditionValue } from '@/sparql/QueryRepresentation';\nimport rdfNamespaces from '@/sparql/rdfNamespaces';\nimport SyntaxBuilder from '@/sparql/SyntaxBuilder';\nimport TripleBuilder from '@/sparql/TripleBuilder';\nimport ValuePatternBuilder from '@/sparql/ValuePatternBuilder';\nimport * as RdfJs from 'rdf-js';\nimport { BindPattern, FilterPattern, Pattern, VariableTerm } from 'sparqljs';\n\nenum Precision {\n\tDAY= 11,\n\tMONTH = 10,\n\tYEAR = 9,\n}\n\nexport default class DateValuePatternBuilder implements ValuePatternBuilder {\n\n\tprivate readonly tripleBuilder: TripleBuilder;\n\tprivate readonly syntaxBuilder: SyntaxBuilder;\n\tprivate conditionIndex: number | null = null;\n\n\tpublic constructor() {\n\t\tthis.tripleBuilder = new TripleBuilder();\n\t\tthis.syntaxBuilder = new SyntaxBuilder();\n\t}\n\n\tpublic buildValuePatternFromCondition( condition: Condition, conditionIndex: number ): Pattern[] {\n\t\tconst {\n\t\t\tpropertyId,\n\t\t\treferenceRelation,\n\t\t\tpropertyValueRelation,\n\t\t\tvalue,\n\t\t\tnegate,\n\t\t} = condition;\n\t\tthis.conditionIndex = conditionIndex;\n\n\t\tlet patterns: Pattern[];\n\n\t\tif ( propertyValueRelation === PropertyValueRelation.Regardless ) {\n\t\t\tpatterns = this.buildRegardlessOfValuePattern( propertyId );\n\t\t} else {\n\t\t\tpatterns = this.buildValuePattern( propertyId, value, propertyValueRelation );\n\t\t}\n\n\t\tpatterns = this.addReferenceFilterPatternIfNeeded( patterns, referenceRelation );\n\t\tpatterns = this.negatePatternsIfNeeded( patterns, negate );\n\n\t\treturn patterns;\n\t}\n\n\tprivate buildValuePattern(\n\t\tpropertyId: string,\n\t\tvalue: ConditionValue,\n\t\tpropertyValueRelation: PropertyValueRelation,\n\t): Pattern[] {\n\t\tif ( !this.isDateValue( value ) ) {\n\t\t\tthrow new Error( 'Unexpected value for date: ' + JSON.stringify( value ) );\n\t\t}\n\n\t\tlet patterns: Pattern[];\n\n\t\tif ( value.precision === Precision.DAY ) {\n\t\t\tpatterns = this.buildDayPrecisionPatterns( propertyId, value, propertyValueRelation );\n\t\t} else {\n\t\t\tpatterns = this.buildLowPrecisionPatterns( propertyId, value, propertyValueRelation );\n\t\t}\n\n\t\treturn patterns;\n\t}\n\n\tprivate buildRegardlessOfValuePattern(\n\t\tpropertyId: string,\n\t): Pattern[] {\n\t\tlet patterns: Pattern[] = [];\n\n\t\tpatterns = this.addEntityToStatementPattern( patterns, propertyId );\n\t\tpatterns = this.addStatementToStatementValuePattern( patterns, propertyId );\n\t\tpatterns = this.addStatementValueToTimeValuePattern( patterns, propertyId );\n\n\t\treturn patterns;\n\t}\n\n\tprivate buildDayPrecisionPatterns(\n\t\tpropertyId: string,\n\t\tvalue: TimeValue,\n\t\tpropertyValueRelation: PropertyValueRelation,\n\t): Pattern[] {\n\t\tlet patterns: Pattern[] = [];\n\n\t\tpatterns = this.addEntityToStatementPattern( patterns, propertyId );\n\t\tpatterns = this.addStatementToStatementValuePattern( patterns, propertyId );\n\n\t\tpatterns = this.addStatementValueToPrecisionPattern( patterns );\n\t\tpatterns = this.addPrecisionFilterPattern( patterns, value );\n\n\t\tpatterns = this.addStatementValueToTimeValuePattern( patterns, propertyId );\n\n\t\tconst datetimeVariable = this.getConditionVariable( propertyId );\n\t\tif ( propertyValueRelation === PropertyValueRelation.Matching ) {\n\t\t\tconst matchingDateBind: BindPattern = {\n\t\t\t\ttype: 'bind',\n\t\t\t\tvariable: datetimeVariable,\n\t\t\t\texpression: this.syntaxBuilder.buildLiteralTermForDateTime( value.value ),\n\t\t\t};\n\t\t\tpatterns.push( matchingDateBind );\n\t\t}\n\t\tif ( propertyValueRelation === PropertyValueRelation.NotMatching ) {\n\t\t\tconst notMatchingFilter = this.syntaxBuilder.buildOperatorFilterPattern(\n\t\t\t\tdatetimeVariable,\n\t\t\t\t'!=',\n\t\t\t\tthis.syntaxBuilder.buildLiteralTermForDateTime( value.value ),\n\t\t\t);\n\t\t\tpatterns.push( notMatchingFilter );\n\t\t}\n\n\t\tif ( propertyValueRelation === PropertyValueRelation.LessThan ) {\n\t\t\tconst beforeFilter = this.syntaxBuilder.buildOperatorFilterPattern(\n\t\t\t\tdatetimeVariable,\n\t\t\t\t'<',\n\t\t\t\tthis.syntaxBuilder.buildLiteralTermForDateTime( value.value ),\n\t\t\t);\n\t\t\tpatterns.push( beforeFilter );\n\t\t}\n\n\t\tif ( propertyValueRelation === PropertyValueRelation.MoreThan ) {\n\t\t\tconst afterFilter = this.syntaxBuilder.buildOperatorFilterPattern(\n\t\t\t\tdatetimeVariable,\n\t\t\t\t'>',\n\t\t\t\tthis.syntaxBuilder.buildLiteralTermForDateTime( value.value ),\n\t\t\t);\n\t\t\tpatterns.push( afterFilter );\n\t\t}\n\n\t\treturn patterns;\n\t}\n\n\tprivate buildLowPrecisionPatterns(\n\t\tpropertyId: string,\n\t\tvalue: TimeValue,\n\t\tpropertyValueRelation: PropertyValueRelation,\n\t): Pattern[] {\n\t\tlet patterns: Pattern[] = [];\n\n\t\tpatterns = this.addEntityToStatementPattern( patterns, propertyId );\n\t\tpatterns = this.addStatementToStatementValuePattern( patterns, propertyId );\n\n\t\tpatterns = this.addStatementValueToPrecisionPattern( patterns );\n\t\tpatterns = this.addRangeSafeHintPattern( patterns );\n\t\tpatterns = this.addPrecisionFilterPattern( patterns, value );\n\n\t\tpatterns = this.addStatementValueToTimeValuePattern( patterns, propertyId );\n\t\tpatterns = this.addRangeSafeHintPattern( patterns );\n\t\tpatterns = this.addDateTimeFilterPattern( patterns, value, propertyId, propertyValueRelation );\n\n\t\treturn patterns;\n\t}\n\n\tprivate addDateTimeFilterPattern(\n\t\tpatterns: Pattern[],\n\t\tvalue: TimeValue,\n\t\tpropertyId: string,\n\t\tpropertyValueRelation: PropertyValueRelation,\n\t): Pattern[] {\n\t\tconst dateTimeFilterPattern = this.buildDateTimeFilterPattern( value, propertyId, propertyValueRelation );\n\t\tpatterns.push( dateTimeFilterPattern );\n\t\treturn patterns;\n\t}\n\n\tprivate buildDateTimeFilterPattern(\n\t\tvalue: TimeValue,\n\t\tpropertyId: string,\n\t\tpropertyValueRelation: PropertyValueRelation,\n\t): FilterPattern {\n\t\tlet followingDateTime;\n\t\tswitch ( value.precision ) {\n\t\t\tcase Precision.MONTH:\n\t\t\t\tfollowingDateTime = this.calculateFollowingMonthDateTime( value.value );\n\t\t\t\tbreak;\n\t\t\tcase Precision.YEAR:\n\t\t\t\tfollowingDateTime = this.calculateFollowingYearDateTime( value.value );\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthrow new Error( 'Unexpected precision value: ' + value.precision );\n\t\t}\n\t\tconst dateTimeVariable = this.getConditionVariable( propertyId );\n\n\t\tif ( propertyValueRelation === PropertyValueRelation.Matching ) {\n\t\t\treturn this.syntaxBuilder.buildOperatorFilterPattern(\n\t\t\t\tthis.syntaxBuilder.buildOperationsExpression(\n\t\t\t\t\tthis.syntaxBuilder.buildLiteralTermForDateTime( value.value ),\n\t\t\t\t\t'<=',\n\t\t\t\t\tdateTimeVariable,\n\t\t\t\t),\n\t\t\t\t'&&',\n\t\t\t\tthis.syntaxBuilder.buildOperationsExpression(\n\t\t\t\t\tdateTimeVariable,\n\t\t\t\t\t'<',\n\t\t\t\t\tthis.syntaxBuilder.buildLiteralTermForDateTime( followingDateTime ),\n\t\t\t\t),\n\t\t\t);\n\t\t}\n\t\tif ( propertyValueRelation === PropertyValueRelation.NotMatching ) {\n\t\t\treturn this.syntaxBuilder.buildOperatorFilterPattern(\n\t\t\t\tthis.syntaxBuilder.buildOperationsExpression(\n\t\t\t\t\tthis.syntaxBuilder.buildLiteralTermForDateTime( value.value ),\n\t\t\t\t\t'<',\n\t\t\t\t\tdateTimeVariable,\n\t\t\t\t),\n\t\t\t\t'||',\n\t\t\t\tthis.syntaxBuilder.buildOperationsExpression(\n\t\t\t\t\tdateTimeVariable,\n\t\t\t\t\t'>=',\n\t\t\t\t\tthis.syntaxBuilder.buildLiteralTermForDateTime( followingDateTime ),\n\t\t\t\t),\n\t\t\t);\n\t\t}\n\n\t\tif ( propertyValueRelation === PropertyValueRelation.LessThan ) {\n\t\t\treturn this.syntaxBuilder.buildOperatorFilterPattern(\n\t\t\t\tdateTimeVariable,\n\t\t\t\t'<',\n\t\t\t\tthis.syntaxBuilder.buildLiteralTermForDateTime( value.value ),\n\t\t\t);\n\t\t}\n\n\t\tif ( propertyValueRelation === PropertyValueRelation.MoreThan ) {\n\t\t\treturn this.syntaxBuilder.buildOperatorFilterPattern(\n\t\t\t\tdateTimeVariable,\n\t\t\t\t'>=',\n\t\t\t\tthis.syntaxBuilder.buildLiteralTermForDateTime( followingDateTime ),\n\t\t\t);\n\t\t}\n\n\t\tthrow new Error( 'Unexpected property value relation: ' + propertyValueRelation );\n\t}\n\n\tprivate calculateFollowingYearDateTime( originalDateTime: string ): string {\n\t\tconst match = originalDateTime.match( /^(?<sign>[+-])(?<year>\\d+)/ );\n\t\tif ( match === null || !match.groups ) {\n\t\t\tthrow new Error( 'date string not in expected format: ' + originalDateTime );\n\t\t}\n\t\tconst {\n\t\t\tyear: originalYear,\n\t\t\tsign: originalSign,\n\t\t} = match.groups;\n\t\tconst followingYear = originalSign === '+' ?\n\t\t\t( Number( originalYear ) + 1 ).toString() :\n\t\t\t( Number( originalYear ) - 1 ).toString();\n\n\t\treturn `${originalSign}${followingYear}-00-00T00:00:00Z`;\n\t}\n\n\tprivate calculateFollowingMonthDateTime( originalDateTime: string ): string {\n\t\tconst match = originalDateTime.match( /^(?<sign>[+-])(?<year>\\d+)-(?<month>\\d{2})/ );\n\t\tif ( match === null || !match.groups ) {\n\t\t\tthrow new Error( 'date string not in expected format: ' + originalDateTime );\n\t\t}\n\t\tconst {\n\t\t\tyear: originalYear,\n\t\t\tmonth: originalMonth,\n\t\t\tsign: originalSign,\n\t\t} = match.groups;\n\t\tlet followingMonth;\n\t\tlet followingYear;\n\t\tif ( originalMonth !== '12' ) {\n\t\t\tfollowingMonth = ( Number( originalMonth ) + 1 ).toString().padStart( 2, '0' );\n\t\t\tfollowingYear = originalYear;\n\t\t} else {\n\t\t\tfollowingMonth = '01';\n\t\t\tfollowingYear = originalSign === '+' ?\n\t\t\t\t( Number( originalYear ) + 1 ).toString() :\n\t\t\t\t( Number( originalYear ) - 1 ).toString();\n\t\t}\n\n\t\treturn `${originalSign}${followingYear}-${followingMonth}-00T00:00:00Z`;\n\t}\n\n\tprivate addEntityToStatementPattern( patterns: Pattern[], propertyId: string ): Pattern[] {\n\t\tconst statementVariable = this.getConditionVariable( 'statement' );\n\t\tconst entityToStatementTriple = this.syntaxBuilder.buildSimpleTriple(\n\t\t\t{ termType: 'Variable', value: 'item' },\n\t\t\trdfNamespaces.p + propertyId,\n\t\t\tstatementVariable,\n\t\t);\n\t\tpatterns.push( this.syntaxBuilder.buildBgpPattern( [\n\t\t\tentityToStatementTriple,\n\t\t] ) );\n\t\treturn patterns;\n\t}\n\n\tprivate addStatementToStatementValuePattern( patterns: Pattern[], propertyId: string ): Pattern[] {\n\t\tconst statementVariable = this.getConditionVariable( 'statement' );\n\t\tconst statementValueVariable = this.getConditionVariable( 'statementValue' );\n\t\tconst statementToStatementValueTriple = this.syntaxBuilder.buildSimpleTriple(\n\t\t\tstatementVariable,\n\t\t\trdfNamespaces.psv + propertyId,\n\t\t\tstatementValueVariable,\n\t\t);\n\t\tpatterns.push( this.syntaxBuilder.buildBgpPattern( [\n\t\t\tstatementToStatementValueTriple,\n\t\t] ) );\n\t\treturn patterns;\n\t}\n\n\tprivate addStatementValueToTimeValuePattern( patterns: Pattern[], propertyId: string ): Pattern[] {\n\t\tconst statementValueVariable = this.getConditionVariable( 'statementValue' );\n\t\tconst datetimeVariable = this.getConditionVariable( propertyId );\n\t\tconst statementToValueTriple = this.syntaxBuilder.buildSimpleTriple(\n\t\t\tstatementValueVariable,\n\t\t\trdfNamespaces.wikibase + 'timeValue',\n\t\t\tdatetimeVariable,\n\t\t);\n\t\tpatterns.push( this.syntaxBuilder.buildBgpPattern( [\n\t\t\tstatementToValueTriple,\n\t\t] ) );\n\t\treturn patterns;\n\t}\n\n\tprivate addStatementValueToPrecisionPattern( patterns: Pattern[] ): Pattern[] {\n\t\tconst statementValueVariable = this.getConditionVariable( 'statementValue' );\n\t\tconst precisionVariable = this.getConditionVariable( 'precision' );\n\t\tconst statementValueToPrecisionTriple = this.syntaxBuilder.buildSimpleTriple(\n\t\t\tstatementValueVariable,\n\t\t\trdfNamespaces.wikibase + 'timePrecision',\n\t\t\tprecisionVariable,\n\t\t);\n\t\tconst precisionPattern = this.syntaxBuilder.buildBgpPattern( [\n\t\t\tstatementValueToPrecisionTriple,\n\t\t] );\n\t\tpatterns.push( precisionPattern );\n\n\t\treturn patterns;\n\t}\n\n\tprivate addRangeSafeHintPattern( patterns: Pattern[] ): Pattern[] {\n\t\tconst hintRangeSafeTriple = this.syntaxBuilder.buildSimpleTriple(\n\t\t\t{\n\t\t\t\ttermType: 'NamedNode',\n\t\t\t\tvalue: rdfNamespaces.hint + 'Prior',\n\t\t\t},\n\t\t\trdfNamespaces.hint + 'rangeSafe',\n\t\t\t{\n\t\t\t\ttermType: 'Literal',\n\t\t\t\tvalue: 'true',\n\t\t\t\tdatatype: {\n\t\t\t\t\ttermType: 'NamedNode',\n\t\t\t\t\tvalue: rdfNamespaces.xsd + 'boolean',\n\t\t\t\t} as RdfJs.NamedNode,\n\t\t\t},\n\t\t);\n\t\tconst hintPattern = this.syntaxBuilder.buildBgpPattern( [\n\t\t\thintRangeSafeTriple,\n\t\t] );\n\t\tpatterns.push( hintPattern );\n\n\t\treturn patterns;\n\t}\n\n\tprivate addPrecisionFilterPattern( patterns: Pattern[], value: TimeValue ): Pattern[] {\n\t\tconst precisionVariable = this.getConditionVariable( 'precision' );\n\t\tconst precisionFilterPattern = this.syntaxBuilder.buildOperatorFilterPattern(\n\t\t\tprecisionVariable,\n\t\t\t'>=',\n\t\t\t{\n\t\t\t\ttermType: 'Literal',\n\t\t\t\tvalue: String( value.precision ),\n\t\t\t\tdatatype: {\n\t\t\t\t\ttermType: 'NamedNode',\n\t\t\t\t\tvalue: 'http://www.w3.org/2001/XMLSchema#integer',\n\t\t\t\t} as RdfJs.NamedNode,\n\t\t\t},\n\t\t);\n\t\tpatterns.push( precisionFilterPattern );\n\t\treturn patterns;\n\t}\n\n\tprivate addReferenceFilterPatternIfNeeded( patterns: Pattern[], referenceRelation: ReferenceRelation ): Pattern[] {\n\t\tconst referenceFilterPattern = this.tripleBuilder.buildReferenceFilterPattern(\n\t\t\treferenceRelation,\n\t\t\tthis.getConditionVariable( 'statement' ),\n\t\t);\n\t\tif ( referenceFilterPattern !== null ) {\n\t\t\tpatterns.push( referenceFilterPattern );\n\t\t\tpatterns = [ { type: 'group', patterns } ];\n\t\t}\n\n\t\treturn patterns;\n\t}\n\n\tprivate negatePatternsIfNeeded( patterns: Pattern[], negate: boolean ): Pattern[] {\n\t\tif ( negate ) {\n\t\t\treturn [ {\n\t\t\t\ttype: 'minus',\n\t\t\t\tpatterns: patterns,\n\t\t\t} ];\n\t\t}\n\n\t\treturn patterns;\n\t}\n\n\tprivate getConditionVariable( prefix: string ): VariableTerm {\n\t\tif ( this.conditionIndex === null ) {\n\t\t\tthrow new Error( 'initializing condition index failed!' );\n\t\t}\n\t\treturn this.syntaxBuilder.buildVariableTermFromName( `${prefix}_${this.conditionIndex}` );\n\t}\n\n\tprivate isDateValue( value: ConditionValue ): value is TimeValue {\n\t\treturn typeof value === 'object' &&\n\t\t\ttypeof ( value as TimeValue ).value === 'string' && typeof ( value as TimeValue ).precision === 'number';\n\t}\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue, { PropType } from 'vue';\nimport ReferenceRelation from '@/data-model/ReferenceRelation';\nimport { MenuItem } from '@wmde/wikit-vue-components/dist/components/MenuItem';\nimport { Dropdown } from '@wmde/wikit-vue-components';\nimport InfoTooltip from '@/components/InfoTooltip.vue';\n\ninterface ReferenceRelationMenuItem extends MenuItem {\n\tvalue: ReferenceRelation;\n}\n\nexport default Vue.extend( {\n\tname: 'ReferenceRelationDropDown',\n\tprops: {\n\t\tvalue: {\n\t\t\ttype: String as PropType<ReferenceRelation>,\n\t\t\trequired: true,\n\t\t},\n\t\tdisabled: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tmethods: {\n\t\tonInput( event: ReferenceRelationMenuItem ): void {\n\t\t\tthis.$emit( 'input', event.value );\n\t\t},\n\t},\n\tcomputed: {\n\t\toptionItems(): ReferenceRelationMenuItem[] {\n\t\t\treturn Object.values( ReferenceRelation ).map( ( value: ReferenceRelation ) => {\n\t\t\t\treturn {\n\t\t\t\t\t/*\n          * Values that can be used here:\n          * query-builder-reference-relation-dropdown-with\n          * query-builder-reference-relation-dropdown-without\n          * query-builder-reference-relation-dropdown-regardless-of-value\n          */\n\t\t\t\t\tlabel: this.$i18n( `query-builder-reference-relation-dropdown-${value}` ),\n\t\t\t\t\tdescription: '',\n\t\t\t\t\tvalue,\n\t\t\t\t};\n\t\t\t} );\n\t\t},\n\t\tselected(): ReferenceRelationMenuItem | null {\n\t\t\treturn this.optionItems.find(\n\t\t\t\t( option: ReferenceRelationMenuItem ) => option.value === this.value,\n\t\t\t) || null;\n\t\t},\n\t},\n\tcomponents: {\n\t\tDropdown,\n\t\tInfoTooltip,\n\t},\n} );\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ReferenceRelationDropDown.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ReferenceRelationDropDown.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./ReferenceRelationDropDown.vue?vue&type=template&id=1916f9cf&\"\nimport script from \"./ReferenceRelationDropDown.vue?vue&type=script&lang=ts&\"\nexport * from \"./ReferenceRelationDropDown.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ToggleButtonGroup',{staticClass:\"negationToggle\",attrs:{\"value\":_vm.value},on:{\"input\":function($event){return _vm.$emit('input', $event)}},scopedSlots:_vm._u([{key:\"default\",fn:function(){return [_c('ToggleButton',{attrs:{\"value\":\"with\"}},[_vm._v(\" \"+_vm._s(_vm.$i18n( 'query-builder-negation-option-label-with' ))+\" \")]),_c('ToggleButton',{attrs:{\"value\":\"without\"}},[_vm._v(\" \"+_vm._s(_vm.$i18n( 'query-builder-negation-option-label-without' ))+\" \")])]},proxy:true}])})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { ToggleButton, ToggleButtonGroup } from '@wmde/wikit-vue-components';\nimport Vue from 'vue';\n\nexport default Vue.extend( {\n\tname: 'NegationToggle',\n\tcomponents: { ToggleButton, ToggleButtonGroup },\n\tprops: {\n\t\tvalue: {\n\t\t\ttype: String,\n\t\t\tdefault: 'with',\n\t\t},\n\t},\n} );\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NegationToggle.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NegationToggle.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./NegationToggle.vue?vue&type=template&id=68fdab44&\"\nimport script from \"./NegationToggle.vue?vue&type=script&lang=ts&\"\nexport * from \"./NegationToggle.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Value } from '@/store/RootState';\nimport Vue from 'vue';\n\nimport ValueInput from '@/components/ValueInput.vue';\nimport DeleteConditionButton from '@/components/DeleteConditionButton.vue';\nimport PropertyLookup from '@/components/PropertyLookup.vue';\nimport ValueTypeDropDown from '@/components/ValueTypeDropDown.vue';\nimport SubclassCheckbox from '@/components/SubclassCheckbox.vue';\nimport SearchResult from '@/data-access/SearchResult';\nimport PropertyValueRelation from '@/data-model/PropertyValueRelation';\nimport ReferenceRelationDropDown from '@/components/ReferenceRelationDropDown.vue';\nimport Error from '@/data-model/Error';\nimport { mapGetters } from 'vuex';\nimport NegationToggle from '@/components/NegationToggle.vue';\nimport ReferenceRelation from '@/data-model/ReferenceRelation';\n\nexport default Vue.extend( {\n\tname: 'QueryCondition',\n\tprops: {\n\t\tconditionIndex: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tmethods: {\n\t\tisValueInputDisabled(): boolean {\n\t\t\treturn this.selectedPropertyValueRelation === PropertyValueRelation.Regardless;\n\t\t},\n\t\tremoveCondition(): void {\n\t\t\tthis.$store.dispatch( 'removeCondition', this.conditionIndex );\n\t\t},\n\t\tsetSubclasses( subclasses: boolean ): void {\n\t\t\tthis.$store.dispatch( 'setSubclasses', { subclasses, conditionIndex: this.conditionIndex } );\n\t\t},\n\t},\n\tcomputed: {\n\t\tdatatype(): string | null {\n\t\t\treturn this.$store.getters.datatype( this.conditionIndex );\n\t\t},\n\t\tselectedProperty: {\n\t\t\tget(): SearchResult | null {\n\t\t\t\treturn this.$store.getters.property( this.conditionIndex );\n\t\t\t},\n\t\t\tset( selectedProperty: SearchResult | null ): void {\n\t\t\t\tif ( selectedProperty === null ) {\n\t\t\t\t\tthis.$store.dispatch( 'unsetProperty', this.conditionIndex );\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif ( selectedProperty.datatype === 'wikibase-item' ) {\n\t\t\t\t\tthis.$store.dispatch( 'setSubclasses', { conditionIndex: this.conditionIndex, subclasses: true } );\n\t\t\t\t} else {\n\t\t\t\t\tthis.$store.dispatch( 'setSubclasses', { conditionIndex: this.conditionIndex, subclasses: false } );\n\t\t\t\t}\n\t\t\t\tif ( selectedProperty.datatype !== this.$store.getters.datatype( this.conditionIndex )\n\t\t\t\t) {\n\t\t\t\t\tthis.selectedPropertyValueRelation = PropertyValueRelation.Matching;\n\t\t\t\t}\n\t\t\t\tthis.$store.dispatch( 'updateProperty',\n\t\t\t\t\t{ property: selectedProperty, conditionIndex: this.conditionIndex },\n\t\t\t\t);\n\t\t\t},\n\t\t},\n\t\tisSubclassCheckboxVisible(): boolean {\n\t\t\treturn this.$store.getters.datatype( this.conditionIndex ) === 'wikibase-item';\n\t\t},\n\t\tselectedPropertyValueRelation: {\n\t\t\tget(): PropertyValueRelation {\n\t\t\t\treturn this.$store.getters.propertyValueRelation( this.conditionIndex );\n\t\t\t},\n\t\t\tset( selectedPropertyValueRelation: PropertyValueRelation ): void {\n\t\t\t\tif ( selectedPropertyValueRelation === PropertyValueRelation.Regardless ) {\n\t\t\t\t\tthis.conditionValue = null;\n\t\t\t\t}\n\n\t\t\t\tthis.$store.dispatch(\n\t\t\t\t\t'updatePropertyValueRelation',\n\t\t\t\t\t{ propertyValueRelation: selectedPropertyValueRelation, conditionIndex: this.conditionIndex },\n\t\t\t\t);\n\t\t\t},\n\t\t},\n\t\tselectedReferenceRelation: {\n\t\t\tget(): ReferenceRelation {\n\t\t\t\treturn this.$store.getters.referenceRelation( this.conditionIndex );\n\t\t\t},\n\t\t\tset( selectedReferenceRelation: ReferenceRelation ): void {\n\t\t\t\tthis.$store.dispatch(\n\t\t\t\t\t'setReferenceRelation',\n\t\t\t\t\t{ referenceRelation: selectedReferenceRelation, conditionIndex: this.conditionIndex },\n\t\t\t\t);\n\t\t\t},\n\t\t},\n\t\tconditionValue: {\n\t\t\tget(): Value {\n\t\t\t\treturn this.$store.getters.value( this.conditionIndex );\n\t\t\t},\n\t\t\tset( value: Value ): void {\n\t\t\t\tthis.$store.dispatch( 'updateValue', { value, conditionIndex: this.conditionIndex } );\n\t\t\t},\n\t\t},\n\t\tnegateValue: {\n\t\t\tget(): string {\n\t\t\t\tconst negate = this.$store.getters.negate( this.conditionIndex );\n\t\t\t\treturn negate === true ? 'without' : 'with';\n\t\t\t},\n\t\t\tset( value: string ): void {\n\t\t\t\tif ( value !== 'with' && value !== 'without' ) {\n\t\t\t\t\tthrow new Error( 'Unknown negate value: ' + value );\n\t\t\t\t}\n\t\t\t\tconst valueBoolean = value === 'without';\n\t\t\t\tthis.$store.dispatch( 'setNegate', { value: valueBoolean, conditionIndex: this.conditionIndex } );\n\t\t\t},\n\t\t},\n\t\tvalueError(): Error | null {\n\t\t\tconst valueError = this.$store.getters.valueError( this.conditionIndex );\n\t\t\tif ( valueError === null ) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\treturn {\n\t\t\t\t...valueError,\n\t\t\t\tmessage: this.$i18n( valueError.message ),\n\t\t\t};\n\t\t},\n\t\t...mapGetters( [\n\t\t\t'propertyError',\n\t\t\t'limitedSupport',\n\t\t\t'subclasses',\n\t\t] ),\n\t},\n\tcomponents: {\n\t\tValueInput,\n\t\tPropertyLookup,\n\t\tReferenceRelationDropDown,\n\t\tValueTypeDropDown,\n\t\tDeleteConditionButton,\n\t\tNegationToggle,\n\t\tSubclassCheckbox,\n\t},\n} );\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./QueryCondition.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./QueryCondition.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./QueryCondition.vue?vue&type=template&id=134d60f2&scoped=true&\"\nimport script from \"./QueryCondition.vue?vue&type=script&lang=ts&\"\nexport * from \"./QueryCondition.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./QueryCondition.vue?vue&type=style&index=0&id=134d60f2&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"134d60f2\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"querybuilder-result\"},[_c('div',{staticClass:\"querybuilder-result__link\"},[_c('a',{attrs:{\"href\":_vm.queryServiceUrl + ((_vm.encodedQuery.length !== 0) ? '#' + _vm.encodedQuery : ''),\"target\":\"_blank\"}},[_vm._v(\" \"+_vm._s(_vm.$i18n('query-builder-result-link-text'))+\" \")])]),_c('div',{staticClass:\"querybuilder-result__header\"},[_c('h2',[_vm._v(_vm._s(_vm.$i18n('query-builder-result-header')))])]),(_vm.errors.length !== 0)?_c('div',{staticClass:\"querybuilder-result__errors\"},_vm._l((_vm.errors),function(error,index){return _c('Message',{key:index,attrs:{\"type\":error.type}},[_c('span',[_vm._v(_vm._s(_vm.$i18n(error.message)))])])}),1):(_vm.encodedQuery.length === 0)?_c('div',[_c('div',{staticClass:\"querybuilder-result__description\"},[_vm._v(\" \"+_vm._s(_vm.$i18n('query-builder-result-placeholder'))+\" \")])]):_c('div',{staticClass:\"querybuilder-result__wrapper\"},[_c('iframe',{key:_vm.iframeRenderKey,staticClass:\"querybuilder-result__iframe\",attrs:{\"src\":_vm.queryServiceEmbedUrl + '#' + _vm.encodedQuery,\"referrerpolicy\":\"origin\",\"sandbox\":\"allow-scripts allow-same-origin allow-popups allow-popups-to-escape-sandbox\"}})])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Message } from '@wmde/wikit-vue-components';\nimport Vue from 'vue';\nimport { mapGetters } from 'vuex';\n\nexport default Vue.extend( {\n\tname: 'QueryResult',\n\tdata() {\n\t\treturn {\n\t\t\tqueryServiceEmbedUrl: process.env.VUE_APP_QUERY_SERVICE_EMBED_URL,\n\t\t\tqueryServiceUrl: process.env.VUE_APP_QUERY_SERVICE_URL,\n\t\t};\n\t},\n\tprops: {\n\t\tencodedQuery: {\n\t\t\ttype: String,\n\t\t},\n\t\tiframeRenderKey: {\n\t\t\ttype: Number,\n\t\t},\n\t},\n\tmethods: {\n\t\tupdateInputTextValue( value: string ): void {\n\t\t\tthis.$store.dispatch( 'updateValue', value );\n\t\t},\n\t},\n\tcomputed: {\n\t\t...mapGetters( {\n\t\t\terrors: 'getErrors',\n\t\t} ),\n\t},\n\tcomponents: {\n\t\tMessage,\n\t},\n} );\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./QueryResult.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./QueryResult.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./QueryResult.vue?vue&type=template&id=20951f96&\"\nimport script from \"./QueryResult.vue?vue&type=script&lang=ts&\"\nexport * from \"./QueryResult.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./QueryResult.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export default {\n\twikibase: 'http://wikiba.se/ontology#',\n\twd: 'http://www.wikidata.org/entity/',\n\twdt: 'http://www.wikidata.org/prop/direct/',\n\twdtn: 'http://www.wikidata.org/prop/direct-normalized/',\n\twds: 'http://www.wikidata.org/entity/statement/',\n\tp: 'http://www.wikidata.org/prop/',\n\twdref: 'http://www.wikidata.org/reference/',\n\twdv: 'http://www.wikidata.org/value/',\n\tps: 'http://www.wikidata.org/prop/statement/',\n\tpsv: 'http://www.wikidata.org/prop/statement/value/',\n\tpsn: 'http://www.wikidata.org/prop/statement/value-normalized/',\n\tpq: 'http://www.wikidata.org/prop/qualifier/',\n\tpqv: 'http://www.wikidata.org/prop/qualifier/value/',\n\tpqn: 'http://www.wikidata.org/prop/qualifier/value-normalized/',\n\tpr: 'http://www.wikidata.org/prop/reference/',\n\tprv: 'http://www.wikidata.org/prop/reference/value/',\n\tprn: 'http://www.wikidata.org/prop/reference/value-normalized/',\n\twdno: 'http://www.wikidata.org/prop/novalue/',\n\twdata: 'http://www.wikidata.org/wiki/Special:EntityData/',\n\trdfs: 'http://www.w3.org/2000/01/rdf-schema#',\n\trdf: 'http://www.w3.org/1999/02/22-rdf-syntax-ns#',\n\towl: 'http://www.w3.org/2002/07/owl#',\n\tskos: 'http://www.w3.org/2004/02/skos/core#',\n\txsd: 'http://www.w3.org/2001/XMLSchema#',\n\tprov: 'http://www.w3.org/ns/prov#',\n\tontolex: 'http://www.w3.org/ns/lemon/ontolex#',\n\tschema: 'http://schema.org/',\n\tgeo: 'http://www.opengis.net/ont/geosparql#',\n\tgeof: 'http://www.opengis.net/def/geosparql/function/',\n\tdct: 'http://purl.org/dc/terms/',\n\tbd: 'http://www.bigdata.com/rdf#',\n\tbds: 'http://www.bigdata.com/rdf/search#',\n\tgas: 'http://www.bigdata.com/rdf/gas#',\n\thint: 'http://www.bigdata.com/queryHints#',\n};\n","import allNamespaces from '@/sparql/rdfNamespaces';\nimport {\n\tSelectQuery,\n\tSparqlGenerator,\n} from 'sparqljs';\n\nclass QueryBuilderSparqlGenerator {\n\tprivate sparqlGenerator: SparqlGenerator;\n\n\tpublic constructor( sparqlGenerator: SparqlGenerator ) {\n\t\tthis.sparqlGenerator = sparqlGenerator;\n\t}\n\n\tpublic getString( query: SelectQuery ): string {\n\t\tlet queryString: string = this.sparqlGenerator.stringify( query );\n\t\tfor ( const [ prefix, iri ] of Object.entries( allNamespaces ) ) {\n\t\t\tqueryString = queryString.replace( `PREFIX ${prefix}: <${iri}>\\n`, '' );\n\t\t}\n\n\t\treturn queryString;\n\t}\n}\n\nexport default QueryBuilderSparqlGenerator;\n","import {\n\tBgpPattern,\n\tBlankTerm,\n\tExpression,\n\tFilterPattern,\n\tIriTerm,\n\tLiteralTerm,\n\tOperationExpression,\n\tPropertyPath,\n\tQuadTerm,\n\tTerm,\n\tTriple,\n\tVariableTerm,\n} from 'sparqljs';\n\nexport default class SyntaxBuilder {\n\n\tpublic buildSimpleTriple(\n\t\tsubject: IriTerm | BlankTerm | VariableTerm | QuadTerm,\n\t\tpredicateValue: string,\n\t\tobject: Term,\n\t): Triple {\n\t\treturn {\n\t\t\tsubject,\n\t\t\tpredicate: {\n\t\t\t\ttermType: 'NamedNode',\n\t\t\t\tvalue: predicateValue,\n\t\t\t},\n\t\t\tobject,\n\t\t};\n\t}\n\n\tpublic buildPathTriple(\n\t\tsubject: IriTerm | BlankTerm | VariableTerm | QuadTerm,\n\t\tpathItems: ( string | PropertyPath )[],\n\t\tobject: Term,\n\t): Triple {\n\t\treturn {\n\t\t\tsubject,\n\t\t\tpredicate: this.buildPropertyPath(\n\t\t\t\t'/',\n\t\t\t\tpathItems.map( ( predicateItem ): IriTerm | PropertyPath => {\n\t\t\t\t\tif ( typeof predicateItem === 'string' ) {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\ttermType: 'NamedNode',\n\t\t\t\t\t\t\tvalue: predicateItem,\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\treturn predicateItem;\n\t\t\t\t} ) ),\n\t\t\tobject,\n\t\t};\n\t}\n\n\tpublic buildPropertyPath(\n\t\tpathType: '|' | '/' | '^' | '+' | '*' | '!',\n\t\tpathItems: ( IriTerm | PropertyPath )[],\n\t): PropertyPath {\n\t\treturn {\n\t\t\ttype: 'path',\n\t\t\tpathType,\n\t\t\titems: pathItems,\n\t\t};\n\t}\n\n\tpublic buildVariableTermFromName( name: string ): VariableTerm {\n\t\treturn {\n\t\t\ttermType: 'Variable',\n\t\t\tvalue: name,\n\t\t};\n\t}\n\n\tpublic buildBgpPattern( triples: Triple[] ): BgpPattern {\n\t\treturn {\n\t\t\ttype: 'bgp',\n\t\t\ttriples,\n\t\t};\n\t}\n\n\tpublic buildOperatorFilterPattern(\n\t\tleftSideTerm: Expression, operator: string, rightSideTerm: Expression,\n\t): FilterPattern {\n\t\treturn {\n\t\t\ttype: 'filter',\n\t\t\texpression: this.buildOperationsExpression(\n\t\t\t\tleftSideTerm,\n\t\t\t\toperator,\n\t\t\t\trightSideTerm,\n\t\t\t),\n\t\t};\n\t}\n\n\tpublic buildOperationsExpression(\n\t\tleftSide: Expression,\n\t\toperator: string,\n\t\trightSide: Expression,\n\t): OperationExpression {\n\t\treturn {\n\t\t\ttype: 'operation',\n\t\t\toperator,\n\t\t\targs: [\n\t\t\t\tleftSide,\n\t\t\t\trightSide,\n\t\t\t],\n\t\t};\n\t}\n\n\tpublic buildLiteralTermForDecimalNumber( numericValue: number ): LiteralTerm {\n\t\treturn {\n\t\t\ttermType: 'Literal',\n\t\t\tvalue: String( numericValue ),\n\t\t\tdatatype: {\n\t\t\t\ttermType: 'NamedNode',\n\t\t\t\tvalue: 'http://www.w3.org/2001/XMLSchema#decimal',\n\t\t\t\t// Todo: should we add equals method?\n\t\t\t},\n\t\t} as LiteralTerm;\n\t}\n\n\tpublic buildLiteralTermForDateTime( dateTime: string ): LiteralTerm {\n\t\treturn {\n\t\t\ttermType: 'Literal',\n\t\t\tvalue: dateTime,\n\t\t\tdatatype: {\n\t\t\t\ttermType: 'NamedNode',\n\t\t\t\tvalue: 'http://www.w3.org/2001/XMLSchema#dateTime',\n\t\t\t},\n\t\t} as LiteralTerm;\n\t}\n}\n","import ReferenceRelation from '@/data-model/ReferenceRelation';\nimport SyntaxBuilder from '@/sparql/SyntaxBuilder';\nimport { FilterPattern, Triple, VariableTerm } from 'sparqljs';\nimport rdfNamespaces from '@/sparql/rdfNamespaces';\n\nexport default class TripleBuilder {\n\n\tprivate readonly syntaxBuilder: SyntaxBuilder;\n\n\tpublic constructor() {\n\t\tthis.syntaxBuilder = new SyntaxBuilder();\n\t}\n\n\tpublic buildReferenceFilterPattern(\n\t\treferenceRelation: ReferenceRelation,\n\t\tstatementVariable: VariableTerm,\n\t): FilterPattern | null {\n\t\tif ( referenceRelation === ReferenceRelation.Regardless ) {\n\t\t\treturn null;\n\t\t}\n\t\tconst referencePattern = this.syntaxBuilder.buildSimpleTriple(\n\t\t\tstatementVariable,\n\t\t\trdfNamespaces.prov + 'wasDerivedFrom',\n\t\t\t{\n\t\t\t\ttermType: 'Variable',\n\t\t\t\tvalue: 'reference',\n\t\t\t},\n\t\t);\n\t\treturn {\n\t\t\ttype: 'filter',\n\t\t\texpression: {\n\t\t\t\ttype: 'operation',\n\t\t\t\toperator: referenceRelation === ReferenceRelation.With ? 'exists' : 'notexists',\n\t\t\t\targs: [ this.syntaxBuilder.buildBgpPattern( [ referencePattern ] ) ],\n\t\t\t},\n\t\t} as FilterPattern;\n\t}\n\n\tpublic buildAnyValueTripe(): Triple {\n\t\treturn {\n\t\t\tsubject: {\n\t\t\t\ttermType: 'Variable',\n\t\t\t\tvalue: 'item',\n\t\t\t},\n\t\t\tpredicate: {\n\t\t\t\ttermType: 'NamedNode',\n\t\t\t\tvalue: rdfNamespaces.wikibase + 'sitelinks',\n\t\t\t},\n\t\t\tobject: {\n\t\t\t\ttermType: 'BlankNode',\n\t\t\t\tvalue: 'anyValue',\n\t\t\t},\n\t\t};\n\t}\n\n\tpublic buildLabelServiceTriple(): Triple {\n\t\treturn {\n\t\t\tsubject: {\n\t\t\t\ttermType: 'NamedNode',\n\t\t\t\tvalue: rdfNamespaces.bd + 'serviceParam',\n\t\t\t},\n\t\t\tpredicate: {\n\t\t\t\ttermType: 'NamedNode',\n\t\t\t\tvalue: rdfNamespaces.wikibase + 'language',\n\t\t\t},\n\t\t\tobject: {\n\t\t\t\ttermType: 'Literal',\n\t\t\t\tvalue: '[AUTO_LANGUAGE]',\n\t\t\t},\n\t\t};\n\t}\n\n}\n","import PropertyValueRelation from '@/data-model/PropertyValueRelation';\nimport { Condition } from '@/sparql/QueryRepresentation';\nimport rdfNamespaces from '@/sparql/rdfNamespaces';\nimport SyntaxBuilder from '@/sparql/SyntaxBuilder';\nimport TripleBuilder from '@/sparql/TripleBuilder';\nimport ValuePatternBuilder from '@/sparql/ValuePatternBuilder';\nimport { MinusPattern, Pattern, PropertyPath, Term } from 'sparqljs';\n\nexport default class ItemValueBuilder implements ValuePatternBuilder {\n\tprivate readonly tripleBuilder: TripleBuilder;\n\tprivate readonly syntaxBuilder: SyntaxBuilder;\n\n\tpublic constructor() {\n\t\tthis.tripleBuilder = new TripleBuilder();\n\t\tthis.syntaxBuilder = new SyntaxBuilder();\n\t}\n\n\tpublic buildValuePatternFromCondition(\n\t\tcondition: Condition,\n\t\tconditionIndex: number,\n\t\trepeatingPropertyIndex: string,\n\t): Pattern[] {\n\t\tconst {\n\t\t\tpropertyId,\n\t\t\treferenceRelation,\n\t\t\tpropertyValueRelation,\n\t\t\tdatatype,\n\t\t\tvalue,\n\t\t\tnegate,\n\t\t\tsubclasses,\n\t\t} = condition;\n\n\t\tif ( datatype !== 'wikibase-item' ) {\n\t\t\tthrow new Error( 'Expected datatype wikibase-item, got: ' + datatype );\n\t\t}\n\t\tif ( typeof value !== 'string' ) {\n\t\t\tthrow new Error( 'Unexpected wikibase-item value type: ' + typeof value );\n\t\t}\n\t\tlet patterns: Pattern[] = [];\n\n\t\tconst statementVariable = this.syntaxBuilder.buildVariableTermFromName( 'statement' + conditionIndex );\n\t\tconst entityToStatementTriple = this.syntaxBuilder.buildSimpleTriple(\n\t\t\t{\n\t\t\t\ttermType: 'Variable',\n\t\t\t\tvalue: 'item',\n\t\t\t},\n\t\t\trdfNamespaces.p + propertyId,\n\t\t\tstatementVariable,\n\t\t);\n\t\tconst statementToValueTriple = this.syntaxBuilder.buildPathTriple(\n\t\t\tstatementVariable,\n\t\t\tthis.buildStatementToValuePredicateItems(\n\t\t\t\tpropertyId, subclasses,\n\t\t\t),\n\t\t\tthis.buildObjectItems( propertyId, propertyValueRelation, value, repeatingPropertyIndex ),\n\t\t);\n\t\tconst entityValuePattern = this.syntaxBuilder.buildBgpPattern( [\n\t\t\tentityToStatementTriple,\n\t\t\tstatementToValueTriple,\n\t\t] );\n\t\tpatterns.push( entityValuePattern );\n\n\t\tconst referenceFilterPattern = this.tripleBuilder.buildReferenceFilterPattern(\n\t\t\treferenceRelation,\n\t\t\tstatementVariable,\n\t\t);\n\t\tif ( referenceFilterPattern !== null ) {\n\t\t\tpatterns.push( referenceFilterPattern );\n\t\t\tpatterns = [ { type: 'group', patterns } ];\n\t\t}\n\n\t\tif ( negate ) {\n\t\t\tpatterns = [ {\n\t\t\t\ttype: 'minus',\n\t\t\t\tpatterns,\n\t\t\t} ];\n\t\t}\n\n\t\tif ( propertyValueRelation === PropertyValueRelation.NotMatching ) {\n\t\t\tconst notMatchingPattern = this.buildNotMatchingPattern( propertyId, value );\n\t\t\tpatterns.push( notMatchingPattern );\n\t\t}\n\n\t\treturn patterns;\n\t}\n\n\tprivate buildNotMatchingPattern( propertyId: string, value: string ): MinusPattern {\n\t\tconst notMatchingValueTriple = this.syntaxBuilder.buildPathTriple(\n\t\t\t{\n\t\t\t\ttermType: 'Variable',\n\t\t\t\tvalue: 'item',\n\t\t\t},\n\t\t\t[\n\t\t\t\trdfNamespaces.p + propertyId,\n\t\t\t\trdfNamespaces.ps + propertyId,\n\t\t\t\t// todo: should this have the subclass as well?\n\t\t\t],\n\t\t\t{\n\t\t\t\ttermType: 'NamedNode',\n\t\t\t\tvalue: `${rdfNamespaces.wd}${value}`,\n\t\t\t},\n\t\t);\n\t\treturn {\n\t\t\ttype: 'minus',\n\t\t\tpatterns: [ this.syntaxBuilder.buildBgpPattern( [ notMatchingValueTriple ] ) ],\n\t\t};\n\t}\n\n\tprivate buildStatementToValuePredicateItems(\n\t\tpropertyId: string, subclasses: boolean,\n\t): ( PropertyPath | string )[] {\n\t\tconst statementToValuePredicateItems: ( PropertyPath | string )[] = [\n\t\t\trdfNamespaces.ps + propertyId,\n\t\t];\n\t\tif ( subclasses ) {\n\t\t\tstatementToValuePredicateItems.push(\n\t\t\t\tthis.syntaxBuilder.buildPropertyPath( '*', [\n\t\t\t\t\t{\n\t\t\t\t\t\ttermType: 'NamedNode',\n\t\t\t\t\t\tvalue: rdfNamespaces.wdt + this.getSubclassPropertyId( propertyId ),\n\t\t\t\t\t},\n\t\t\t\t] ),\n\t\t\t);\n\t\t}\n\t\treturn statementToValuePredicateItems;\n\t}\n\n\tprivate getSubclassPropertyId( propertyId: string ): string {\n\t\tif ( !process.env.VUE_APP_SUBCLASS_PROPERTY_MAP ) {\n\t\t\treturn 'P279';\n\t\t}\n\t\tconst propertyMap = JSON.parse( process.env.VUE_APP_SUBCLASS_PROPERTY_MAP );\n\t\tif ( !propertyMap[ propertyId ] ) {\n\t\t\treturn propertyMap.default;\n\t\t}\n\t\treturn propertyMap[ propertyId ];\n\t}\n\n\tprivate buildObjectItems(\n\t\tpropertyId: string,\n\t\tpropertyValueRelation: PropertyValueRelation,\n\t\tvalue: string,\n\t\tpropertyIndex: string,\n\t): Term {\n\t\tswitch ( propertyValueRelation ) {\n\t\t\tcase ( PropertyValueRelation.NotMatching ):\n\t\t\t\treturn {\n\t\t\t\t\ttermType: 'Variable',\n\t\t\t\t\tvalue: 'instance', // TODO should this have + propertyId?\n\t\t\t\t};\n\t\t\tcase ( PropertyValueRelation.Regardless ):\n\t\t\t\treturn {\n\t\t\t\t\ttermType: 'BlankNode',\n\t\t\t\t\tvalue: propertyIndex !== '' ? `anyValue${propertyId}_${propertyIndex}` : `anyValue${propertyId}`,\n\t\t\t\t};\n\t\t\tcase ( PropertyValueRelation.Matching ):\n\t\t\t\treturn {\n\t\t\t\t\ttermType: 'NamedNode',\n\t\t\t\t\tvalue: `${rdfNamespaces.wd}${value}`,\n\t\t\t\t};\n\t\t\tdefault:\n\t\t\t\tthrow new Error( `unsupported relation: ${propertyValueRelation}` );\n\t\t}\n\t}\n}\n","import PropertyValueRelation from '@/data-model/PropertyValueRelation';\nimport { Condition } from '@/sparql/QueryRepresentation';\nimport rdfNamespaces from '@/sparql/rdfNamespaces';\nimport SyntaxBuilder from '@/sparql/SyntaxBuilder';\nimport TripleBuilder from '@/sparql/TripleBuilder';\nimport ValuePatternBuilder from '@/sparql/ValuePatternBuilder';\nimport { Pattern } from 'sparqljs';\n\nexport default class LimitedSupportPatternBuilder implements ValuePatternBuilder {\n\tprivate readonly tripleBuilder: TripleBuilder;\n\tprivate readonly syntaxBuilder: SyntaxBuilder;\n\n\tpublic constructor() {\n\t\tthis.tripleBuilder = new TripleBuilder();\n\t\tthis.syntaxBuilder = new SyntaxBuilder();\n\t}\n\n\tpublic buildValuePatternFromCondition(\n\t\tcondition: Condition,\n\t\tconditionIndex: number,\n\t\trepeatingPropertyIndex: string,\n\t): Pattern[] {\n\t\tconst {\n\t\t\tpropertyId,\n\t\t\treferenceRelation,\n\t\t\tpropertyValueRelation,\n\t\t\tnegate,\n\t\t} = condition;\n\n\t\tif ( propertyValueRelation !== PropertyValueRelation.Regardless ) {\n\t\t\tthrow new Error( 'datatypes with limited support _must_ have PropertyValueRelation.Regardless!' );\n\t\t}\n\n\t\tlet patterns: Pattern[] = [];\n\n\t\tconst statementVariable = this.syntaxBuilder.buildVariableTermFromName( 'statement' + conditionIndex );\n\t\tconst entityToStatementTriple = this.syntaxBuilder.buildSimpleTriple(\n\t\t\t{ termType: 'Variable', value: 'item' },\n\t\t\trdfNamespaces.p + propertyId,\n\t\t\tstatementVariable,\n\t\t);\n\t\tconst statementToValueTriple = this.syntaxBuilder.buildPathTriple(\n\t\t\tstatementVariable,\n\t\t\t[ rdfNamespaces.ps + propertyId ],\n\t\t\t{\n\t\t\t\ttermType: 'BlankNode',\n\t\t\t\tvalue: repeatingPropertyIndex !== '' ?\n\t\t\t\t\t`anyValue${propertyId}_${repeatingPropertyIndex}` :\n\t\t\t\t\t`anyValue${propertyId}`,\n\t\t\t},\n\t\t);\n\t\tconst entityValuePattern = this.syntaxBuilder.buildBgpPattern( [\n\t\t\tentityToStatementTriple,\n\t\t\tstatementToValueTriple,\n\t\t] );\n\t\tpatterns.push( entityValuePattern );\n\n\t\tconst referenceFilterPattern = this.tripleBuilder.buildReferenceFilterPattern(\n\t\t\treferenceRelation,\n\t\t\tstatementVariable,\n\t\t);\n\t\tif ( referenceFilterPattern !== null ) {\n\t\t\tpatterns.push( referenceFilterPattern );\n\t\t\tpatterns = [ { type: 'group', patterns } ];\n\t\t}\n\n\t\tif ( negate ) {\n\t\t\tpatterns = [ {\n\t\t\t\ttype: 'minus',\n\t\t\t\tpatterns,\n\t\t\t} ];\n\t\t}\n\n\t\treturn patterns;\n\t}\n}\n","import PropertyValueRelation from '@/data-model/PropertyValueRelation';\nimport ReferenceRelation from '@/data-model/ReferenceRelation';\nimport UnitValue from '@/data-model/UnitValue';\nimport { Condition, ConditionValue } from '@/sparql/QueryRepresentation';\nimport rdfNamespaces from '@/sparql/rdfNamespaces';\nimport SyntaxBuilder from '@/sparql/SyntaxBuilder';\nimport TripleBuilder from '@/sparql/TripleBuilder';\nimport ValuePatternBuilder from '@/sparql/ValuePatternBuilder';\nimport { BindPattern, Pattern } from 'sparqljs';\n\nexport default class QuantityValuePatternBuilder implements ValuePatternBuilder {\n\n\tprivate readonly tripleBuilder: TripleBuilder;\n\tprivate readonly syntaxBuilder: SyntaxBuilder;\n\n\tpublic constructor() {\n\t\tthis.tripleBuilder = new TripleBuilder();\n\t\tthis.syntaxBuilder = new SyntaxBuilder();\n\t}\n\n\tpublic buildValuePatternFromCondition( condition: Condition, conditionIndex: number ): Pattern[] {\n\t\tconst {\n\t\t\tpropertyId,\n\t\t\tnegate,\n\t\t\treferenceRelation,\n\t\t\tpropertyValueRelation,\n\t\t\tdatatype,\n\t\t\tvalue,\n\t\t} = condition;\n\n\t\tif ( datatype !== 'quantity' ) {\n\t\t\tthrow new Error( 'Unexpected datatype: ' + datatype );\n\t\t}\n\n\t\tlet patterns: Pattern[];\n\n\t\tif ( propertyValueRelation === PropertyValueRelation.Regardless ) {\n\t\t\tpatterns = this.buildRegardlessOfValuePattern( propertyId, conditionIndex, referenceRelation );\n\t\t} else {\n\t\t\tpatterns = this.buildValuePatterns(\n\t\t\t\tvalue,\n\t\t\t\tpropertyValueRelation,\n\t\t\t\tpropertyId,\n\t\t\t\tconditionIndex,\n\t\t\t\treferenceRelation,\n\t\t\t);\n\t\t}\n\n\t\tif ( negate ) {\n\t\t\treturn [ {\n\t\t\t\ttype: 'minus',\n\t\t\t\tpatterns: patterns,\n\t\t\t} ];\n\t\t}\n\t\treturn patterns;\n\t}\n\n\tprivate buildValuePatterns(\n\t\tvalue: ConditionValue,\n\t\tpropertyValueRelation: PropertyValueRelation,\n\t\tpropertyId: string,\n\t\tconditionIndex: number,\n\t\treferenceRelation: ReferenceRelation,\n\t): Pattern[] {\n\t\tif ( !this.isQuantityValue( value ) ) {\n\t\t\tthrow new Error( 'Unexpected value quantity value: ' + JSON.stringify( value ) );\n\t\t}\n\n\t\tconst numericValue = value.value;\n\t\tconst unit = value.unit;\n\n\t\tif ( unit === null || propertyValueRelation === PropertyValueRelation.Regardless ) {\n\t\t\treturn this.buildPatternsForUnitlessValue(\n\t\t\t\tpropertyId,\n\t\t\t\tnumericValue,\n\t\t\t\tconditionIndex,\n\t\t\t\treferenceRelation,\n\t\t\t\tpropertyValueRelation,\n\t\t\t);\n\t\t} else {\n\t\t\treturn this.buildFullQuantityPattern(\n\t\t\t\tnumericValue,\n\t\t\t\tunit,\n\t\t\t\tconditionIndex,\n\t\t\t\tpropertyId,\n\t\t\t\treferenceRelation,\n\t\t\t\tpropertyValueRelation,\n\t\t\t);\n\t\t}\n\t}\n\n\tprivate buildRegardlessOfValuePattern(\n\t\tpropertyId: string,\n\t\tconditionIndex: number,\n\t\treferenceRelation: ReferenceRelation,\n\t): Pattern[] {\n\t\tconst numericQuantityVariable = this.syntaxBuilder.buildVariableTermFromName( 'numericQuantity' );\n\t\tconst statementVariable = this.syntaxBuilder.buildVariableTermFromName( 'statement' + conditionIndex );\n\t\tconst bgp = this.syntaxBuilder.buildBgpPattern( [\n\t\t\tthis.syntaxBuilder.buildSimpleTriple(\n\t\t\t\t{\n\t\t\t\t\ttermType: 'Variable',\n\t\t\t\t\tvalue: 'item',\n\t\t\t\t},\n\t\t\t\trdfNamespaces.p + propertyId,\n\t\t\t\tstatementVariable,\n\t\t\t),\n\t\t\tthis.syntaxBuilder.buildPathTriple(\n\t\t\t\tstatementVariable,\n\t\t\t\t[\n\t\t\t\t\trdfNamespaces.psv + propertyId,\n\t\t\t\t\trdfNamespaces.wikibase + 'quantityAmount',\n\t\t\t\t],\n\t\t\t\tnumericQuantityVariable,\n\t\t\t),\n\t\t] );\n\n\t\tconst patterns: Pattern[] = [ bgp ];\n\n\t\tconst referenceFilterPattern = this.tripleBuilder.buildReferenceFilterPattern(\n\t\t\treferenceRelation,\n\t\t\tstatementVariable,\n\t\t);\n\t\tif ( referenceFilterPattern !== null ) {\n\t\t\tpatterns.push( referenceFilterPattern );\n\t\t}\n\n\t\treturn patterns;\n\t}\n\n\tprivate buildFullQuantityPattern(\n\t\tnumericValue: number,\n\t\tunit: string,\n\t\tconditionIndex: number,\n\t\tpropertyId: string,\n\t\treferenceRelation: ReferenceRelation,\n\t\tpropertyValueRelation: PropertyValueRelation,\n\t): Pattern[] {\n\t\tconst patterns: Pattern[] = [];\n\n\t\tconst userQuantityVariable = this.syntaxBuilder.buildVariableTermFromName( 'userQuantity' );\n\t\tconst userQuantityBind: BindPattern = {\n\t\t\ttype: 'bind',\n\t\t\tvariable: userQuantityVariable,\n\t\t\texpression: this.syntaxBuilder.buildLiteralTermForDecimalNumber( numericValue ),\n\t\t};\n\t\tpatterns.push( userQuantityBind );\n\n\t\tconst userUnitVariable = this.syntaxBuilder.buildVariableTermFromName( 'userUnit' );\n\t\tconst userUnitBind: BindPattern = {\n\t\t\ttype: 'bind',\n\t\t\tvariable: userUnitVariable,\n\t\t\texpression: {\n\t\t\t\ttermType: 'NamedNode',\n\t\t\t\tvalue: `${rdfNamespaces.wd}${unit}`,\n\t\t\t},\n\t\t};\n\t\tpatterns.push( userUnitBind );\n\n\t\tconst conversionPropertyId = this.getSiConversionPropertyId();\n\n\t\tconst conversionFactorVariable = this.syntaxBuilder.buildVariableTermFromName( 'conversionFactor' );\n\t\tconst unitToConversionFactorTriple = this.syntaxBuilder.buildPathTriple(\n\t\t\tuserUnitVariable,\n\t\t\t[\n\t\t\t\trdfNamespaces.p + conversionPropertyId,\n\t\t\t\trdfNamespaces.psv + conversionPropertyId,\n\t\t\t\trdfNamespaces.wikibase + 'quantityAmount',\n\t\t\t],\n\t\t\tconversionFactorVariable,\n\t\t);\n\t\tconst coherentUnitVariable = this.syntaxBuilder.buildVariableTermFromName( 'coherentUnit' );\n\t\tconst unitToCoherentUnitTriple = this.syntaxBuilder.buildPathTriple(\n\t\t\tuserUnitVariable,\n\t\t\t[\n\t\t\t\trdfNamespaces.p + conversionPropertyId,\n\t\t\t\trdfNamespaces.psv + conversionPropertyId,\n\t\t\t\trdfNamespaces.wikibase + 'quantityUnit',\n\t\t\t],\n\t\t\tcoherentUnitVariable,\n\t\t);\n\t\tconst conversionGroup = this.syntaxBuilder.buildBgpPattern( [\n\t\t\tunitToConversionFactorTriple,\n\t\t\tunitToCoherentUnitTriple,\n\t\t] );\n\t\tpatterns.push( conversionGroup );\n\n\t\tconst coherentUserQuantityVariable = this.syntaxBuilder.buildVariableTermFromName( 'coherentUserQuantity' );\n\t\tconst coherentUserQuantityBind: BindPattern = {\n\t\t\ttype: 'bind',\n\t\t\tvariable: coherentUserQuantityVariable,\n\t\t\texpression: this.syntaxBuilder.buildOperationsExpression(\n\t\t\t\tuserQuantityVariable,\n\t\t\t\t'*',\n\t\t\t\tconversionFactorVariable,\n\t\t\t),\n\t\t};\n\t\tpatterns.push( coherentUserQuantityBind );\n\n\t\tconst statementVariable = this.syntaxBuilder.buildVariableTermFromName( 'statement' + conditionIndex );\n\t\tconst entityToStatementTriple = this.syntaxBuilder.buildSimpleTriple(\n\t\t\t{\n\t\t\t\ttermType: 'Variable',\n\t\t\t\tvalue: 'item',\n\t\t\t},\n\t\t\trdfNamespaces.p + propertyId,\n\t\t\tstatementVariable,\n\t\t);\n\t\tconst statementQuantityVariable = this.syntaxBuilder.buildVariableTermFromName( 'statementQuantity' );\n\t\tconst statementToAmountTriple = this.syntaxBuilder.buildPathTriple(\n\t\t\tstatementVariable,\n\t\t\t[\n\t\t\t\trdfNamespaces.psn + propertyId,\n\t\t\t\trdfNamespaces.wikibase + 'quantityAmount',\n\t\t\t],\n\t\t\tstatementQuantityVariable,\n\t\t);\n\t\tconst statementToUnitTyple = this.syntaxBuilder.buildPathTriple(\n\t\t\tstatementVariable,\n\t\t\t[\n\t\t\t\trdfNamespaces.psn + propertyId,\n\t\t\t\trdfNamespaces.wikibase + 'quantityUnit',\n\t\t\t],\n\t\t\tcoherentUnitVariable,\n\t\t);\n\t\tconst entityQuantityGroup = this.syntaxBuilder.buildBgpPattern(\n\t\t\t[\n\t\t\t\tentityToStatementTriple,\n\t\t\t\tstatementToAmountTriple,\n\t\t\t\tstatementToUnitTyple,\n\t\t\t],\n\t\t);\n\t\tpatterns.push( entityQuantityGroup );\n\n\t\tconst operator = this.getFilterOperatorFromRelation( propertyValueRelation );\n\t\tif ( operator !== null ) {\n\t\t\tconst valueFilterPattern = this.syntaxBuilder.buildOperatorFilterPattern(\n\t\t\t\tstatementQuantityVariable,\n\t\t\t\toperator,\n\t\t\t\tcoherentUserQuantityVariable,\n\t\t\t);\n\t\t\tpatterns.push( valueFilterPattern );\n\t\t}\n\n\t\tconst referenceFilterPattern = this.tripleBuilder.buildReferenceFilterPattern(\n\t\t\treferenceRelation,\n\t\t\tstatementVariable,\n\t\t);\n\t\tif ( referenceFilterPattern !== null ) {\n\t\t\tpatterns.push( referenceFilterPattern );\n\t\t}\n\n\t\treturn patterns;\n\t}\n\n\tprivate buildPatternsForUnitlessValue(\n\t\tpropertyId: string,\n\t\tnumericValue: number,\n\t\tconditionIndex: number,\n\t\treferenceRelation: ReferenceRelation,\n\t\tpropertyValueRelation: PropertyValueRelation,\n\t): Pattern[] {\n\t\tconst patterns: Pattern[] = [];\n\t\tconst numericQuantityVariable = this.syntaxBuilder.buildVariableTermFromName( 'numericQuantity' );\n\t\tconst statementVariable = this.syntaxBuilder.buildVariableTermFromName( 'statement' + conditionIndex );\n\t\tconst bgp = this.syntaxBuilder.buildBgpPattern( [\n\t\t\tthis.syntaxBuilder.buildSimpleTriple(\n\t\t\t\t{\n\t\t\t\t\ttermType: 'Variable',\n\t\t\t\t\tvalue: 'item',\n\t\t\t\t},\n\t\t\t\trdfNamespaces.p + propertyId,\n\t\t\t\tstatementVariable,\n\t\t\t),\n\t\t\tthis.syntaxBuilder.buildPathTriple(\n\t\t\t\tstatementVariable,\n\t\t\t\t[\n\t\t\t\t\trdfNamespaces.psv + propertyId,\n\t\t\t\t\trdfNamespaces.wikibase + 'quantityAmount',\n\t\t\t\t],\n\t\t\t\tnumericQuantityVariable,\n\t\t\t),\n\t\t] );\n\t\tpatterns.push( bgp );\n\n\t\tconst operator = this.getFilterOperatorFromRelation( propertyValueRelation );\n\t\tif ( operator !== null ) {\n\t\t\tconst valueFilterPattern = this.syntaxBuilder.buildOperatorFilterPattern(\n\t\t\t\tnumericQuantityVariable,\n\t\t\t\toperator,\n\t\t\t\tthis.syntaxBuilder.buildLiteralTermForDecimalNumber( numericValue ),\n\t\t\t);\n\t\t\tpatterns.push( valueFilterPattern );\n\t\t}\n\n\t\tconst referenceFilterPattern = this.tripleBuilder.buildReferenceFilterPattern(\n\t\t\treferenceRelation,\n\t\t\tstatementVariable,\n\t\t);\n\t\tif ( referenceFilterPattern !== null ) {\n\t\t\tpatterns.push( referenceFilterPattern );\n\t\t}\n\n\t\treturn patterns;\n\t}\n\n\tprivate isQuantityValue( value: ConditionValue ): value is UnitValue {\n\t\treturn typeof value === 'object' &&\n\t\t\t( ( value as UnitValue ).unit === null || typeof ( value as UnitValue ).unit === 'string' );\n\t}\n\n\tprivate getFilterOperatorFromRelation( propertyValueRelation: PropertyValueRelation ): string | null {\n\t\tswitch ( propertyValueRelation as PropertyValueRelation ) {\n\t\t\tcase PropertyValueRelation.Matching:\n\t\t\t\treturn '=';\n\t\t\tcase PropertyValueRelation.NotMatching:\n\t\t\t\treturn '!=';\n\t\t\tcase PropertyValueRelation.LessThan:\n\t\t\t\treturn '<';\n\t\t\tcase PropertyValueRelation.MoreThan:\n\t\t\t\treturn '>';\n\t\t\tcase PropertyValueRelation.Regardless:\n\t\t\t\treturn null;\n\t\t}\n\t}\n\n\tprivate getSiConversionPropertyId(): string {\n\t\tif ( !process.env.VUE_APP_SI_CONVERSION_PROPERTY ) {\n\t\t\tthrow new Error( 'Property for conversion to SI units has to be defined!' );\n\t\t}\n\t\treturn process.env.VUE_APP_SI_CONVERSION_PROPERTY;\n\t}\n}\n","import PropertyValueRelation from '@/data-model/PropertyValueRelation';\nimport { Condition } from '@/sparql/QueryRepresentation';\nimport rdfNamespaces from '@/sparql/rdfNamespaces';\nimport SyntaxBuilder from '@/sparql/SyntaxBuilder';\nimport TripleBuilder from '@/sparql/TripleBuilder';\nimport ValuePatternBuilder from '@/sparql/ValuePatternBuilder';\nimport { MinusPattern, Pattern, Term } from 'sparqljs';\n\nexport default class StringValuePatternBuilder implements ValuePatternBuilder {\n\tprivate readonly ALLOWED_DATATYPES = [ 'string', 'external-id' ];\n\n\tprivate readonly tripleBuilder: TripleBuilder;\n\tprivate readonly syntaxBuilder: SyntaxBuilder;\n\n\tpublic constructor() {\n\t\tthis.tripleBuilder = new TripleBuilder();\n\t\tthis.syntaxBuilder = new SyntaxBuilder();\n\t}\n\n\tpublic buildValuePatternFromCondition(\n\t\tcondition: Condition,\n\t\tconditionIndex: number,\n\t\trepeatingPropertyIndex: string,\n\t): Pattern[] {\n\t\tconst {\n\t\t\tpropertyId,\n\t\t\treferenceRelation,\n\t\t\tpropertyValueRelation,\n\t\t\tdatatype,\n\t\t\tvalue,\n\t\t\tnegate,\n\t\t} = condition;\n\n\t\tif ( !this.ALLOWED_DATATYPES.includes( datatype ) ) {\n\t\t\tthrow new Error( 'Unexpected datatype: ' + datatype );\n\t\t}\n\t\tif ( typeof value !== 'string' ) {\n\t\t\tthrow new Error( 'Unexpected value type: ' + typeof value );\n\t\t}\n\t\tlet patterns: Pattern[] = [];\n\n\t\tconst statementVariable = this.syntaxBuilder.buildVariableTermFromName( 'statement' + conditionIndex );\n\t\tconst entityToStatementTriple = this.syntaxBuilder.buildSimpleTriple(\n\t\t\t{ termType: 'Variable', value: 'item' },\n\t\t\trdfNamespaces.p + propertyId,\n\t\t\tstatementVariable,\n\t\t);\n\t\tconst statementToValueTriple = this.syntaxBuilder.buildPathTriple(\n\t\t\tstatementVariable,\n\t\t\t[ rdfNamespaces.ps + propertyId ],\n\t\t\tthis.buildObjectItems( propertyId, propertyValueRelation, value, repeatingPropertyIndex ),\n\t\t);\n\t\tconst entityValuePattern = this.syntaxBuilder.buildBgpPattern( [\n\t\t\tentityToStatementTriple,\n\t\t\tstatementToValueTriple,\n\t\t] );\n\t\tpatterns.push( entityValuePattern );\n\n\t\tconst referenceFilterPattern = this.tripleBuilder.buildReferenceFilterPattern(\n\t\t\treferenceRelation,\n\t\t\tstatementVariable,\n\t\t);\n\t\tif ( referenceFilterPattern !== null ) {\n\t\t\tpatterns.push( referenceFilterPattern );\n\t\t\tpatterns = [ { type: 'group', patterns } ];\n\t\t}\n\n\t\tif ( negate ) {\n\t\t\tpatterns = [ {\n\t\t\t\ttype: 'minus',\n\t\t\t\tpatterns,\n\t\t\t} ];\n\t\t}\n\n\t\tif ( propertyValueRelation === PropertyValueRelation.NotMatching ) {\n\t\t\tconst notMatchingPattern = this.buildNotMatchingPattern( propertyId, value );\n\t\t\tpatterns.push( notMatchingPattern );\n\t\t}\n\n\t\treturn patterns;\n\t}\n\n\tprivate buildNotMatchingPattern( propertyId: string, value: string ): MinusPattern {\n\t\tconst notMatchingValueTriple = this.syntaxBuilder.buildPathTriple(\n\t\t\t{\n\t\t\t\ttermType: 'Variable',\n\t\t\t\tvalue: 'item',\n\t\t\t},\n\t\t\t[\n\t\t\t\trdfNamespaces.p + propertyId,\n\t\t\t\trdfNamespaces.ps + propertyId,\n\t\t\t],\n\t\t\t{\n\t\t\t\ttermType: 'Literal',\n\t\t\t\tvalue,\n\t\t\t},\n\t\t);\n\t\treturn {\n\t\t\ttype: 'minus',\n\t\t\tpatterns: [ this.syntaxBuilder.buildBgpPattern( [ notMatchingValueTriple ] ) ],\n\t\t};\n\t}\n\n\tprivate buildObjectItems(\n\t\tpropertyId: string,\n\t\tpropertyValueRelation: PropertyValueRelation,\n\t\tvalue: string,\n\t\tpropertyIndex: string,\n\t): Term {\n\t\tswitch ( propertyValueRelation ) {\n\t\t\tcase ( PropertyValueRelation.NotMatching ):\n\t\t\t\treturn {\n\t\t\t\t\ttermType: 'Variable',\n\t\t\t\t\tvalue: 'instance', // TODO should this have + propertyId?\n\t\t\t\t};\n\t\t\tcase ( PropertyValueRelation.Regardless ):\n\t\t\t\treturn {\n\t\t\t\t\ttermType: 'BlankNode',\n\t\t\t\t\tvalue: propertyIndex !== '' ? `anyValue${propertyId}_${propertyIndex}` : `anyValue${propertyId}`,\n\t\t\t\t};\n\t\t\tcase ( PropertyValueRelation.Matching ):\n\t\t\t\treturn {\n\t\t\t\t\ttermType: 'Literal',\n\t\t\t\t\tvalue,\n\t\t\t\t};\n\t\t\tdefault:\n\t\t\t\tthrow new Error( `unsupported relation: ${propertyValueRelation}` );\n\t\t}\n\t}\n\n}\n","import DateValuePatternBuilder from '@/sparql/DateValuePatternBuilder';\nimport ItemValueBuilder from '@/sparql/ItemValueBuilder';\nimport LimitedSupportPatternBuilder from '@/sparql/LimitedSupportPatternBuilder';\nimport QuantityValuePatternBuilder from '@/sparql/QuantityValuePatternBuilder';\nimport { Condition } from '@/sparql/QueryRepresentation';\nimport StringValuePatternBuilder from '@/sparql/StringValuePatternBuilder';\nimport TripleBuilder from '@/sparql/TripleBuilder';\nimport ValuePatternBuilder from '@/sparql/ValuePatternBuilder';\nimport { Pattern } from 'sparqljs';\n\nexport default class PatternBuilder implements ValuePatternBuilder {\n\tprivate tripleBuilder: TripleBuilder;\n\n\tpublic constructor() {\n\t\tthis.tripleBuilder = new TripleBuilder();\n\t}\n\n\tpublic buildValuePatternFromCondition(\n\t\tcondition: Condition,\n\t\tconditionIndex: number,\n\t\trepeatingPropertyIndex: string,\n\t): Pattern[] {\n\t\treturn this.getValuePatternBuilderForDatatype( condition.datatype )\n\t\t\t.buildValuePatternFromCondition( condition, conditionIndex, repeatingPropertyIndex );\n\t}\n\n\tprivate getValuePatternBuilderForDatatype( datatype: string ): ValuePatternBuilder {\n\t\tswitch ( datatype ) {\n\t\t\tcase 'string':\n\t\t\tcase 'external-id':\n\t\t\t\treturn new StringValuePatternBuilder();\n\t\t\tcase 'wikibase-item':\n\t\t\t\treturn new ItemValueBuilder();\n\t\t\tcase 'quantity':\n\t\t\t\treturn new QuantityValuePatternBuilder();\n\t\t\tcase 'time':\n\t\t\t\treturn new DateValuePatternBuilder();\n\t\t\tdefault:\n\t\t\t\treturn new LimitedSupportPatternBuilder();\n\t\t}\n\t}\n\n\tpublic buildLabelServicePattern(): Pattern {\n\t\treturn {\n\t\t\ttype: 'bgp',\n\t\t\ttriples: [ this.tripleBuilder.buildLabelServiceTriple() ],\n\t\t};\n\t}\n\n\tpublic buildAnyValuePattern(): Pattern {\n\t\treturn {\n\t\t\ttype: 'bgp',\n\t\t\ttriples: [ this.tripleBuilder.buildAnyValueTripe() ],\n\t\t};\n\t}\n}\n","import ReferenceRelation from '@/data-model/ReferenceRelation';\nimport PatternBuilder from '@/sparql/PatternBuilder';\nimport QueryRepresentation, { Condition } from '@/sparql/QueryRepresentation';\nimport rdfNamespaces from '@/sparql/rdfNamespaces';\nimport { Pattern, SelectQuery } from 'sparqljs';\n\ntype RootNode = ( Condition | Condition[] )[];\n\nexport default class QueryObjectBuilder {\n\tprivate queryObject: SelectQuery;\n\tprivate patternBuilder: PatternBuilder;\n\tprivate conditionIndex = 0;\n\tprivate queryRepresentation: QueryRepresentation;\n\tprivate conditions: RootNode;\n\n\tpublic constructor( queryRepresentation: QueryRepresentation ) {\n\t\tthis.queryObject = {\n\t\t\tqueryType: 'SELECT',\n\t\t\tdistinct: true,\n\t\t\tvariables: [],\n\t\t\twhere: [],\n\t\t\ttype: 'query',\n\t\t\tprefixes: rdfNamespaces,\n\t\t};\n\t\tthis.patternBuilder = new PatternBuilder();\n\t\tthis.queryRepresentation = queryRepresentation;\n\t\tthis.conditions = this.buildConditionTree( queryRepresentation.conditions );\n\t}\n\n\tpublic buildFromQueryRepresentation(): SelectQuery {\n\n\t\tthis.queryObject.variables = [\n\t\t\t{\n\t\t\t\ttermType: 'Variable',\n\t\t\t\tvalue: 'item',\n\t\t\t},\n\t\t];\n\n\t\tthis.conditions.forEach( ( condition ) => {\n\t\t\tif ( Array.isArray( condition ) ) {\n\t\t\t\tthis.buildUnion( condition );\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.buildFromQueryCondition( condition );\n\t\t} );\n\n\t\tif ( this.queryObject.where ) {\n\t\t\t// If it's a negate query only, we need to add \"any item\" to it otherwise it returns empty result.\n\t\t\tlet isOnlyNegateQuery = true;\n\t\t\tfor ( let i = 0; i < this.queryObject.where?.length; i++ ) {\n\t\t\t\tconst type = this.queryObject.where[ i ].type;\n\t\t\t\tif ( type !== 'minus' ) {\n\t\t\t\t\tisOnlyNegateQuery = false;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( isOnlyNegateQuery ) {\n\t\t\t\tthis.queryObject.where.unshift( this.patternBuilder.buildAnyValuePattern() );\n\t\t\t}\n\t\t}\n\n\t\tif ( this.queryRepresentation.limit ) {\n\t\t\tthis.queryObject.limit = this.queryRepresentation.limit;\n\t\t}\n\n\t\tif ( !this.queryRepresentation.omitLabels ) {\n\t\t\treturn this.wrapQueryWithLabel();\n\t\t}\n\n\t\treturn this.queryObject;\n\t}\n\n\tprivate propertyRegardlessOfValueOccursMoreThanOnce( propertyId: string ): boolean {\n\t\treturn this.queryRepresentation.conditions.filter( ( condition ) =>\n\t\t\tcondition.propertyId === propertyId &&\n\t\t\t\tcondition.referenceRelation === ReferenceRelation.Regardless,\n\t\t).length > 1;\n\t}\n\n\tprivate buildConditionTree( conditions: Condition[] ): RootNode {\n\t\tconst rootNode: RootNode = [];\n\t\tconditions.forEach( ( condition ) => {\n\t\t\tif ( condition.conditionRelation === 'and' || condition.conditionRelation === null ) {\n\t\t\t\tthis.attachToRootWithAnd( rootNode, condition );\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.attachToPreviousConditionWithOr( rootNode, condition );\n\t\t} );\n\n\t\treturn rootNode;\n\t}\n\n\tprivate attachToPreviousConditionWithOr( rootNode: RootNode, condition: Condition ): void {\n\t\tif ( this.lastElementIsSingleCondition( rootNode ) ) {\n\t\t\tthis.makeLastElementIntoConditionGroup( rootNode );\n\t\t}\n\n\t\tthis.attachToExistingConditionGroup( rootNode, condition );\n\t}\n\n\tprivate attachToExistingConditionGroup( rootNode: RootNode, condition: Condition ): void {\n\t\t( rootNode[ rootNode.length - 1 ] as Condition[] ).push( condition );\n\t}\n\n\tprivate lastElementIsSingleCondition( rootNode: RootNode ): boolean {\n\t\treturn !Array.isArray( rootNode[ rootNode.length - 1 ] );\n\t}\n\n\tprivate makeLastElementIntoConditionGroup( rootNode: RootNode ): void {\n\t\trootNode.push( [ rootNode.pop() as Condition ] );\n\t}\n\n\tprivate attachToRootWithAnd( rootNode: RootNode, condition: Condition ): void {\n\t\trootNode.push( condition );\n\t}\n\n\tprivate buildUnion( conditions: Condition[] ): void {\n\t\tconst unionConditions = [];\n\t\tfor ( let i = 0; i < conditions.length; i++ ) {\n\t\t\tconst conditionIndex = this.conditionIndex++;\n\t\t\tconst repeatingPropertyIndex =\n\t\t\t\tthis.propertyRegardlessOfValueOccursMoreThanOnce( conditions[ i ].propertyId ) ?\n\t\t\t\t\tconditionIndex.toString() :\n\t\t\t\t\t'';\n\t\t\tconst unionConditionGroup: Pattern = {\n\t\t\t\ttype: 'group',\n\t\t\t\tpatterns: this.patternBuilder.buildValuePatternFromCondition(\n\t\t\t\t\tconditions[ i ],\n\t\t\t\t\tconditionIndex,\n\t\t\t\t\trepeatingPropertyIndex,\n\t\t\t\t),\n\t\t\t};\n\t\t\tunionConditions.push( unionConditionGroup );\n\t\t}\n\t\tconst union: Pattern = {\n\t\t\ttype: 'union',\n\t\t\tpatterns: unionConditions,\n\t\t};\n\t\tif ( !this.queryObject.where ) {\n\t\t\tthis.queryObject.where = [];\n\t\t}\n\t\tthis.queryObject.where.push( union );\n\t}\n\n\tprivate buildFromQueryCondition(\n\t\tcondition: Condition,\n\t): void {\n\t\tif ( !this.queryObject.where ) {\n\t\t\tthis.queryObject.where = [];\n\t\t}\n\t\tconst conditionIndex = this.conditionIndex++;\n\t\tconst repeatingPropertyIndex = this.propertyRegardlessOfValueOccursMoreThanOnce( condition.propertyId ) ?\n\t\t\tconditionIndex.toString() :\n\t\t\t'';\n\t\tthis.queryObject.where.push(\n\t\t\t...this.patternBuilder.buildValuePatternFromCondition(\n\t\t\t\tcondition,\n\t\t\t\tconditionIndex,\n\t\t\t\trepeatingPropertyIndex,\n\t\t\t),\n\t\t);\n\t\treturn;\n\t}\n\n\tprivate wrapQueryWithLabel(): SelectQuery {\n\t\tconst wrapperQuery: SelectQuery = {\n\t\t\tqueryType: 'SELECT',\n\t\t\tdistinct: true,\n\t\t\tvariables: [\n\t\t\t\t{\n\t\t\t\t\ttermType: 'Variable',\n\t\t\t\t\tvalue: 'item',\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttermType: 'Variable',\n\t\t\t\t\tvalue: 'itemLabel',\n\t\t\t\t},\n        // CONZEPT PATCH\n\t\t\t\t{\n\t\t\t\t\ttermType: 'Variable',\n\t\t\t\t\tvalue: 'itemDescription',\n\t\t\t\t},\n\t\t\t],\n\t\t\twhere: [\n\t\t\t\t{\n\t\t\t\t\ttype: 'service',\n\t\t\t\t\tpatterns: [ this.patternBuilder.buildLabelServicePattern() ],\n\t\t\t\t\tname: {\n\t\t\t\t\t\ttermType: 'NamedNode',\n\t\t\t\t\t\tvalue: rdfNamespaces.wikibase + 'label',\n\t\t\t\t\t},\n\t\t\t\t\tsilent: false,\n\t\t\t\t},\n\t\t\t],\n\t\t\ttype: 'query',\n\t\t\tprefixes: rdfNamespaces,\n\t\t};\n\n\t\tif ( !wrapperQuery.where ) {\n\t\t\twrapperQuery.where = [];\n\t\t}\n\t\tthis.queryObject.prefixes = {};\n\t\twrapperQuery.where.push( {\n\t\t\ttype: 'group',\n\t\t\tpatterns: [ this.queryObject ],\n\t\t} );\n\n\t\treturn wrapperQuery;\n\t}\n}\n","import QueryRepresentation from './QueryRepresentation';\nimport QueryBuilderSparqlGenerator from '@/sparql/QueryBuilderSparqlGenerator';\nimport { Generator as SparqlGenerator, SelectQuery } from 'sparqljs';\nimport QueryObjectBuilder from '@/sparql/QueryObjectBuilder';\n\nexport default function buildQuery( query: QueryRepresentation ): string {\n\tconst queryObjectBuilder = new QueryObjectBuilder( query );\n\tconst queryObject: SelectQuery = queryObjectBuilder.buildFromQueryRepresentation();\n\tconst queryBuilderSparqlGenerator = new QueryBuilderSparqlGenerator( new SparqlGenerator() );\n\treturn queryBuilderSparqlGenerator.getString( queryObject );\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"querybuilder__add-condition\"},[_c('Button',{directives:[{name:\"i18n\",rawName:\"v-i18n\",value:({msg: 'query-builder-add-condition'}),expression:\"{msg: 'query-builder-add-condition'}\"}],attrs:{\"type\":\"neutral\"},nativeOn:{\"click\":function($event){return _vm.$emit( 'add-condition', $event )}}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","enum ConditionRelation {\n\t// these values also used as part of message keys and\n\t// so any changes made to this enum have to also be reflected in en.json and qqq.json\n\tAnd = 'and',\n\tOr = 'or',\n}\n\nexport default ConditionRelation;\n","\n\n\n\n\n\n\n\n\n\n\nimport Vue from 'vue';\nimport { Button } from '@wmde/wikit-vue-components';\n\nexport default Vue.extend( {\n\tname: 'AddCondition',\n\tcomponents: {\n\t\tButton,\n\t},\n} );\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddCondition.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddCondition.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./AddCondition.vue?vue&type=template&id=499e8a00&scoped=true&\"\nimport script from \"./AddCondition.vue?vue&type=script&lang=ts&\"\nexport * from \"./AddCondition.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./AddCondition.vue?vue&type=style&index=0&id=499e8a00&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"499e8a00\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"querybuilder-limit\"},[_c('Checkbox',{staticClass:\"querybuilder-limit__checkbox\",attrs:{\"id\":\"limit\",\"checked\":_vm.checked,\"label\":_vm.$i18n('query-builder-limit-number-results-description')},on:{\"update:checked\":function($event){_vm.checked=$event}}}),_c('TextInput',{staticClass:\"querybuilder-limit__input\",attrs:{\"disabled\":!_vm.checked,\"label\":_vm.$i18n('query-builder-limit-number-screenreader-label'),\"placeholder\":_vm.$i18n('query-builder-limit-number-placeholder'),\"error\":_vm.error ? {message: _vm.$i18n(_vm.error.message), type: _vm.error.type} : null},on:{\"input\":_vm.onLimitChange},model:{value:(_vm.limit),callback:function ($$v) {_vm.limit=$$v},expression:\"limit\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import Error from '@/data-model/Error';\nimport PropertyValueRelation from '@/data-model/PropertyValueRelation';\nimport ConditionRelation from '@/data-model/ConditionRelation';\nimport ReferenceRelation from '@/data-model/ReferenceRelation';\nimport ParseResult from '@/data-access/ParseResult';\n\nexport const DEFAULT_LIMIT = 10; // CONZEPT PATCH\n\nexport default interface RootState {\n\tconditionRows: ConditionRow[];\n\terrors: Error[];\n\tlimit: number | null | undefined;\n\tuseLimit: boolean;\n\tomitLabels: boolean;\n}\n\nexport interface ItemValue {\n\tid: string;\n\tlabel: string;\n}\n\nexport type StringValue = string;\n\nexport interface QuantityValue {\n\tvalue: number;\n\tprecision?: number;\n\tunit: ItemValue | null;\n\trawUnitInput?: string;\n}\n\nexport interface DateValue {\n\tparseResult: ParseResult | null;\n\tformattedValue: string | null;\n}\n\nexport type Value = ItemValue | StringValue | QuantityValue | DateValue | null;\n\nexport interface ConditionRow {\n\tpropertyData: PropertyData;\n\tvalueData: {\n\t\tvalue: Value;\n\t\tvalueError: Error|null;\n\t};\n\tpropertyValueRelationData: {\n\t\tvalue: PropertyValueRelation;\n\t};\n\treferenceRelation: ReferenceRelation;\n\tsubclasses: boolean;\n\t// conditionRelation between the current condition and the condition above.\n\t// If there is only one condition this property = null\n\tconditionRelation: ConditionRelation | null;\n\tnegate: boolean;\n\treadonly conditionId: string;\n}\n\nexport interface PropertyData {\n\tid: string;\n\tlabel: string;\n\tdatatype: string|null;\n\tpropertyError: Error|null;\n\tisPropertySet: boolean;\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from 'vue';\nimport { DEFAULT_LIMIT } from '@/store/RootState';\nimport { Checkbox, TextInput } from '@wmde/wikit-vue-components';\nimport Error from '@/data-model/Error';\n\nexport default Vue.extend( {\n\tname: 'Limit',\n\tdata() {\n\t\treturn {\n\t\t\terror: null as null | Error,\n\t\t\tlimit: String( DEFAULT_LIMIT ),\n\t\t};\n\t},\n\tcomponents: {\n\t\tCheckbox,\n\t\tTextInput,\n\t},\n\tmethods: {\n\t\tonLimitChange( value: string ): void {\n\t\t\tif ( value === '' ) {\n\t\t\t\tthis.$store.dispatch( 'setLimit', undefined );\n\t\t\t\tthis.error = {\n\t\t\t\t\ttype: 'error',\n\t\t\t\t\tmessage: 'query-builder-limit-number-error-message',\n\t\t\t\t};\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst limit = Number( value );\n\t\t\tif ( isNaN( limit ) || limit < 1 ) {\n\t\t\t\tthis.$store.dispatch( 'setLimit', null );\n\t\t\t\tthis.error = {\n\t\t\t\t\ttype: 'error',\n\t\t\t\t\tmessage: 'query-builder-limit-number-error-message',\n\t\t\t\t};\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.error = null;\n\t\t\tthis.$store.dispatch( 'setLimit', limit );\n\t\t},\n\t},\n\tmounted(): void {\n\t\tthis.limit = this.$store.getters.limit?.toString() || String( DEFAULT_LIMIT );\n\t},\n\twatch: {\n\t\tstoreLimit( newStoreLimitValue: number | null | undefined ): void {\n\t\t\tif ( this.limit === '' && newStoreLimitValue ) {\n\t\t\t\tthis.limit = String( newStoreLimitValue );\n\t\t\t\tthis.error = null;\n\t\t\t}\n\t\t},\n\t},\n\tcomputed: {\n\t\tstoreLimit(): number | null | undefined {\n\t\t\treturn this.$store.getters.limit;\n\t\t},\n\t\tchecked: {\n\t\t\tget(): boolean {\n\t\t\t\treturn this.$store.getters.useLimit;\n\t\t\t},\n\t\t\tset( value: boolean ): void {\n\t\t\t\tthis.$store.dispatch( 'setUseLimit', value );\n\t\t\t},\n\t\t},\n\t},\n} );\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Limit.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Limit.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Limit.vue?vue&type=template&id=aac5fdfa&\"\nimport script from \"./Limit.vue?vue&type=script&lang=ts&\"\nexport * from \"./Limit.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Limit.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"querybuilder-label-optout\"},[_c('Checkbox',{attrs:{\"id\":\"label-optout\",\"checked\":_vm.checked,\"label\":_vm.$i18n('query-builder-label-opt-out')},on:{\"update:checked\":function($event){_vm.checked=$event}}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\nimport Vue from 'vue';\nimport { Checkbox } from '@wmde/wikit-vue-components';\n\nexport default Vue.extend( {\n\tname: 'LabelOptout',\n\tcomputed: {\n\t\tchecked: {\n\t\t\tget(): boolean {\n\t\t\t\treturn this.$store.getters.omitLabels;\n\t\t\t},\n\t\t\tset( value: boolean ): void {\n\t\t\t\tthis.$store.dispatch( 'setOmitLabels', value );\n\t\t\t},\n\t\t},\n\t},\n\tcomponents: {\n\t\tCheckbox,\n\t},\n} );\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LabelOptout.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LabelOptout.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./LabelOptout.vue?vue&type=template&id=f18ef106&\"\nimport script from \"./LabelOptout.vue?vue&type=script&lang=ts&\"\nexport * from \"./LabelOptout.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./LabelOptout.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"querybuilder__sharable-link\"},[_vm._v(\" \"+_vm._s(_vm.$i18n('query-builder-sharable-link-text'))+\" \"),_c('Popover',{attrs:{\"reactToHover\":false,\"position\":\"end\"},scopedSlots:_vm._u([{key:\"target\",fn:function(){return [_c('Button',{attrs:{\"variant\":\"normal\",\"type\":\"neutral\",\"iconOnly\":\"\",\"aria-label\":\"Sharable link\"},nativeOn:{\"click\":function($event){return _vm.copyTextToClipboard($event)}}},[_c('Icon',{attrs:{\"type\":\"link\",\"size\":\"large\"}})],1)]},proxy:true},{key:\"default\",fn:function(){return [_vm._v(\" \"+_vm._s(_vm.$i18n('query-builder-sharable-link-message'))+\" \")]},proxy:true}])})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from 'vue';\nimport { Icon, Button, Popover } from '@wmde/wikit-vue-components';\nimport QuerySerializer from '@/serialization/QuerySerializer';\n\nexport default Vue.extend( {\n\tname: 'SharableLink',\n\tcomponents: {\n\t\tIcon,\n\t\tButton,\n\t\tPopover,\n\t},\n\tdata: function () {\n\t\treturn {\n\t\t\thref: '' as string,\n\t\t};\n\t},\n\tmethods: {\n\t\tasync copyTextToClipboard(): Promise<void> {\n\t\t\tconst querySerializer = new QuerySerializer();\n\t\t\tconst serializedQuery = querySerializer.serialize( this.$store.state );\n\t\t\tconst current = new URL( window.location.href );\n\t\t\tcurrent.searchParams.set( 'query', serializedQuery );\n\t\t\tthis.href = current.href;\n\t\t\tawait this.shortenUrl( current.href );\n\t\t\ttry {\n\t\t\t\tawait navigator.clipboard.writeText( this.href );\n\t\t\t} catch ( err ) {\n\t\t\t\t// The code might run in a context that doesn't have a clipboard API (like test).\n\t\t\t\t// Ignore and pass.\n\t\t\t}\n\t\t},\n\t\tasync shortenUrl( url: string ): Promise<void> {\n\t\t\tconst requestOptions = {\n\t\t\t\tmethod: 'POST',\n\t\t\t\theaders: {\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t},\n\t\t\t};\n\n\t\t\tconst params: { [key: string]: string } = {\n\t\t\t\taction: 'shortenurl',\n\t\t\t\tformat: 'json',\n\t\t\t\torigin: '*',\n\t\t\t\turl: url,\n\t\t\t};\n\t\t\tconst shortnerUrl = new URL( process.env.VUE_APP_URL_SHORTNER_SERVICE_URL || '' );\n\n\t\t\tfor ( const key in params ) {\n\t\t\t\tshortnerUrl.searchParams.set( key, params[ key ] );\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tconst response = await fetch( shortnerUrl.toString(), requestOptions );\n\t\t\t\tif ( response.ok ) {\n\t\t\t\t\tconst data = await response.json();\n\t\t\t\t\tthis.href = window.location.protocol + '//' +\n\t\t\t\t\t\t( data.shortenurl.shorturl || data.shortenurl.shorturlalt );\n\t\t\t\t}\n\t\t\t} catch ( err ) {\n\t\t\t\t// nothing happens here. the long url is not shortned.\n\t\t\t}\n\t\t},\n\t},\n} );\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharableLink.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharableLink.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./SharableLink.vue?vue&type=template&id=6ab07608&scoped=true&\"\nimport script from \"./SharableLink.vue?vue&type=script&lang=ts&\"\nexport * from \"./SharableLink.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./SharableLink.vue?vue&type=style&index=0&id=6ab07608&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6ab07608\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Footer from '@/components/Footer.vue';\nimport { ConditionRow } from '@/store/RootState';\nimport Vue from 'vue';\nimport { mapState } from 'vuex';\nimport { Button } from '@wmde/wikit-vue-components';\n\nimport ConditionRelationToggle from '@/components/ConditionRelationToggle.vue';\nimport QueryCondition from '@/components/QueryCondition.vue';\nimport QueryResult from '@/components/QueryResult.vue';\nimport buildQuery from '@/sparql/buildQuery';\nimport AddCondition from '@/components/AddCondition.vue';\nimport Limit from '@/components/Limit.vue';\nimport LabelOptout from '@/components/LabelOptout.vue';\nimport ConditionRelation from '@/data-model/ConditionRelation';\nimport SharableLink from '@/components/SharableLink.vue';\n\n// CONZEPT PATCH\nimport QuerySerializer from '@/serialization/QuerySerializer';\n\nexport default Vue.extend( {\n\tname: 'QueryBuilder',\n\tdata() {\n\t\treturn {\n\t\t\tencodedQuery: '',\n\t\t\tiframeRenderKey: 0,\n\t\t};\n\t},\n\tcreated() {\n\t\tthis.incrementMetric( 'main-page-loaded' );\n\t},\n\tmethods: {\n\t\tincrementMetric( metric: string ): void {\n\t\t\tthis.$store.dispatch( 'incrementMetric', metric );\n\t\t},\n\t\tasync runQuery(): Promise<void> {\n\t\t\tawait this.$store.dispatch( 'validateForm' );\n\t\t\tthis.incrementMetric( 'run-query-button' );\n\t\t\tif ( this.errors.length ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.encodedQuery = encodeURI( buildQuery( this.$store.getters.query ) );\n\n      // CONZEPT PATCH\n      let lang = 'en';\n\n      const urlParams = new URLSearchParams( window.location.search );\n\n      if ( urlParams.has( 'uselang' ) ) {\n        lang = urlParams.get( 'uselang' ) as string;\n      }\n\n      const web_url  = 'https://conze.pt/app/query/embed.html?l=' + lang + '#' + this.encodedQuery\n        .replace( '%5BAUTO_LANGUAGE%5D', lang + '%2Cen%2Ces%2Cfr%2Cde%2Cit%2Cru%2Cja%2Czh%2Cfa%2Car%2Cnl%2Cca%2Cel' )\n        .replace( '%20LIMIT', '%20ORDER%20BY%20%3FitemLabel%0A%20OFFSET%200%20LIMIT' )\n      ;\n\n      const json_url = 'https://query.wikidata.org/sparql?format=json&query=' + this.encodedQuery\n        .replace( '%5BAUTO_LANGUAGE%5D', lang + '%2Cen%2Ces%2Cfr%2Cde%2Cit%2Cru%2Cja%2Czh%2Cfa%2Car%2Cnl%2Cca%2Cel' )\n        .replace( '%20LIMIT', '%20ORDER%20BY%20%3FitemLabel%0A%20OFFSET%200%20LIMIT' )\n      ;\n\n      const querySerializer = new QuerySerializer();\n      const serializedQuery = querySerializer.serialize( this.$store.state );\n      //console.log( serializedQuery );\n      //console.log( web_url );\n\n      window.top.postMessage({ event_id: 'structured-query', data: { json_url: json_url, web_url: web_url, query_json: serializedQuery } }, '*' );\n\n\t\t\t// force the iframe to rerender https://stackoverflow.com/a/48755228\n\t\t\t//this.iframeRenderKey = Math.random();\n\n      // --------------------\n\n\t\t},\n\t\tasync addCondition(): Promise<void> {\n\t\t\tawait this.$store.dispatch( 'addCondition' );\n\t\t\tsetTimeout( () => {\n\t\t\t\tdocument\n\t\t\t\t\t.getElementsByClassName( 'querybuilder__condition-wrapper--last' )[ 0 ]\n\t\t\t\t\t.scrollIntoView( { behavior: 'smooth' } );\n\n\t\t\t\tconst toggle = document\n\t\t\t\t\t.querySelectorAll( '.querybuilder__condition-relation-toggle .wikit-ToggleButton' );\n\n\t\t\t\t( toggle[ toggle.length - 1 ] as HTMLElement ).focus();\n\t\t\t} );\n\t\t},\n\t\tsetConditionRelation( value: ConditionRelation, index: number ): void {\n\t\t\tthis.$store.dispatch( 'setConditionRelation', { value, conditionIndex: index + 1 } );\n\t\t},\n\t\tisAboveOr( index: number ): boolean {\n\t\t\treturn ( index + 1 ) !== this.conditionRows.length &&\n          this.conditionRows[ index + 1 ].conditionRelation === ConditionRelation.Or;\n\t\t},\n\t\tisBelowOr( index: number ): boolean {\n\t\t\treturn index !== 0 && this.conditionRows[ index ].conditionRelation === ConditionRelation.Or;\n\t\t},\n\t},\n\tcomputed: {\n\t\tconditionRows(): ConditionRow[] {\n\t\t\treturn this.$store.getters.conditionRows;\n\t\t},\n\t\t...mapState( {\n\t\t\terrors: 'errors',\n\t\t} ),\n\t},\n\tcomponents: {\n\t\tButton,\n\t\tConditionRelationToggle,\n\t\tQueryResult,\n\t\tQueryCondition,\n\t\tAddCondition,\n\t\tLimit,\n\t\tLabelOptout,\n\t\tFooter,\n\t\tSharableLink,\n\t},\n} );\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./QueryBuilder.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./QueryBuilder.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./QueryBuilder.vue?vue&type=template&id=2e8a6ecf&\"\nimport script from \"./QueryBuilder.vue?vue&type=script&lang=ts&\"\nexport * from \"./QueryBuilder.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./QueryBuilder.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import LanguageService from '@/data-access/LanguageService';\n\nexport default abstract class AbstractLanguageService implements LanguageService {\n\tpublic getAppLanguageCode(): string {\n\t\tconst urlParams = new URLSearchParams( window.location.search );\n\n    // CONZEPT PATCH\n\t\tif ( urlParams.has( 'l' ) ) {\n\t\t\treturn urlParams.get( 'l' ) as string;\n\t\t}\n\n\t\treturn 'en';\n\t}\n\tabstract getMessagesForLangCode( code: string ): Promise<{ [key: string]: string}>;\n}\n","import AbstractLanguageService from '@/data-access/AbstractLanguageService';\nimport LanguageService from '@/data-access/LanguageService';\n\nexport default class FetchLanguageService extends AbstractLanguageService implements LanguageService {\n\tpublic async getMessagesForLangCode( code: string ): Promise<{ [ p: string ]: string }> {\n\t\ttry {\n\n      // CONZEPT PATCH\n      const responseLang = await fetch( 'https://conze.pt/app/query-builder/i18n/' + code + '.json' );\n\t\t\t//const responseLang = await fetch( 'i18n/' + code + '.json' );\n\n\t\t\treturn await responseLang.json();\n\t\t} catch ( e ) {\n\t\t\tconsole.warn( 'The language requested could not be retrieved, falling back to English' );\n\t\t\treturn Promise.resolve( {} );\n\t\t}\n\t}\n}\n","import LanguageService from '@/data-access/LanguageService';\nimport SearchEntityRepository from '@/data-access/SearchEntityRepository';\nimport ParseValueRepository from '@/data-access/ParseValueRepository';\nimport FormatValueRepository from '@/data-access/FormatValueRepository';\nimport MetricsCollector from '@/data-access/MetricsCollector';\n\nexport interface Services {\n\tsearchEntityRepository: SearchEntityRepository;\n\tparseValueRepository: ParseValueRepository;\n\tformatValueRepository: FormatValueRepository;\n\tmetricsCollector: MetricsCollector;\n\tlanguageService: LanguageService;\n}\n\nexport default class QueryBuilderServices {\n\tprivate readonly services: Partial<Services>;\n\n\tpublic constructor() {\n\t\tthis.services = {};\n\t}\n\n\tpublic set<K extends keyof Services>( key: K, service: Services[ K ] ): void {\n\t\tthis.services[ key ] = service;\n\t}\n\n\tpublic get<K extends keyof Services>( key: K ): Services[ K ] {\n\t\tif ( this.services[ key ] === undefined ) {\n\t\t\tthrow new Error( `${key} is undefined` );\n\t\t}\n\n\t\treturn this.services[ key ] as Services[ K ];\n\t}\n}\n","export default class TechnicalProblem extends Error {}\n","import SearchEntityRepository from '@/data-access/SearchEntityRepository';\nimport SearchResult from '@/data-access/SearchResult';\nimport TechnicalProblem from '@/data-access/errors/TechnicalProblem';\n\nexport default class FetchSearchEntityRepository implements SearchEntityRepository {\n\tprivate readonly forLanguageCode: string;\n\tprivate readonly endpoint: string;\n\n\tpublic constructor( languageCode: string, endpoint: string ) {\n\t\tthis.forLanguageCode = languageCode;\n\t\tthis.endpoint = endpoint;\n\t}\n\n\tprivate async searchEntities( searchString: string, entityType: string, limit?: number, offset?: number ):\n\tPromise<SearchResult[]> {\n\t\tif ( !searchString ) {\n\t\t\tthrow new Error( 'The parameter searchString must not be empty!' );\n\t\t}\n\t\tconst params: { [key: string]: string } = {\n\t\t\taction: 'wbsearchentities',\n\t\t\tsearch: searchString,\n\t\t\tlanguage: this.forLanguageCode,\n\t\t\tuselang: this.forLanguageCode,\n\t\t\ttype: entityType,\n\t\t\tformat: 'json',\n\t\t\tformatversion: '2',\n\t\t\terrorformat: 'plaintext',\n\t\t\torigin: '*',\n\t\t};\n\t\tif ( limit ) {\n\t\t\tparams.limit = `${limit}`;\n\t\t}\n\t\tif ( offset ) {\n\t\t\tparams.continue = `${offset}`;\n\t\t}\n\n\t\tconst url = new URL( this.endpoint );\n\t\tfor ( const key in params ) {\n\t\t\turl.searchParams.set( key, params[ key ] );\n\t\t}\n\t\tlet response: Response;\n\t\ttry {\n\t\t\tresponse = await fetch( url.toString() );\n\t\t} catch ( e ) {\n\t\t\tthrow new TechnicalProblem( 'Network error' );\n\t\t}\n\n\t\tif ( !response.ok ) {\n\t\t\tthrow new TechnicalProblem( `${response.status}: ${response.statusText}` );\n\t\t}\n\n\t\tconst data = await response.json();\n\n\t\treturn data.search;\n\t}\n\n\tpublic searchProperties( searchString: string, limit?: number, offset?: number ): Promise<SearchResult[]> {\n\t\treturn this.searchEntities( searchString, 'property', limit, offset );\n\t}\n\n\tpublic searchItemValues( searchString: string, limit?: number, offset?: number ): Promise<SearchResult[]> {\n\t\treturn this.searchEntities( searchString, 'item', limit, offset );\n\t}\n}\n","export default class PrecisionError extends Error {\n\tpublic constructor() {\n\t\tsuper();\n\n\t\tthis.message = 'Precision not supported. Supported precisions: years, months, days';\n\t\tthis.name = 'PrecisionError';\n\t}\n}\n","import ParseValueRepository from '@/data-access/ParseValueRepository';\nimport ParseResult from '@/data-access/ParseResult';\nimport TechnicalProblem from '@/data-access/errors/TechnicalProblem';\nimport PrecisionError from '@/data-access/errors/PrecisionError';\n\nexport default class FetchParseValueRepository implements ParseValueRepository {\n\tprivate readonly endpoint: string;\n\n\tpublic constructor( endpoint: string ) {\n\t\tthis.endpoint = endpoint;\n\t}\n\n\tpublic async parseValues( values: string[], datatype: string ):\n\tPromise<ParseResult[]> {\n\t\tif ( !values ) {\n\t\t\tthrow new Error( 'The parameter values must not be empty!' );\n\t\t}\n\n\t\t// NOTE: remove this line if/when we decide to supported with multiple values.\n\t\tif ( values.length > 1 ) {\n\t\t\tthrow new Error( 'only one value is supported.' );\n\t\t}\n\n\t\tif ( !datatype ) {\n\t\t\tthrow new Error( 'The parameter datatype must not be empty!' );\n\t\t}\n\n\t\tconst concatinateValues = values.join( '|' );\n\n\t\tconst params: { [key: string]: string } = {\n\t\t\taction: 'wbparsevalue',\n\t\t\tvalues: concatinateValues,\n\t\t\tdatatype: datatype,\n\t\t\tvalidate: 'true',\n\t\t\tformat: 'json',\n\t\t\tformatversion: '2',\n\t\t\terrorformat: 'plaintext',\n\t\t\torigin: '*',\n\t\t};\n\n\t\tconst url = new URL( this.endpoint );\n\t\tfor ( const key in params ) {\n\t\t\turl.searchParams.set( key, params[ key ] );\n\t\t}\n\t\tlet response: Response;\n\t\ttry {\n\t\t\tresponse = await fetch( url.toString() );\n\t\t} catch ( e ) {\n\t\t\tthrow new TechnicalProblem( 'Network error' );\n\t\t}\n\n\t\tif ( !response.ok ) {\n\t\t\tthrow new TechnicalProblem( `${response.status}: ${response.statusText}` );\n\t\t}\n\n\t\tconst data = await response.json();\n\n\t\tif ( data.errors ) {\n\t\t\tthrow new TechnicalProblem( this.extractPlaintextErrorMessageFromData( data ) );\n\t\t}\n\n\t\tconst results = data.results;\n\n\t\tif ( results[ 0 ].value && results[ 0 ].value.precision < 9 ) {\n\t\t\tthrow new PrecisionError();\n\t\t}\n\n\t\treturn results;\n\t}\n\n\tprivate extractPlaintextErrorMessageFromData( data: { errors: { code: string; text: string }[] } ): string {\n\t\tif ( data.errors[ 0 ].code === 'wikibase-parse-error-time' ) {\n\t\t\treturn data.errors[ 0 ].text;\n\t\t}\n\t\treturn `${data.errors[ 0 ].code}: ${data.errors[ 0 ].text}`;\n\t}\n}\n","import FormatValueRepository from '@/data-access/FormatValueRepository';\nimport ParseResult from '@/data-access/ParseResult';\nimport TechnicalProblem from '@/data-access/errors/TechnicalProblem';\n\nexport default class FetchFormatValueRepository implements FormatValueRepository {\n\tprivate readonly forLanguageCode: string;\n\tprivate readonly endpoint: string;\n\n\tpublic constructor( languageCode: string, endpoint: string ) {\n\t\tthis.forLanguageCode = languageCode;\n\t\tthis.endpoint = endpoint;\n\t}\n\n\tpublic async formatValue( dataValue: ParseResult, propertyId: string ):\n\tPromise<string> {\n\t\tconst params: { [key: string]: string } = {\n\t\t\taction: 'wbformatvalue',\n\t\t\tgenerate: 'text/plain',\n\t\t\tdatavalue: JSON.stringify( dataValue ),\n\t\t\tproperty: propertyId,\n\t\t\tuselang: this.forLanguageCode,\n\t\t\toptions: JSON.stringify( { lang: this.forLanguageCode } ),\n\t\t\tformat: 'json',\n\t\t\tformatversion: '2',\n\t\t\terrorformat: 'plaintext',\n\t\t\torigin: '*',\n\t\t};\n\n\t\tconst url = new URL( this.endpoint );\n\t\tfor ( const key in params ) {\n\t\t\turl.searchParams.set( key, params[ key ] );\n\t\t}\n\t\tlet response: Response;\n\t\ttry {\n\t\t\tresponse = await fetch( url.toString() );\n\t\t} catch ( e ) {\n\t\t\tthrow new TechnicalProblem( 'Network error' );\n\t\t}\n\n\t\tif ( !response.ok ) {\n\t\t\tthrow new TechnicalProblem( `${response.status}: ${response.statusText}` );\n\t\t}\n\n\t\tconst data = await response.json();\n\n\t\tif ( data.error ) {\n\t\t\tthrow new TechnicalProblem( `${data.error.code}: ${data.error.info}` );\n\t\t}\n\n\t\treturn data.result;\n\t}\n}\n","import MetricsCollector from '@/data-access/MetricsCollector';\n\nexport default class StatsvMetricsCollector implements MetricsCollector {\n\tprivate readonly prefix: string;\n\tprivate readonly endpoint: string | null;\n\n\tpublic constructor( prefix: string, endpoint: string | null ) {\n\t\tthis.prefix = prefix;\n\t\tthis.endpoint = endpoint;\n\t}\n\n\tpublic increment( metric: string ): void {\n\t\tif ( !this.endpoint ) {\n\t\t\treturn;\n\t\t}\n\t\tStatsvMetricsCollector.sendBacon( this.endpoint + '?' + this.prefix + '.' + metric + '=1c' );\n\t}\n\n\tpublic static sendBacon( url: string ): void {\n\t\tif ( navigator.sendBeacon ) {\n\t\t\ttry {\n\t\t\t\tnavigator.sendBeacon( url );\n\t\t\t} catch ( e ) {}\n\t\t} else {\n\t\t\tdocument.createElement( 'img' ).src = url;\n\t\t}\n\t}\n}\n","import FetchLanguageService from '@/data-access/FetchLanguageService';\nimport QueryBuilderServices from '@/QueryBuilderServices';\nimport FetchSearchEntityRepository from '@/data-access/FetchSearchEntityRepository';\nimport FetchParseValueRepository from '@/data-access/FetchParseValueRepository';\nimport FetchFormatValueRepository from '@/data-access/FetchFormatValueRepository';\nimport StatsvMetricsCollector from '@/data-access/StatsvMetricsCollector';\n\nconst services = new QueryBuilderServices();\nconst languageService = new FetchLanguageService();\nservices.set( 'languageService', languageService );\nservices.set( 'searchEntityRepository', new FetchSearchEntityRepository(\n\tlanguageService.getAppLanguageCode(),\n\tprocess.env.VUE_APP_WIKIBASE_API_URL || '',\n) );\nservices.set( 'parseValueRepository', new FetchParseValueRepository(\n\tprocess.env.VUE_APP_WIKIBASE_API_URL || '',\n) );\nservices.set( 'formatValueRepository', new FetchFormatValueRepository(\n\tlanguageService.getAppLanguageCode(),\n\tprocess.env.VUE_APP_WIKIBASE_API_URL || '',\n) );\n\nservices.set( 'metricsCollector', new StatsvMetricsCollector(\n\t'Wikidata.query-builder',\n\tprocess.env.VUE_APP_STATSV_ENDPOINT || null,\n) );\n\nexport default services;\n","\n\n\n\n\n\n\nimport Vue from 'vue';\nimport QueryBuilder from '@/components/QueryBuilder.vue';\nimport i18n from 'vue-banana-i18n';\nimport services from '@/ServicesFactory';\n\nif ( process.env.NODE_ENV === 'production' ) {\n\t// TODO: figure out how to disable the jest error that fails the unit tests if this is available during testing\n\tVue.config.errorHandler = function () {\n\t\tservices.get( 'metricsCollector' ).increment( 'errors' );\n\t};\n}\n\nconst languageService = services.get( 'languageService' );\n\nexport default Vue.extend( {\n\tdata() {\n\t\treturn {\n\t\t\tisi18nLoaded: false as boolean,\n\t\t\tlang: languageService.getAppLanguageCode(),\n\t\t\ttextDirection: '',\n\t\t};\n\t},\n\tcreated(): void {\n\t\tthis.fetchi18n();\n\t\tthis.reconstructStateFromURL();\n\t},\n\tupdated() {\n\t\tconst sampleElement = document.getElementById( 'directionSample' );\n\t\tif ( !sampleElement ) {\n\t\t\treturn;\n\t\t}\n\t\tthis.textDirection = getComputedStyle( sampleElement as Element ).direction;\n\t},\n\tmethods: {\n\t\tasync fetchi18n(): Promise<void> {\n\t\t\tconst messages: { [ key: string ]: { [ key: string ]: string } } = {\n\t\t\t\ten: await languageService.getMessagesForLangCode( 'en' ),\n\t\t\t};\n\n\t\t\tif ( this.lang !== 'en' ) {\n\t\t\t\tmessages[ this.lang ] = await languageService.getMessagesForLangCode( this.lang );\n\t\t\t}\n\n\t\t\tVue.use( i18n, {\n\t\t\t\tlocale: this.lang,\n\t\t\t\tmessages,\n\t\t\t\twikilinks: true,\n\t\t\t} );\n\t\t\tthis.isi18nLoaded = true;\n\t\t},\n\t\treconstructStateFromURL(): void {\n\t\t\tconst urlParams = new URLSearchParams( window.location.search );\n\t\t\tif ( !urlParams.has( 'query' ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.$store.dispatch( 'parseState', urlParams.get( 'query' ) );\n\t\t},\n\t},\n\tname: 'App',\n\tcomponents: {\n\t\tQueryBuilder,\n\t},\n} );\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--14-0!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--14-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--14-0!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--14-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=3adbfcb6&\"\nimport script from \"./App.vue?vue&type=script&lang=ts&\"\nexport * from \"./App.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","const allowedDataTypes = [\n\t/* string typed datatypes */\n\t'string',\n\t'external-id',\n\t'wikibase-item',\n\t'quantity',\n\t'time',\n\t/* other (non-string) typed datatypes - TODO: add support\n\t'commonsMedia',\n\t'geo-shape',\n\t'tabular-data',\n\t'url',\n\t'math',\n\t'musical-notation',\n\t'globe-coordinate',\n\t'monolingualtext',\n    'wikibase-property',\n\t'wikibase-lexeme',\n\t'wikibase-form',\n    'wikibase-sense',\n    */\n];\n\nexport default allowedDataTypes;\n","import Error from '@/data-model/Error';\n\nexport default class BaseValidator {\n\n\tpublic static readonly VALUE_MISSING_ERROR: Error = {\n\t\tmessage: 'query-builder-result-error-missing-value',\n\t\ttype: 'error',\n\t};\n\n\tpublic validateValue( value: unknown ): null | Error {\n\t\tif ( !value ) {\n\t\t\treturn BaseValidator.VALUE_MISSING_ERROR;\n\t\t}\n\t\treturn null;\n\t}\n}\n","import Error from '@/data-model/Error';\nimport BaseValidator from '@/form/BaseValidator';\nimport { DateValue } from '@/store/RootState';\n\nexport default class DateValidator {\n\tpublic validateValue( value: DateValue | null ): null | Error {\n\t\tif ( !value || ( !value.parseResult && !value.formattedValue ) ) {\n\t\t\treturn BaseValidator.VALUE_MISSING_ERROR;\n\t\t}\n\t\tif ( !value.parseResult && value.formattedValue ) {\n\t\t\treturn { type: 'error', message: value.formattedValue };\n\t\t}\n\t\treturn null;\n\t}\n}\n","import Property from '@/data-model/Property';\nimport BaseValidator from '@/form/BaseValidator';\nimport ConditionValues, { ConditionErrors } from '@/form/ConditionValues';\nimport PropertyValueRelation from '@/data-model/PropertyValueRelation';\nimport Error from '@/data-model/Error';\nimport DateValidator from '@/form/DateValidator';\nimport QuantityValidator from '@/form/QuantityValidator';\nimport { DateValue, QuantityValue, Value } from '@/store/RootState';\n\nexport interface ValidationResult {\n\tformErrors: Error[];\n\tfieldErrors: ConditionErrors[];\n}\n\nexport default class Validator {\n\tprivate readonly formValues: ConditionValues[];\n\tpublic constructor( formValues: ConditionValues[] ) {\n\t\tthis.formValues = formValues;\n\t}\n\n\tpublic validate(): ValidationResult {\n\t\tconst validationResult: ValidationResult = {\n\t\t\tformErrors: [],\n\t\t\tfieldErrors: [],\n\t\t};\n\n\t\tif ( this.isEmpty() ) {\n\t\t\tvalidationResult.formErrors.push( {\n\t\t\t\tmessage: 'query-builder-result-error-empty-form',\n\t\t\t\ttype: 'notice',\n\t\t\t} );\n\t\t\tvalidationResult.fieldErrors.push( {\n\t\t\t\tproperty: null,\n\t\t\t\tvalue: null,\n\t\t\t} );\n\t\t\treturn validationResult;\n\t\t}\n\n\t\tvalidationResult.fieldErrors = this.formValues.map(\n\t\t\t( conditionValues ) => this.validateCondition( conditionValues ),\n\t\t);\n\n\t\tif ( validationResult.fieldErrors.some( ( { property, value } ) =>\n\t\t\tproperty !== null || value !== null,\n\t\t) ) {\n\t\t\tvalidationResult.formErrors.push( {\n\t\t\t\tmessage: 'query-builder-result-error-incomplete-form',\n\t\t\t\ttype: 'error',\n\t\t\t} );\n\t\t}\n\n\t\treturn validationResult;\n\t}\n\n\tprivate validateCondition( conditionValues: ConditionValues ): ConditionErrors {\n\t\tconst fieldErrors: ConditionErrors = {\n\t\t\tproperty: null,\n\t\t\tvalue: null,\n\t\t};\n\t\tif ( !conditionValues.property?.id ) {\n\t\t\tfieldErrors.property = {\n\t\t\t\tmessage: 'query-builder-result-error-missing-property',\n\t\t\t\ttype: 'error',\n\t\t\t};\n\t\t}\n\t\tfieldErrors.value = this.validateConditionValue(\n\t\t\tconditionValues.property,\n\t\t\tconditionValues.propertyValueRelation,\n\t\t\tconditionValues.value,\n\t\t);\n\n\t\treturn fieldErrors;\n\t}\n\n\tprivate validateConditionValue(\n\t\tproperty: Property | null,\n\t\tpropertyValueRelation: PropertyValueRelation,\n\t\tvalue: Value | null,\n\t): Error | null {\n\t\tif ( propertyValueRelation === PropertyValueRelation.Regardless ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tif ( !property ) {\n\t\t\treturn ( new BaseValidator() ).validateValue( value );\n\t\t}\n\n\t\tswitch ( property.datatype ) {\n\t\t\tcase 'time':\n\t\t\t\treturn ( new DateValidator() ).validateValue( value as DateValue );\n\t\t\tcase 'quantity':\n\t\t\t\treturn ( new QuantityValidator() ).validateQuantityValue( value as QuantityValue );\n\t\t\tdefault:\n\t\t\t\treturn ( new BaseValidator() ).validateValue( value );\n\t\t}\n\t}\n\n\tprivate isEmpty(): boolean {\n\t\tif ( this.formValues.length === 0 ) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn this.formValues.length === 1 &&\n\t\t\t!this.formValues[ 0 ].property?.id &&\n\t\t\t!this.formValues[ 0 ].value;\n\t}\n}\n","export default class DeserializationError extends Error {\n}\n","import DeserializationError from '@/serialization/DeserializationError';\nimport RootState, { ConditionRow, PropertyData, Value } from '@/store/RootState';\nimport SerializedCondition, { SerializedQuantityValue,\n\tSerializedDateValue, SerializedValue } from '@/data-model/SerializedObject';\n\nexport default class QueryDeserializer {\n\tpublic deserialize( queryString: string ): RootState {\n\t\tlet queryObject;\n\t\ttry {\n\t\t\tqueryObject = JSON.parse( queryString );\n\t\t} catch ( e ) {\n\t\t\tthrow new DeserializationError( 'query URL parameter is not valid JSON' );\n\t\t}\n\t\tconst conditions: ConditionRow[] = [];\n\t\tlet conditionId = 1;\n\t\ttry {\n\t\t\tqueryObject.conditions.forEach( ( condition: SerializedCondition ) => {\n\t\t\t\tconditions.push(\n\t\t\t\t\t{\n\t\t\t\t\t\tpropertyData: this.getPropertyData( condition ),\n\t\t\t\t\t\tvalueData: {\n\t\t\t\t\t\t\tvalue: this.getConditionValue( condition ),\n\t\t\t\t\t\t\tvalueError: null,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tpropertyValueRelationData: {\n\t\t\t\t\t\t\tvalue: condition.propertyValueRelation,\n\t\t\t\t\t\t},\n\t\t\t\t\t\treferenceRelation: condition.referenceRelation,\n\t\t\t\t\t\tsubclasses: condition.subclasses,\n\t\t\t\t\t\tconditionRelation: condition.conditionRelation,\n\t\t\t\t\t\tnegate: condition.negate,\n\t\t\t\t\t\tconditionId: conditionId.toString(),\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t\tconditionId++;\n\t\t\t} );\n\t\t\treturn {\n\t\t\t\tconditionRows: conditions,\n\t\t\t\tuseLimit: queryObject.useLimit,\n\t\t\t\tlimit: queryObject.limit,\n\t\t\t\terrors: [],\n\t\t\t\tomitLabels: queryObject.omitLabels,\n\t\t\t};\n\t\t} catch ( e ) {\n\t\t\tthrow new DeserializationError( 'invalid query URL parameter' );\n\t\t}\n\t}\n\n\tprivate getPropertyData( condition: SerializedCondition ): PropertyData {\n\t\treturn {\n\t\t\tid: condition.propertyId,\n\t\t\tlabel: condition.propertyId,\n\t\t\tdatatype: condition.propertyDataType,\n\t\t\tisPropertySet: condition.propertyId !== '',\n\t\t\tpropertyError: null,\n\t\t};\n\t}\n\n\tprivate getConditionValue( condition: SerializedCondition ): Value {\n\t\tif ( condition.value === '' || condition.value === null ) {\n\t\t\treturn null;\n\t\t}\n\t\tif ( this.isQuantityValue( condition, condition.value ) ) {\n\t\t\treturn {\n\t\t\t\tvalue: condition.value.value,\n\t\t\t\tunit: condition.value.unit ? {\n\t\t\t\t\tid: condition.value.unit,\n\t\t\t\t\tlabel: condition.value.unit,\n\t\t\t\t} : null,\n\t\t\t\trawUnitInput: '',\n\t\t\t};\n\t\t}\n\t\tif ( this.isDateValue( condition, condition.value ) ) {\n\t\t\treturn {\n\t\t\t\tparseResult: {\n\t\t\t\t\tvalue: {\n\t\t\t\t\t\ttime: condition.value.value,\n\t\t\t\t\t\tafter: 0,\n\t\t\t\t\t\tbefore: 0,\n\t\t\t\t\t\tcalendarmodel: '',\n\t\t\t\t\t\tprecision: condition.value.precision,\n\t\t\t\t\t\ttimezone: 0,\n\t\t\t\t\t},\n\t\t\t\t\ttype: 'time',\n\t\t\t\t},\n\t\t\t\tformattedValue: condition.value.value,\n\t\t\t\tprecision: condition.value.precision,\n\t\t\t};\n\t\t}\n\t\tif ( condition.propertyDataType === 'wikibase-item' ) {\n\t\t\treturn {\n\t\t\t\tid: condition.value,\n\t\t\t\tlabel: condition.value,\n\t\t\t};\n\t\t}\n\t\treturn condition.value;\n\t}\n\n\tprivate isQuantityValue( condition: SerializedCondition, _conditionValue: SerializedValue ):\n\t\t_conditionValue is SerializedQuantityValue {\n\t\treturn condition.propertyDataType === 'quantity';\n\t}\n\n\tprivate isDateValue( condition: SerializedCondition, _conditionValue: SerializedValue ):\n\t\t_conditionValue is SerializedDateValue {\n\t\treturn condition.propertyDataType === 'time';\n\t}\n}\n","import allowedDatatypes from '@/allowedDataTypes';\nimport ConditionValues from '@/form/ConditionValues';\nimport FormatValueRepository from '@/data-access/FormatValueRepository';\nimport ParseValueRepository from '@/data-access/ParseValueRepository';\nimport Validator from '@/form/Validator';\nimport QueryDeserializer from '@/serialization/QueryDeserializer';\nimport { MenuItem } from '@wmde/wikit-vue-components/dist/components/MenuItem';\nimport { ActionContext, ActionTree } from 'vuex';\nimport RootState, { ConditionRow, DateValue, DEFAULT_LIMIT } from './RootState';\nimport SearchResult from '@/data-access/SearchResult';\nimport Error from '@/data-model/Error';\nimport PropertyValueRelation from '@/data-model/PropertyValueRelation';\nimport MetricsCollector from '@/data-access/MetricsCollector';\nimport SearchEntityRepository from '@/data-access/SearchEntityRepository';\nimport SearchOptions from '@/data-access/SearchOptions';\nimport ConditionRelation from '@/data-model/ConditionRelation';\nimport ReferenceRelation from '@/data-model/ReferenceRelation';\n\nexport default (\n\tsearchEntityRepository: SearchEntityRepository,\n\tmetricsCollector: MetricsCollector,\n\tparseValueRepository: ParseValueRepository,\n\tformatValueRepository: FormatValueRepository,\n): ActionTree<RootState, RootState> => ( {\n\tasync searchProperties(\n\t\t_context: ActionContext<RootState, RootState>,\n\t\toptions: SearchOptions ): Promise<SearchResult[]> {\n\t\tconst searchResults = await searchEntityRepository.searchProperties(\n\t\t\toptions.search,\n\t\t\toptions.limit,\n\t\t\toptions.offset,\n\t\t);\n\t\treturn searchResults.map( ( searchResult: MenuItem & SearchResult ) => {\n\t\t\tif ( !allowedDatatypes.includes( searchResult.datatype ) ) {\n\t\t\t\tsearchResult.tag = 'query-builder-property-lookup-limited-support-tag';\n\t\t\t}\n\t\t\treturn searchResult;\n\t\t} );\n\t},\n\tasync searchItemValues(\n\t\t_context: ActionContext<RootState, RootState>,\n\t\toptions: SearchOptions ): Promise<SearchResult[]> {\n\t\t// check for empty\n\t\treturn await searchEntityRepository.searchItemValues(\n\t\t\toptions.search,\n\t\t\toptions.limit,\n\t\t\toptions.offset,\n\t\t);\n\t},\n\tasync updateDateValue(\n\t\tcontext: ActionContext<RootState, RootState>,\n\t\tpayload: { rawInput: string; conditionIndex: number },\n\t): Promise<void> {\n\t\tcontext.commit( 'clearValue', payload.conditionIndex );\n\t\tcontext.commit(\n\t\t\t'clearFieldErrors',\n\t\t\t{\n\t\t\t\tconditionIndex: payload.conditionIndex,\n\t\t\t\terrorsToClear: 'value',\n\t\t\t},\n\t\t);\n\n\t\tlet parsedValue;\n\t\ttry {\n\t\t\t[ parsedValue ] = await parseValueRepository.parseValues( [ payload.rawInput ], 'time' );\n\t\t} catch ( e ) {\n\t\t\tconst errorDateValue: DateValue = {\n\t\t\t\tparseResult: null,\n\t\t\t\tformattedValue: e.message,\n\t\t\t};\n\n\t\t\tcontext.commit( 'setValue', { value: errorDateValue, conditionIndex: payload.conditionIndex } );\n\t\t\tcontext.commit(\n\t\t\t\t'setFieldErrors',\n\t\t\t\t{\n\t\t\t\t\tindex: payload.conditionIndex,\n\t\t\t\t\terrors: {\n\t\t\t\t\t\tvalueError: { type: 'error', message: e.message },\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\tconst propertyId = context.getters.property( payload.conditionIndex ).id;\n\t\tconst formattedValue = await formatValueRepository.formatValue( parsedValue, propertyId );\n\n\t\tconst validDateValue: DateValue = {\n\t\t\tparseResult: parsedValue,\n\t\t\tformattedValue,\n\t\t};\n\t\tcontext.commit( 'setValue', {\n\t\t\tvalue: validDateValue,\n\t\t\tconditionIndex: payload.conditionIndex,\n\t\t} );\n\t},\n\tupdateValue(\n\t\tcontext: ActionContext<RootState, RootState>,\n\t\tpayload: { value: string; conditionIndex: number } ): void {\n\t\tcontext.commit(\n\t\t\t'clearFieldErrors',\n\t\t\t{\n\t\t\t\tconditionIndex: payload.conditionIndex,\n\t\t\t\terrorsToClear: 'value',\n\t\t\t},\n\t\t);\n\t\tconst datatype = context.getters.datatype( payload.conditionIndex );\n\t\tif ( datatype === 'time' && payload.value ) {\n\t\t\tcontext.dispatch( 'updateDateValue', { rawInput: payload.value, conditionIndex: payload.conditionIndex } );\n\t\t\treturn;\n\t\t}\n\t\tcontext.commit( 'setValue', payload );\n\t},\n\tunsetProperty( context: ActionContext<RootState, RootState>, conditionIndex: number ): void {\n\t\tcontext.commit( 'unsetProperty', conditionIndex );\n\t\tcontext.commit(\n\t\t\t'clearFieldErrors',\n\t\t\t{\n\t\t\t\tconditionIndex,\n\t\t\t\terrorsToClear: 'property',\n\t\t\t},\n\t\t);\n\t},\n\tupdateProperty( context: ActionContext<RootState, RootState>,\n\t\tpayload: { property: { label: string; id: string; datatype: string }; conditionIndex: number } ): void {\n\n\t\tconst oldDatatype = context.getters.datatype( payload.conditionIndex );\n\t\tif ( oldDatatype && oldDatatype !== payload.property.datatype ) {\n\t\t\tcontext.commit( 'clearValue', payload.conditionIndex );\n\t\t}\n\n\t\tcontext.commit( 'setProperty', payload );\n\t\tif ( !allowedDatatypes.includes( payload.property.datatype ) ) {\n\t\t\tcontext.dispatch( 'setConditionAsLimitedSupport', payload.conditionIndex );\n\t\t} else {\n\t\t\tcontext.commit(\n\t\t\t\t'clearFieldErrors',\n\t\t\t\t{\n\t\t\t\t\tconditionIndex: payload.conditionIndex,\n\t\t\t\t\terrorsToClear: 'property',\n\t\t\t\t},\n\t\t\t);\n\t\t}\n\t},\n\tupdatePropertyValueRelation( context: ActionContext<RootState, RootState>,\n\t\tpayload: { propertyValueRelation: PropertyValueRelation; conditionIndex: number } ): void {\n\t\tcontext.commit( 'setPropertyValueRelation', payload );\n\t},\n\tsetReferenceRelation( context: ActionContext<RootState, RootState>,\n\t\tpayload: { referenceRelation: ReferenceRelation; conditionIndex: number } ): void {\n\t\tcontext.commit( 'setReferenceRelation', payload );\n\t},\n\tsetNegate(\n\t\tcontext: ActionContext<RootState, RootState>,\n\t\tpayload: { value: boolean; conditionIndex: number } ): void {\n\t\tcontext.commit( 'setNegate', payload );\n\t},\n\tsetLimit( context: ActionContext<RootState, RootState>, limit: number ): void {\n\t\tcontext.commit( 'setLimit', limit );\n\t},\n\tsetUseLimit( context: ActionContext<RootState, RootState>, useLimit: boolean ): void {\n\t\tcontext.commit( 'setUseLimit', useLimit );\n\t},\n\tsetOmitLabels( context: ActionContext<RootState, RootState>, omitLabels: boolean ): void {\n\t\tcontext.commit( 'setOmitLabels', omitLabels );\n\t},\n\tsetSubclasses( context: ActionContext<RootState, RootState>,\n\t\tpayload: { subclasses: boolean; conditionIndex: number } ): void {\n\t\tcontext.commit( 'setSubclasses', payload );\n\t},\n\tsetConditionRelation(\n\t\tcontext: ActionContext<RootState, RootState>,\n\t\tpayload: { value: ConditionRelation | null; conditionIndex: number } ): void {\n\t\tcontext.commit( 'setConditionRelation', payload );\n\t},\n\tsetErrors( context: ActionContext<RootState, RootState>, errors: Error[] ): void {\n\t\tcontext.commit( 'setErrors', errors );\n\t},\n\tincrementMetric( context: ActionContext<RootState, RootState>, metric: string ): void {\n\t\tmetricsCollector.increment( metric );\n\t},\n\taddCondition( context: ActionContext<RootState, RootState> ): void {\n\t\tcontext.commit( 'addCondition' );\n\t},\n\tremoveCondition( context: ActionContext<RootState, RootState>, conditionIndex: number ): void {\n\t\tcontext.commit( 'removeCondition', conditionIndex );\n\t},\n\tsetConditionAsLimitedSupport( context: ActionContext<RootState, RootState>, conditionIndex: number ): void {\n\t\tcontext.dispatch(\n\t\t\t'updatePropertyValueRelation',\n\t\t\t{ propertyValueRelation: PropertyValueRelation.Regardless, conditionIndex },\n\t\t);\n\t\tcontext.dispatch( 'updateValue', { value: null, conditionIndex } );\n\t\tcontext.commit(\n\t\t\t'setFieldErrors',\n\t\t\t{\n\t\t\t\tindex: conditionIndex,\n\t\t\t\terrors: {\n\t\t\t\t\tpropertyError: {\n\t\t\t\t\t\ttype: 'warning',\n\t\t\t\t\t\tmessage: 'query-builder-property-lookup-limited-support-note',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t);\n\t},\n\tvalidateForm( context: ActionContext<RootState, RootState> ): void {\n\n\t\tconst validator = new Validator(\n\t\t\tcontext.rootState.conditionRows.map( ( condition: ConditionRow ): ConditionValues => {\n\t\t\t\t// TODO: refactor ConditionValues to match ConditionRow and remove this mapping\n\t\t\t\treturn {\n\t\t\t\t\tproperty: condition.propertyData.isPropertySet ? condition.propertyData : null,\n\t\t\t\t\tvalue: condition.valueData.value,\n\t\t\t\t\tpropertyValueRelation: condition.propertyValueRelationData.value,\n\t\t\t\t};\n\t\t\t} ),\n\t\t);\n\t\tconst validationResult = validator.validate();\n\t\tcontext.commit( 'setErrors', validationResult.formErrors );\n\n\t\t// set field errors for each row\n\t\tvalidationResult.fieldErrors.forEach( ( errors, conditionIndex ) => {\n\t\t\tcontext.commit(\n\t\t\t\t'setFieldErrors',\n\t\t\t\t{\n\t\t\t\t\tindex: conditionIndex,\n\t\t\t\t\terrors: {\n\t\t\t\t\t\tpropertyError: errors.property,\n\t\t\t\t\t\tvalueError: errors.value,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t);\n\t\t} );\n\n\t\t// re-set limited support warning again where applicable\n\t\tcontext.rootState.conditionRows.forEach( ( conditionRow, index ) => {\n\t\t\tconst datatype = conditionRow.propertyData?.datatype;\n\t\t\tif ( datatype && !allowedDatatypes.includes( datatype ) ) {\n\t\t\t\tcontext.dispatch( 'setConditionAsLimitedSupport', index );\n\t\t\t}\n\t\t} );\n\n\t\tcontext.dispatch( 'validateLimit' );\n\t},\n\tvalidateLimit( context: ActionContext<RootState, RootState> ): void {\n\t\tif ( context.rootState.limit === undefined ) {\n\t\t\tcontext.commit( 'setLimit', DEFAULT_LIMIT );\n\t\t\treturn;\n\t\t}\n\t\tif ( context.rootState.useLimit && context.rootState.limit === null ) {\n\t\t\tcontext.commit( 'setErrors', [\n\t\t\t\t{ type: 'error', message: 'query-builder-result-error-incomplete-form' },\n\t\t\t] );\n\t\t\treturn;\n\t\t}\n\t},\n\tparseState( context: ActionContext<RootState, RootState>, payload: string ): void {\n\t\tconst deserializer = new QueryDeserializer();\n\t\ttry {\n\t\t\tconst rootState = deserializer.deserialize( payload );\n\t\t\tcontext.commit( 'setState', rootState );\n\t\t} catch ( e ) {\n\t\t\t// do nothing if parameter is invalid\n\t\t}\n\t},\n} );\n","import RootState from './RootState';\nimport Property from '@/data-model/Property';\nimport PropertyValueRelation from '@/data-model/PropertyValueRelation';\nimport Error from '@/data-model/Error';\nimport { getFreshConditionRow } from './index';\nimport ConditionRelation from '@/data-model/ConditionRelation';\nimport ReferenceRelation from '@/data-model/ReferenceRelation';\n\nexport default {\n\tsetValue( state: RootState, payload: { value: string; conditionIndex: number } ): void {\n\t\tstate.conditionRows[ payload.conditionIndex ].valueData.value = payload.value;\n\t},\n\tclearValue( state: RootState, conditionIndex: number ): void {\n\t\tstate.conditionRows[ conditionIndex ].valueData.value = null;\n\t},\n\tsetProperty( state: RootState, payload: { property: Property | null; conditionIndex: number } ): void {\n\t\tstate.conditionRows[ payload.conditionIndex ].propertyData = {\n\t\t\t...state.conditionRows[ payload.conditionIndex ].propertyData,\n\t\t\t...payload.property,\n\t\t};\n\t\tstate.conditionRows[ payload.conditionIndex ].propertyData.isPropertySet = true;\n\t},\n\tsetNegate( state: RootState, payload: { value: boolean; conditionIndex: number } ): void {\n\t\tstate.conditionRows[ payload.conditionIndex ].negate = payload.value;\n\t},\n\tunsetProperty( state: RootState, conditionIndex: number ): void {\n\t\tstate.conditionRows[ conditionIndex ].propertyData.isPropertySet = false;\n\t},\n\tsetPropertyValueRelation( state: RootState,\n\t\tpayload: { propertyValueRelation: PropertyValueRelation; conditionIndex: number } ): void {\n\t\tstate.conditionRows[ payload.conditionIndex ].propertyValueRelationData.value = payload.propertyValueRelation;\n\t},\n\tsetReferenceRelation( state: RootState,\n\t\tpayload: { referenceRelation: ReferenceRelation; conditionIndex: number } ): void {\n\t\tstate.conditionRows[ payload.conditionIndex ].referenceRelation = payload.referenceRelation;\n\t},\n\tsetLimit( state: RootState, limit: number | null | undefined ): void {\n\t\tstate.limit = limit;\n\t},\n\tsetUseLimit( state: RootState, useLimit: boolean ): void {\n\t\tstate.useLimit = useLimit;\n\t},\n\tsetOmitLabels( state: RootState, omitLabels: boolean ): void {\n\t\tstate.omitLabels = omitLabels;\n\t},\n\tsetSubclasses( state: RootState, payload: { subclasses: boolean; conditionIndex: number } ): void {\n\t\tstate.conditionRows[ payload.conditionIndex ].subclasses = payload.subclasses;\n\t},\n\tsetConditionRelation( state: RootState, payload: { value: ConditionRelation; conditionIndex: number } ): void {\n\t\tstate.conditionRows[ payload.conditionIndex ].conditionRelation = payload.value;\n\t},\n\tsetErrors( state: RootState, errors: Error[] ): void {\n\t\tstate.errors = errors;\n\t},\n\taddCondition( state: RootState ): void {\n\t\tstate.conditionRows.push( getFreshConditionRow( state.conditionRows.length === 0 ) );\n\t},\n\tremoveCondition( state: RootState, conditionIndex: number ): void {\n\t\tstate.conditionRows.splice( conditionIndex, 1 );\n\t\tif ( state.conditionRows.length === 1 ) {\n\t\t\tstate.conditionRows[ 0 ].conditionRelation = null;\n\t\t}\n\t},\n\tsetFieldErrors(\n\t\tstate: RootState,\n\t\tpayload: {\n\t\t\tindex: number;\n\t\t\terrors: {\n\t\t\t\tpropertyError?: Error|null;\n\t\t\t\tvalueError?: Error|null;\n\t\t\t};\n\t\t},\n\t): void {\n\t\tif ( payload.errors.propertyError !== undefined ) {\n\t\t\tstate.conditionRows[ payload.index ].propertyData.propertyError = payload.errors.propertyError;\n\t\t}\n\t\tif ( payload.errors.valueError !== undefined ) {\n\t\t\tstate.conditionRows[ payload.index ].valueData.valueError = payload.errors.valueError;\n\t\t}\n\t},\n\tclearFieldErrors(\n\t\tstate: RootState,\n\t\tpayload: {\n\t\t\tconditionIndex: number;\n\t\t\terrorsToClear: 'property'|'value'|'both';\n\t\t},\n\t): void {\n\t\tif ( payload.errorsToClear === 'property' || payload.errorsToClear === 'both' ) {\n\t\t\tstate.conditionRows[ payload.conditionIndex ].propertyData.propertyError = null;\n\t\t}\n\t\tif ( payload.errorsToClear === 'value' || payload.errorsToClear === 'both' ) {\n\t\t\tstate.conditionRows[ payload.conditionIndex ].valueData.valueError = null;\n\t\t}\n\t},\n\tsetState( state: RootState, payload: RootState ): void {\n\t\tObject.assign( state, payload );\n\t},\n};\n","import allowedDatatypes from '@/allowedDataTypes';\nimport RootState, { ConditionRow, DEFAULT_LIMIT, ItemValue, QuantityValue,\n\tStringValue, DateValue, Value } from './RootState';\nimport QueryRepresentation, { ConditionValue } from '@/sparql/QueryRepresentation';\nimport Property from '@/data-model/Property';\nimport Error from '@/data-model/Error';\nimport PropertyValueRelation from '@/data-model/PropertyValueRelation';\nimport ConditionRelation from '@/data-model/ConditionRelation';\nimport ReferenceRelation from '@/data-model/ReferenceRelation';\n\nfunction getQueryValueFromStoreValue( datatype: string, storeValue: Value ): ConditionValue {\n\tif ( storeValue === null ) {\n\t\treturn '';\n\t}\n\tif ( datatype === 'wikibase-item' ) {\n\t\treturn ( storeValue as ItemValue ).id;\n\t}\n\tif ( datatype === 'quantity' ) {\n\t\treturn {\n\t\t\tvalue: ( storeValue as QuantityValue ).value,\n\t\t\tunit: ( storeValue as QuantityValue ).unit?.id || null,\n\t\t};\n\t}\n\tif ( datatype === 'time' ) {\n\t\tconst dateValue = storeValue as DateValue;\n\t\tif ( dateValue.parseResult === null ) {\n\t\t\tthrow new Error( 'invalid time value' );\n\t\t}\n\t\treturn {\n\t\t\tvalue: dateValue.parseResult.value.time,\n\t\t\tprecision: dateValue.parseResult.value.precision,\n\t\t};\n\t}\n\treturn storeValue as StringValue;\n}\n\nexport default {\n\tquery( rootState: RootState ): QueryRepresentation {\n\t\treturn {\n\t\t\tconditions: rootState.conditionRows.map( ( condition ) => {\n\t\t\t\tif ( condition.propertyData.datatype === null ) {\n\t\t\t\t\tthrow new Error( 'missing datatype!' );\n\t\t\t\t}\n\t\t\t\treturn {\n\t\t\t\t\tpropertyId: condition.propertyData.id,\n\t\t\t\t\tvalue: getQueryValueFromStoreValue( condition.propertyData.datatype, condition.valueData.value ),\n\t\t\t\t\treferenceRelation: condition.referenceRelation,\n\t\t\t\t\tpropertyValueRelation: condition.propertyValueRelationData.value,\n\t\t\t\t\tdatatype: condition.propertyData.datatype,\n\t\t\t\t\tsubclasses: condition.subclasses,\n\t\t\t\t\tconditionRelation: condition.conditionRelation,\n\t\t\t\t\tnegate: condition.negate,\n\t\t\t\t};\n\t\t\t} ),\n\t\t\t...rootState.useLimit && { limit: rootState.limit ?? DEFAULT_LIMIT },\n\t\t\tomitLabels: rootState.omitLabels,\n\t\t};\n\t},\n\tconditionRows( rootState: RootState ): ConditionRow[] {\n\t\treturn rootState.conditionRows;\n\t},\n\tproperty( rootState: RootState ) {\n\t\treturn ( conditionIndex: number ): ( Property | null ) => {\n\t\t\tif ( !rootState.conditionRows[ conditionIndex ].propertyData?.id ) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\treturn rootState.conditionRows[ conditionIndex ].propertyData;\n\t\t};\n\t},\n\tpropertyError( rootState: RootState ) {\n\t\treturn ( conditionIndex: number ): ( Error | null ) => {\n\t\t\treturn rootState.conditionRows[ conditionIndex ].propertyData.propertyError;\n\t\t};\n\t},\n\tdatatype( rootState: RootState ) {\n\t\treturn ( conditionIndex: number ): string | null => {\n\t\t\treturn rootState.conditionRows[ conditionIndex ].propertyData.datatype;\n\t\t};\n\t},\n\tlimitedSupport( rootState: RootState ) {\n\t\treturn ( conditionIndex: number ): boolean => {\n\t\t\tif ( !rootState.conditionRows[ conditionIndex ].propertyData.isPropertySet ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tconst datatype = rootState.conditionRows[ conditionIndex ].propertyData.datatype;\n\t\t\treturn datatype !== null && !allowedDatatypes.includes( datatype );\n\t\t};\n\t},\n\tvalue( rootState: RootState ) {\n\t\treturn ( conditionIndex: number ): Value => {\n\t\t\treturn rootState.conditionRows[ conditionIndex ].valueData.value;\n\t\t};\n\t},\n\tvalueError( rootState: RootState ) {\n\t\treturn ( conditionIndex: number ): ( Error | null ) => {\n\t\t\treturn rootState.conditionRows[ conditionIndex ].valueData.valueError;\n\t\t};\n\t},\n\tpropertyValueRelation( rootState: RootState ) {\n\t\treturn ( conditionIndex: number ): PropertyValueRelation => {\n\t\t\treturn rootState.conditionRows[ conditionIndex ].propertyValueRelationData.value;\n\t\t};\n\t},\n\treferenceRelation( rootState: RootState ) {\n\t\treturn ( conditionIndex: number ): ReferenceRelation => {\n\t\t\treturn rootState.conditionRows[ conditionIndex ].referenceRelation;\n\t\t};\n\t},\n\tnegate( rootState: RootState ) {\n\t\treturn ( conditionIndex: number ): boolean => {\n\t\t\treturn rootState.conditionRows[ conditionIndex ].negate;\n\t\t};\n\t},\n\tlimit( rootState: RootState ): number | null | undefined {\n\t\treturn rootState.limit;\n\t},\n\tuseLimit( rootState: RootState ): boolean {\n\t\treturn rootState.useLimit;\n\t},\n\tomitLabels( rootState: RootState ): boolean {\n\t\treturn rootState.omitLabels;\n\t},\n\tsubclasses( rootState: RootState ) {\n\t\treturn ( conditionIndex: number ): boolean => {\n\t\t\treturn rootState.conditionRows[ conditionIndex ].subclasses;\n\t\t};\n\t},\n\tconditionRelation( rootState: RootState ) {\n\t\treturn ( conditionIndex: number ): ConditionRelation | null => {\n\t\t\treturn rootState.conditionRows[ conditionIndex ].conditionRelation;\n\t\t};\n\t},\n\tgetErrors( rootState: RootState ): Error[] {\n\t\treturn rootState.errors;\n\t},\n};\n","import Vue from 'vue';\nimport Vuex, { Store } from 'vuex';\n\nimport createActions from './actions';\nimport mutations from './mutations';\nimport getters from './getters';\nimport QueryBuilderServices from '@/QueryBuilderServices';\nimport RootState, { ConditionRow, PropertyData } from '@/store/RootState';\nimport PropertyValueRelation from '@/data-model/PropertyValueRelation';\nimport Error from '@/data-model/Error';\nimport ConditionRelation from '@/data-model/ConditionRelation';\nimport ReferenceRelation from '@/data-model/ReferenceRelation';\n\nVue.use( Vuex );\n\nexport function newEmptyPropertyData( propertyError: Error | null = null ): PropertyData {\n\treturn {\n\t\tlabel: '',\n\t\tid: '',\n\t\tdatatype: null,\n\t\tisPropertySet: false,\n\t\tpropertyError,\n\t};\n}\n\nexport function getFreshConditionRow( isFirstCondition: boolean ): ConditionRow {\n\treturn {\n\t\tpropertyData: newEmptyPropertyData(),\n\t\tvalueData: {\n\t\t\tvalue: null,\n\t\t\tvalueError: null,\n\t\t},\n\t\tpropertyValueRelationData: {\n\t\t\tvalue: PropertyValueRelation.Matching,\n\t\t},\n\t\treferenceRelation: ReferenceRelation.Regardless,\n\t\tsubclasses: false,\n\t\tnegate: false,\n\t\tconditionRelation: isFirstCondition ? null : ConditionRelation.And,\n\t\tconditionId: `condition-id-${Math.random()}`,\n\t};\n}\n\nexport function getInitialState(): RootState {\n\treturn {\n\t\tconditionRows: [ getFreshConditionRow( true ) ],\n\t\terrors: [],\n\t\tlimit: 10, // CONZEPT PATCH\n\t\tuseLimit: true,\n\t\tomitLabels: false,\n\t};\n}\n\nexport function createStore( services: QueryBuilderServices ): Store<RootState> {\n\n\treturn new Store( {\n\t\tstate: getInitialState(),\n\t\tactions: createActions(\n\t\t\tservices.get( 'searchEntityRepository' ),\n\t\t\tservices.get( 'metricsCollector' ),\n\t\t\tservices.get( 'parseValueRepository' ),\n\t\t\tservices.get( 'formatValueRepository' ),\n\t\t),\n\t\tmutations,\n\t\tgetters,\n\t\tmodules: {},\n\t} );\n\n}\n","import Vue from 'vue';\nimport App from './App.vue';\nimport { createStore } from './store';\nimport services from '@/ServicesFactory';\n\nVue.config.productionTip = false;\n\nnew Vue( {\n\tstore: createStore( services ),\n\trender: ( h ) => h( App ),\n} ).$mount( '#app' );\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LabelOptout.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}