"use strict";let hash="",isMobile=detectMobile(),isSafari=detectSafari(),nr_of_sections=0,image_width_string="/900px-",min_image_width_for_enlarge=60,min_image_height_for_enlarge=60;window.location.hash||(window.location.hash="#_"),$(document).ready(function(){isMobile?image_width_string="/500px-":$("img").length>100&&(image_width_string="/400px-"),isMobile||window.parent.name==="infoframeSplit2"||window.parent.name==="infoframe_"?parentref=parent:parentref=parent.top,$(document).click(function(e){parentref.postMessage({event_id:"uls-close",data:{}},"*")});let t="#fbfaf9";typeof fontsize!="undefined"&&$("body").css("font-size",fontsize+"px"),$(".mw-empty-elt").remove(),$(".mw-editsection-divider").remove(),$("table.ambox").remove(),$("table.stub").remove(),$(".play-btn-large").remove(),$("a.internal[title$='.mid']").addClass("midi"),$(".noprint").not(".noprint.navbox").not('[role="presentation"]').remove(),$('.mbox-small.noprint[role="presentation"]').addClass("media-block"),$(".mw-authority-control").remove(),$("img.noviewer").parent().remove(),$(".plainlinks").remove(),$("div.hatnote:empty").remove(),$(".hatnote a").each(function(){$(this).addClass("main_template_info")}),language==="fr"?$(".bandeau-cell a").each(function(){$(this).addClass("main_template_info")}):language==="de"?$(".hauptartikel a").each(function(){$(this).addClass("main_template_info")}):language==="nl"&&$('div[role="note"] a').each(function(){$(this).addClass("main_template_info")}),$(".mbox-small.plainlinks.sistersitebox").remove(),$(".metadata.mbox-small").remove(),$("table.infoboks").addClass("infobox"),$("table.sinottico").addClass("infobox"),$("table.vertical-navbox").addClass("infobox"),isMobile||$("div#toc").remove(),$(".tocright").remove(),$("img.thumbimage").not(".mwe-math-fallback-image-inline").not(".noviewer").not(".gallery-image").not(".no-enlarge").each(function(e){$(this).unwrap()}),$("h1,h2,h3,h4,h5,h6").each(function(){$(this).find("a").remove();let e=$(this).text();e=e.replace("["," "),e=e.replace("]"," "),$(this).text(e)}),setupKeys(),setupToc(),explore.language_direction==="rtl"&&$("body").css("direction","rtl","important"),setupArticleImages(),setupLinks(),setupAudiomassLinks(),setupClicks(),$("p").not("table p").each(function(e){$(this).addClass("sid"),$(this).attr("id",e)}),setupImageClicks(),setupAudioClicks(),setupImageZoom(),setupULS(),$("div.reflist").wrap('<details class="reflist-block"></details>'),$("details.reflist-block").prepend('<summary title="show / hide references"><i class="far fa-folder-open"></i></summary>'),$(".navbox").wrap('<details class="navbox-block"></details>'),$("details.navbox-block").prepend('<summary title="show / hide navbox"><i class="far fa-folder-open"></i> navbox</summary>'),$("main.explore").css({visibility:"visible"}),isMobile||(location.hash="#"+explore.hash),addSectionTTS(),explore.autospeak&&startSpeaking(),parentref.postMessage({event_id:"page-rendered",data:{}},"*")});function setupLinks(){$("a.external").each(function(t){$(this).addClass("link")}),$("a").not("a.link.external").not("a.link.internal").each(function(t){let e=$(this).attr("href")||"",i=$(this).attr("href")||"";if(e.startsWith(explore.base+"/explore/"))$(this).addClass("link"),$(this).attr("href",e.replace("/explore/","")),i=i.replace("/explore/","");else if(e.startsWith("#"))$(this).addClass("internal hash"),i="";else if(e.startsWith("/w/index.php?title=")||e.endsWith("redlink=1")){$(this).addClass("missing-link");let a="https://"+language+".wikipedia.org"+$(this).attr("href");$(this).attr("href",a),i=""}if(i!==""){const a={type:"wikipedia",title:i,language};let n='onMiddleClick( "'+encodeURIComponent(JSON.stringify(a))+'" )';$(this).attr("onauxclick",n)}}),$("a.link.external").attr("target","_blank"),$("a.external").attr("target","_blank"),$("a.missing-link").attr("target","_blank"),(explore.linkpreview===!0||explore.linkpreview==="true")&&wikipediaPreview.init({root:document.querySelector("main"),selector:"a.link",lang:language})}function setupClicks(){$("a.link.framed").on("click",function(t){t.preventDefault(),window.open($(this).attr("href"),"_blank")}),$("a.link.explore").on("click",function(t){t.preventDefault(),parentref.postMessage({event_id:"show-loader",data:{}},"*"),parentref.postMessage({event_id:"handleClick",data:{type:"explore",title,hash,language}},"*")}),$("a.link").not("a.link.external").not("a.link.internal").not("a.link.framed").not("a.link.explore").not("a.link.random").on("click",function(t){if(t.preventDefault(),hash=$(this).attr("href").split("#")[1]||"",title=$(this).attr("href").split("#")[0].replace(/_/g," "),title=title.replace(/\.\/|_|<i>|<\/i>|<b>|<\/b>/g,""),explore.embedded)location.href=explore.base+"/app/wikipedia/?t="+encodeURIComponent(title)+"&l="+language;else if(explore.keyboard_ctrl_pressed){explore.keyboard_ctrl_pressed=!1;const e=explore.base+"/explore/"+encodeURIComponent(title)+"?l="+language;return openInNewTab(e),0}else parentref.postMessage({event_id:"show-loader",data:{}},"*"),parentref.postMessage({event_id:"handleClick",data:{type:"wikipedia",title,hash,language,current_pane,target_pane:current_pane}},"*");hash=""}),window.onhashchange=locationHashChanged}function locationHashChanged(){window.location.hash.startsWith("#cite")&&($("details.reflist-block").attr("open",""),$(window.location.hash)[0].scrollIntoView())}function setupArticleImages(){$("title").text().startsWith("Portal:")||$("title").text().startsWith("Book:")||($("a.mw-kartographer-map img").each(function(t){const e=explore.base+"/app/cors/raw/?url="+encodeURIComponent($(this).attr("src"));$(this).attr("src",e),$(this).attr("srcset",e+" 2x")}),$("img.thumbimage").not(".mwe-math-fallback-image-inline").not(".noviewer").not(".gallery-image").not(".no-enlarge").each(function(t){$(this).unwrap().unwrap(),$(this).removeAttr("width").removeAttr("height");let e="",i="";if(!($("title").text().startsWith("Portal:")||$("title").text().startsWith("Book:"))){let l=$(this).next();l.attr("class")==="thumbcaption"&&(l.find(".magnify").remove(),e=l.html(),i=l.text().replace(/"/g,"&quot;"),l.remove())}let a=$(this)[0].src.replace(/wikipedia.org\//,language+".wikipedia.org/")||"",n=a.split("?")[0].trim();if(n.endsWith(".ogv.jpg")||n.endsWith(".webm.jpg")){let l=n;n=$(this).next("a")[0].href,$(this).next("a").remove(),$(this).next().hasClass("thumbcaption")&&(e=$(this).next().html(),$(this).next().remove());let o="";e!==""&&(o="<figcaption>"+e+"</figcaption>"),$(this).unwrap().unwrap().replaceWith('<figure style="max-width:100% !important;"><video class="inline-video" width="100% !important" poster="'+l+'" controls><source src="'+n+'"></video>'+o+"</figure>")}else if(n.endsWith(".stl.png")){let l=a.replace(/\/\d+px\-/g,image_width_string);a=a.replace(/.*\/\d+px\-/g,"").replace(/\.stl\.png$/g,".glb");let o="../explore2/assets/models/glb/draco/"+a,s=a.replace(/_/g," ").replace(/\.glb$/g,""),r="model-"+guidGenerator();$(this).parent().hasClass("thumb")&&$(this).parent().removeClass("thumb");let d='<model-viewer id="'+r+'" class="model-view" title="'+s+'" data-name="'+s+'" src="'+o+'" environment-image="../explore2/assets/images/skybox/aircraft_workshop_01_1k.hdr" exposure="0.64" shadow-intensity="0" shadow-softness="0" ar ar-modes="scene-viewer quick-look" camera-controls loading="lazy" poster="'+l+'" ><button class="model-view-button" id="model-view-ar-button" title="AR button" slot="ar-button">AR</button><button title="fullscreen toggle" class="model-view-button" id="model-view-fullscreen-button" onclick="screenfull.toggle(document.getElementById(&quot;'+r+'&quot;))"><i class="fas fa-expand"></i></button><div class="model-title">'+i+"</div></model-viewer>";$(this)[0].src=a;let p=$(this).html();$(this).wrap('<figure class="model-media"></figure>').wrap(d)}else{a=a.replace(/\/\d+px\-/g,image_width_string),$(this)[0].src=a;let l=$(this).html();$(this).wrap('<figure class="non-thumb-media"></figure>').after("</span> <figcaption>"+e+"</figcaption>").wrap('<a href="'+a+'" class="elem" data-lcl-txt="'+i+'" data-articulate-ignore="" tabindex="0"></a>')}}),$("img").not("img.thumbimage").not(".mwe-math-fallback-image-inline").not(".noviewer").not(".gallery-image").not(".no-enlarge").each(function(t){let e="",i="",a=$(this)[0].src.replace(/wikipedia.org\//,language+".wikipedia.org/")||"",n=a.split("?")[0].trim();if(!$(this).parent().is("a")&&!(n.endsWith(".ogv.jpg")||n.endsWith(".webm.jpg")))return 1;if($(this).unwrap(),n.endsWith(".ogv.jpg")||n.endsWith(".webm.jpg")){let l=n;n=$(this).next("a")[0].href,$(this).next("a").remove(),$(this).next().hasClass("thumbcaption")&&(e=$(this).next().html(),$(this).next().remove());let o="";e!==""&&(o="<figcaption>"+e+"</figcaption>"),$(this).unwrap().unwrap().replaceWith('<figure style="max-width:100% !important;"><video class="inline-video" width="100% !important" poster="'+l+'" controls><source src="'+n+'"></video>'+o+"</figure>")}else{let l="";if($(this).attr("width")<min_image_width_for_enlarge||$(this).attr("height")<min_image_height_for_enlarge)return $(this).removeClass("enlargable"),0;$(this).hasClass("thumbborder")&&(l="width: initial;"),a=a.replace(/\/\d+px\-/g,image_width_string),$(this).wrap('<a href="'+a+'" class="elem" data-lcl-txt="'+i+'" data-articulate-ignore=""></a>').wrap('<figure style="'+l+'"></figure>')}})),($("title").text().startsWith("Portal:")||$("title").text().startsWith("Book:"))&&$("a.image figure").unwrap(),$(".clade-leaf figure").each(function(t){$(this).css({"max-width":"none",width:"auto",float:"none",margin:"1em 0em 0em 1em",clear:"none","padding-left":"initial",position:"relative"})}),$(".clade-leaf img").each(function(t){$(this).css({width:"auto",float:"none"})}),$("li.gallerybox").each(function(t){const e=$(this).find(".gallerytext").text()||"";$(this).find("a.elem").attr("data-lcl-txt",e)}),$("div.locmap").each(function(t){$($(this).find("div.od")).appendTo($(this).find("figure"))})}function setupToc(){$("h1,h2,h3,h4,h5,h6").each(function(){if($(this).text().startsWith("Book:"))return $(this).parent().remove(),!0;let e=$(this).text().replace(/[ %{}|^~\[\]()"'+<>%'&\.\/?:@;=,]/g,"_").replace(/^.+_svg_/,"").toLowerCase();$(this).attr("id",e)}),isMobile||tocbot.init({tocSelector:".js-toc",contentSelector:".js-toc-content",headingSelector:"h2, h3, h4, h5, h6",ignoreSelector:"#notes",onClick:clickedToc,collapseDepth:1,scrollSmooth:!1,orderedList:!0})}function setupMIDI(){$("a.midi").each(function(t,e){const i=$(this).attr("href"),a="midi-"+t;$(this).after('<midi-player src="'+i+'"> </midi-player>'),$(this).hide()})}function setupImageClicks(){$("img").not(".no-enlarge").not(".mwe-math-fallback-image-inline").not(".mwe-math-fallback-image-display").attr("loading","lazy").addClass("enlargable"),$("img.enlargable").each(function(e){($(this).attr("width")<min_image_width_for_enlarge||$(this).attr("height")<min_image_height_for_enlarge)&&$(this).removeClass("enlargable")});const t=lc_lightbox(".elem",{wrap_class:"lcl_fade_oc",gallery:!0,thumb_attr:!1,tn_hidden:!0,thumbs_nav:!0,download:!0,skin:"minimal",counter:!0,touchswipe:!0})}function setupAudiomassLinks(){$(".haudio").each(function(t){const e=$(this).find("source").first().attr("src"),i=explore.base+"/app/audio/?url="+encodeURIComponent(explore.base+"/app/cors/raw/?url=https:"+e);$(this).find("a.link").first().attr({href:i,onauxclick:i}).addClass("internal")})}function setupAudioClicks(){$(".enlargable").each(function(t){let e=$(this).attr("src").split("?")[0]||"";if(e.endsWith(".ogg")||e.endsWith(".oga")||e.endsWith(".mp3")||e.endsWith(".wav")){let i=e;console.log("audio found: ",i);let a='<audio controls><source src="'+i+'"></audio>';$(this).replaceWith(a)}})}function setupULS(){if(typeof languages===void 0||typeof languages=="undefined"||languages==="undefined"||languages==="")return 1;languages=JSON.parse(decodeURIComponent(languages));let t=!1;typeof languages=="object"||(languages=JSON.parse(decodeURIComponent(languages)),t=!0);let e={};if(t)e=languages;else if(getParameterByName("qid")===""||getParameterByName("qid")===!1||getParameterByName("qid")==="-1")for(let[a,n]of Object.entries(languages))e[a]=n;else for(let[a,n]of Object.entries(languages))a.endsWith("wiki")&&(a=a.replace(/wiki$/,""),e[a]=n);let i="";$(".uls-trigger").uls({onSelect:function(a){language=a;let n=e[a];explore.embedded?location.href=explore.base+"/app/wikipedia/?t="+encodeURIComponent(title)+"&l="+language:window.parent.postMessage({event_id:"handleClick",data:{type:"wikipedia",title:n,hash,language,languages:encodeURIComponent(JSON.stringify(e)),current_pane,target_pane:current_pane}},"*"),hash=""},onReady:function(a){$("input.uls-filterinput.uls-languagefilter.languagefilter").val("foo")},lazyload:!0,languages:e}),$(".uls-trigger").click(function(){$(".uls-menu").addClass("uls-mobile").css("right","2.5%")})}window.onclick=function(t){if(!t.target.matches(".dropbtn")){let e=document.getElementsByClassName("dropdown-content"),i;for(i=0;i<e.length;i++){let a=e[i];a.classList.contains("show")&&a.classList.remove("show")}}};function clickedToc(t){let e=t.target.getAttribute("href");$("html, body").animate({scrollTop:$(e).offset().top+40},200)}function goExplore(t){t?openInNewTab(url):explore.embedded?location.href=url:parentref.postMessage({event_id:"handleClick",data:{type:"explore",title,hash,language}},"*")}function gotoArticle(t){title.startsWith(explore.lang_talk+":")&&(title=title.replace(explore.lang_talkre,""));const e=explore.base+"/app/wikipedia/?t="+encodeURIComponent(title)+"&l="+explore.language+"&voice="+explore.voice_code+"&qid=&dir="+explore.language_direction;t?openInNewTab(e):explore.embedded?location.href=e:parentref.postMessage({event_id:"handleClick",data:{type:"link",url:e,title,hash,language,current_pane,target_pane:current_pane}},"*")}function gotoTalkPage(t){if(title.startsWith(explore.lang_talk+":"))return 0;const e=explore.base+"/app/wikipedia/?t="+encodeURIComponent(explore.lang_talk+":"+title)+"&l="+explore.language+"&voice="+explore.voice_code+"&qid=&dir="+explore.language_direction;t?openInNewTab(e):explore.embedded?location.href=e:parentref.postMessage({event_id:"handleClick",data:{type:"link",url:e,title,hash,language,current_pane,target_pane:current_pane}},"*")}function gotoVideo(t){const e=explore.base+"/app/video/#/search/"+title;t?openInNewTab(e):explore.embedded?location.href=e:parentref.postMessage({event_id:"handleClick",data:{type:"link",url:e,title,hash,language,current_pane,target_pane:current_pane}},"*")}function gotoImages(t){const e="https://www.bing.com/images/search?&q="+title+"&qft=+filterui:photo-photo&FORM=IRFLTR";t?openInNewTab(e):explore.embedded?location.href=e:parentref.postMessage({event_id:"handleClick",data:{type:"link",url:e,title,hash,language,current_pane,target_pane:current_pane}},"*")}function gotoBooks(t){const e=encodeURI("https://openlibrary.org/search?q="+title+"&mode=everything&language="+explore.lang3);t?openInNewTab(e):explore.embedded?location.href=e:window.top.postMessage({event_id:"handleClick",data:{type:"link",url:e,title,hash,language,current_pane,target_pane:current_pane}},"*")}function gotoBookISBN(t,e){const i=encodeURI("https://openlibrary.org/search?q=ISBN%3A"+e+"&mode=everything");window.top.postMessage({event_id:"handleClick",data:{type:"link",url:i,title,hash,language,current_pane,target_pane:current_pane}},"*")}function addToCompare(){qid!==""&&window.top.postMessage({event_id:"add-to-compare",data:{type:"compare",title,hash,language,qid}},"*")}function gotoWikipedia(t){console.log("gotoWikipedia: ",current_pane);const e=encodeURI("https://"+language+".wikipedia.org/wiki/"+title);t?openInNewTab(e):explore.embedded?location.href=e:parentref.postMessage({event_id:"handleClick",data:{type:"link",url:e,title,hash,language,current_pane,target_pane:current_pane}},"*")}function detectMobile(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|Mobile/i.test(navigator.userAgent)}function setupKeys(){keyboardJS.bind("alt+y",function(t){window.parent.postMessage({event_id:"toggle-sidebar",data:{}},"*")}),keyboardJS.bind("alt+i",function(t){window.parent.postMessage({event_id:"add-bookmark",data:{}},"*")})}function setupImageZoom(){$("#openseadragon").hide,window.viewer=OpenSeadragon({id:"openseadragon",prefixUrl:explore.base+"/app/explore2/node_modules/openseadragon/build/openseadragon/images/",tileSources:{type:"image",url:"../explore2/assets/images/icon_home.png",crossOriginPolicy:"Anonymous",ajaxWithCredentials:!1},showNavigator:!0,navigatorSizeRatio:.25}),window.viewer.world.addHandler("add-item",function(t){let e=t.item;e.addHandler("fully-loaded-change",fullyLoadedHandler),window.viewer.navigator.addTiledImage({tileSource:e})}),window.viewer.setVisible(!0)}function fullyLoadedHandler(){$("#loader-openseadragon").hide()}function addSectionTTS(){let t="";explore.tts_enabled&&($("h2:first").append($('<span class="section-title-button" title="stop speaking" onclick="stopSpeaking()" tabIndex="0"><i class="fas fa-stop"></i></span>&nbsp;<span class="section-title-button" title="pause speaking" onclick="pauseSpeaking()" tabIndex="0"><i class="fas fa-pause"></i></span><span class="section-title-button" title="start speaking from here" onclick="startSpeaking()" tabIndex="0"><i class="fas fa-play"></i></span>')),$(".mw-parser-output h2, .mw-parser-output h3, .mw-parser-output h4").each(function(e,i){$(this).attr("id")==="see_also"||(t=$(this).nextAll("p, h2, h3, h4, h5, h6, ul, li, dl, dd").clone().find(explore.tts_removals).remove().end().text(),t=$(this).text()+t,t=cleanText(t),$(this).append($(`<span class="section-title-button" title="stop speaking" onclick="stopSpeaking()" tabIndex="0"><i class="fas fa-stop"></i></span>&nbsp;<span class="section-title-button" title="pause speaking" onclick="pauseSpeaking()" tabIndex="0"><i class="fas fa-pause"></i></span><span class="section-title-button" title="start speaking from here" onclick="startSpeaking( '`+t+`' )" tabIndex="0"><i class="fas fa-play"></i></span>`)))}),$(".section-title-button").on("keyup",function(e){e.keyCode==13&&$(this).click()}))}
//# sourceMappingURL=transform.js.map
