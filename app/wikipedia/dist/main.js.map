{
  "version": 3,
  "sources": ["../src/main.js"],
  "sourcesContent": ["// \u00A9 Copyright 2019-2021 J. Poulsen. All Rights Reserved.\n\n'use strict';\n\n// wikibase library\nwindow.wbk = WBK({\n  instance: 'https://www.wikidata.org',\n  sparqlEndpoint: 'https://query.wikidata.org/sparql'\n})\n\n/*\n// see: https://github.com/viebel/klipse\nwindow.klipse_settings = {\n  // css selector for the html elements you want to klipsify\n  selector_eval_js: '.mw-highlight-lang-scheme',\n  //selector_eval_js: '.language-klipse-eval-js',\n};\n*/\n\nlet current_pane  = '';\nlet parentref     = '';\n\n// main app state\nconst explore = {\n\n  host          : CONZEPT_HOSTNAME,\n  base          : CONZEPT_WEB_BASE,\n  version       : CONZEPT_VERSION,\n\n  title     \t\t: getParameterByName('t') || '',\n  language     \t: getParameterByName('l') || 'en',\n  lang3         : getParameterByName('lang3') || '',  // used for the Open Library book-link\n  language_direction : getParameterByName('dir') || '',\n  voice_code   \t: getParameterByName('voice') || '',  // used for TTS\n  voice_rate   \t: '1',                                // used for TTS\n  voice_pitch  \t: '1',                                // used for TTS\n  hash         \t: location.hash.substring(1) || '',\n\tqid\t\t\t\t\t\t: getParameterByName('qid') || '',    // global identifier\n\tembedded\t\t\t: getParameterByName('embedded') || '', // signals to open links in the local iframe\n\n  languages     : [],\n\n  firstVisit    : true,\n\n\t// could we read these from storage?\n  locale       \t: getParameterByName('locale') || 'en',\n  fontsize     \t: getParameterByName('fs') || '19',\n  font1        \t: getParameterByName('font') || CONZEPT_FONT,\n  darkmode     \t: getParameterByName('darkmode') || false,\n  //linkpreview  \t: getParameterByName('lp') || false,\n  isMobile     \t: getParameterByName('mobile') || detectMobile(),\n\n\tdb\t\t\t\t\t\t: undefined, // persistent client-side storage using immortalDB\n\n\tlocales\t\t\t\t: [ 'ceb', 'en', 'es', 'de', 'fr', 'hi', 'ja', 'nl', 'pt', 'ru'],\n  banana\t\t\t\t: undefined,\n  banana_native\t: undefined,\n\n  language_script : '',       // see: https://www.w3.org/International/questions/qa-scripts.en#examples\n  language_name : '',\n  language_prev :  '', // previous language 2-letter-code\n  langcode3     : undefined,\n  langcode_librivox : undefined,\n  lang_category : undefined,\n  lang_catre1   : undefined, // localized \"Category:\" replace\n  lang_catre2   : undefined, // localized \"Category:3A\" replace\n  lang_portal   : undefined,\n  lang_porre1   : undefined, // localized \"Portal:\" replace\n  lang_book     : undefined,\n  lang_bookre   : undefined,\n  lang_talk     : undefined,\n  lang_talkre   : undefined,\n\n  isSafari      : detectSafari(),\n  isChrome      : detectChrome(),\n  isFirefox     : detectFirefox(),\n\n  wp_languages  : wp_languages,\n\n\ttts_enabled\t\t: true,\n\tsynth \t\t\t\t: window.speechSynthesis,\n\tsynth_paused\t: false,\n\ttts_removals\t: 'table, sub, sup, style, .internal.hash, .rt-commentedText, .IPA, .catlink, .notts, #coordinates',\n  autospeak     : getParameterByName('autospeak') || false,\n\n  keyboard_ctrl_pressed : false,\n\n  ld            : {}, // linked data fields\n\n}\n\n$( document ).ready( function() {\n\n  current_pane = getCurrentPane();\n\n  setupAppKeyboardNavigation();\n\n  setupAutoStopAudio();\n\n  if ( explore.language_direction === '' ){ // double-check that this is not an RTL-language (note: hack for second-content-pane calls)\n\n    if ( [ 'ar', 'arz', 'bal', 'bgn', 'ckb', 'fa', 'khw', 'ps', 'sd', 'ur', 'he', 'yi', 'arc', 'dv' ].includes( explore.language ) ){\n\n      explore.language_direction = 'rtl';\n\n    }\n\n  }\n\n  if ( explore.locale === 'simple' ){\n    explore.locale = 'en';\n  }\n\n  // uppercase-first letter (this makes the API language search work correctly)\n  explore.title = explore.title.charAt(0).toUpperCase() + explore.title.slice(1);\n\n  if ( explore.isMobile && explore.isChrome ){ // TTS not working on Chrome mobile?\n    explore.tts_enabled = false;\n  }\n\n  if ( explore.isMobile ){\n    setupSwipe( 'wikipedia-content' );\n  }\n\n  (async () => {\n\n    explore.db = ImmortalDB.ImmortalDB;\n\n    if ( explore.voice_code === '' ){\n\n      explore.voice_code = await explore.db.get('voice_code_selected');\n      explore.voice_code = ( explore.voice_code === null || explore.voice_code === undefined ) ? '' : explore.voice_code;\n\n    }\n\n    if ( !valid( getParameterByName('darkmode') ) ){ // no darkmode-param was set, so check the local DB\n\n      explore.darkmode = await explore.db.get('darkmode');\n      explore.darkmode = ( explore.darkmode === null || explore.darkmode === 'false' ) ? false : true;\n\n      if ( valid( explore.darkmode ) ){\n\n        $('body').addClass( 'dark' );\n\n      }\n\n    }\n\n\n\t\texplore.lang3 = getLangCode3( explore.language );\n\n    const voice_rate_user = await explore.db.get('voice_rate');\n\n    if ( isNumeric( voice_rate_user ) ){\n\n      explore.voice_rate = voice_rate_user;\n\n    }\n\n    const voice_pitch_user = await explore.db.get('voice_pitch');\n\n    if ( isNumeric( voice_pitch_user ) ){\n\n      explore.voice_pitch = voice_pitch_user;\n\n    }\n\n    // set font\n\t\texplore.font1 = await explore.db.get('font1');\n\n\t\tif ( explore.font1 !== CONZEPT_FONT ){ // custom font\n\n      if ( ! valid( explore.font1 ) ){\n\n        explore.font1 = CONZEPT_FONT;\n\n      }\n\n\t\t\t$('#fontlink').replaceWith( '<link id=\"fontlink\" href=\"https://fonts.googleapis.com/css?family=' + explore.font1 + ':400,500&display=swap&subset=latin-ext\" rel=\"stylesheet\" type=\"text/css\">' );\n\t\t\t$( '#fontlink' ).replaceWith( '<link id=\"fontlink\" href=\"https://fonts.googleapis.com/css?family=' + explore.font1 + ':400,500&display=swap&subset=latin-ext\" rel=\"stylesheet\" type=\"text/css\">' );\n\n\t\t\t$( 'body').css( 'fontFamily', explore.font1 , '');\n\n\t\t}\n\t\telse { // standard font\n\n\t\t\t$( '#fontlink').replaceWith( '<link id=fontlink />' );\n\n\t\t}\n\n\t\t// set link-previews\n\t\texplore.linkpreview = await explore.db.get('linkpreview');\n\n    explore.fontsize = await explore.db.get('fontsize'); // TODO: also correctly handle invalid fontsize returns here\n    $( 'body' ).css('fontSize', explore.fontsize + 'px' );\n\n\t\t// i18n engine: https://github.com/wikimedia/banana-i18n\n\t\t// set default locale and locale-fallback, we will set the true user-locale later.\n\t\texplore.banana        = new Banana( explore.locale, { finalFallback: 'en' } ); // used for the UI interface\n\t\texplore.banana_native = new Banana( explore.locale, { finalFallback: 'en' } ); // allows for translating to the native-content language\n\t\tupdateLocaleNative();\n\n    if ( explore.qid === '-1' ){ // don't use a non-valid qid\n      explore.qid = '';\n    }\n\n\t\t//console.log( 'title:', explore.title, '| language:', explore.language, '| hash:', explore.hash, '| qid:', explore.qid, '| locale:', explore.locale, '| font1:', explore.font1 );\n\n    window.addEventListener(\"message\", receiveMessage, false);\n\n    // MIME-type hack: https://stackoverflow.com/questions/2618959/not-well-formed-warning-when-loading-client-side-json-in-firefox-via-jquery-aj\n    $.ajaxSetup({beforeSend: function(xhr){ if (xhr.overrideMimeType) { xhr.overrideMimeType(\"application/json\"); } } });\n\n    if ( explore.title === '' && explore.qid === '' ){\n\n      return 0; // do nothing\n\n    }\n    else { // we have a title or qid\n\n      if ( explore.qid !== '' ){ // we have a qid\n\n\t\t\t\tif ( !explore.qid.startsWith('Q') ){ // add 'Q' if its missing\n\n\t\t\t\t\texplore.qid = 'Q' + explore.qid;\n\n \t\t\t\t}\n\n        getWikidata( explore.qid )\n\n      }\n      else {\n\n        // get all the languages for this wikipedia-article\n        // see: https://www.mediawiki.org/wiki/API:Langlinks\n        let title = '';\n\n        if ( explore.embedded ){\n\n          // https://stackoverflow.com/questions/5396560\n          // test URL: https://conze.pt/app/wikipedia/?t=Ch%C3%A2teau%20de%20Bussi%C3%A8re&l=fr&voice=fr-FR&qid=2968712&dir=ltr&embedded=true#_\n          title = decodeURI( title );\n          //console.log( title );\n          //title = decodeURIComponent( escape( title ) );\n          //title = unescape( URIComponent( title ) );\n\n        }\n        else {\n\n          title = encodeURIComponent( explore.title );\n\n        }\n\n        const url = 'https://' + explore.language + '.wikipedia.org/w/api.php?action=query&titles=' + title + '&prop=langlinks&lllimit=500&format=json';\n\n        console.log( url );\n\n        $.ajax({\n          url: url,\n          dataType: \"jsonp\",\n\n          success: function( ll ) {\n\n            //console.log( ll );\n\n            if ( typeof ll === undefined || typeof ll === 'undefined' ){\n              // do nothing\n            }\n            else {\n\n              if ( typeof ll.query.pages[ Object.keys( ll.query.pages)[0] ] === undefined ){\n\n                // do nothing\n\n              }\n              else {\n\n                // for each entry in \"langlinks\": add an object with: <iso2> : <name>\n                let languages = {};\n\n                $.each( ll.query.pages[ Object.keys( ll.query.pages)[0] ].langlinks, function( k, lang_item ){\n\n                  //console.log( lang_item['*'] );\n                  languages[ lang_item[ 'lang' ] ] = lang_item['*'];  \n\n                });\n\n                //console.log( languages );\n\n                explore.languages = encodeURIComponent( JSON.stringify( languages ) );\n\n                renderWikiArticle( explore.title, explore.language, explore.hash, explore.languages, 'tag', '', '', false, '' );\n\n              }\n\n            }\n\n          },\n\n        });\n\n      }\n\n    }\n\n\t})();\n\n\t// keyboard control\n\t$(document).keydown(function(event) {\n\n\t\tlet key = (event.keyCode ? event.keyCode : event.which);\n\n\t\t//console.log( event, key );\n\n\t\tif ( key == '70' ){ // \"f\"\n\n\t\t\tdocument.toggleFullscreen();\n\n\t\t}\n\n\t});\n\n});\n\nfunction getWikidata( qid ){\n\n  const wikidata_url = window.wbk.getEntities({\n    ids: [ qid ],\n    redirections: false,\n  })\n\n  //wbk.simplify.claims( entity.claims, { keepQualifiers: true })\n\n  // get wikidata json\n  fetch( wikidata_url )\n\n    .then( response => response.json() )\n    .then( window.wbk.parse.wd.entities )\n    //.then( data => window.wbk.simplify.entities(data.entities, { keepQualifiers: true } ))\n    .then( entities => {\n\n\t\t\tlet item = { qid : qid };\n\n\t\t\t//console.log( 'single item: ', item, entities[ item.qid ] );\n\n\t\t\t// detect the relevant wikidata-data and put this info into the item\n\t\t\tsetWikidata( item, entities[ item.qid ], true, current_pane, afterSetWikidata ); // TODO: use target_pane?\n\n  }) // end of qid entitie processing\n\n}\n\n\nfunction afterSetWikidata( item ){\n\n  explore.languages = item.languages;\n\n\tif ( valid( item.title ) ){\n\n\t\texplore.title = item.title;\n\n    let gbif_id = '';\n    let banner  = '';\n\n    if ( valid( item.gbif_id ) ){ gbif_id = item.gbif_id; }\n    if ( valid( item.page_banner ) ){  banner = item.page_banner; }\n\n    //console.log( 'jsonld item info: ', item );\n    explore.ld.title        = valid( item.title )? item.title : '';\n    explore.ld.tags         = item.tags.filter(Boolean);\n    explore.ld.qid          = valid( item.qid )? item.qid : '';\n\n    explore.ld.thumbnailUrl = valid( item.image )? item.image : '';\n    explore.ld.image        = valid( item.image_full )? item.image_full : '';\n    explore.ld.description  = valid( item.description )? item.description : '';\n\n    explore.ld.google_kg    = valid( item.google_knowledge_graph )? item.google_knowledge_graph : '';\n\n    //console.log( 'ld: ',  explore.ld );\n\n\t\trenderWikiArticle( explore.title, explore.language, explore.hash, explore.languages, 'tag', item.qid, gbif_id, false, banner );\n\n\t}\n\telse { // no wikipedia article for this Qid, so just show the wikidata-page\n\n\t\twindow.location.href = '../wikidata/?q=' + explore.qid + '&lang=' + explore.language;\n\n\t}\n\n}\n\nfunction updateLocaleNative(){\n\n  let l = explore.language;\n\n  if ( l === 'simple' ){\n\n    l = 'en';\n\n  }\n\n  explore.banana_native.setLocale( l );\n\n  if ( explore.locales.includes( l ) ){\n\n    fetch('../explore2/assets/i18n/conzept-' + l + '.json?' + explore.version ).then((response) => response.json()).then((messages) => {\n\n      explore.banana_native.load( messages, l );\n\n    });\n\n  }\n\n}\n\n\nfunction getTitleFromQid( qid ){\n\n  //fetchWikidata( [ qid ], '' );\n\n}\n\n\nfunction renderWikiArticle( title, lang, hash_, languages, tag, qid, gbif_id, allow_recheck, banner ){\n\n  //console.log( 'gbif_id: ', gbif_id );\n\n  let doc = {};\n\n  doc.title = '';\n  doc.html  = '';\n\n  $.ajax({\n\n    // see: https://stackoverflow.com/questions/21211037/how-can-i-make-the-wikipedia-api-normalize-and-redirect-without-knowing-the-exac/22339407\n    // https://en.wikipedia.org/w/api.php?action=parse&page=Apaloderma%20vittatum&prop=text&formatversion=2&format=json&redirects=\n    // https://en.wikipedia.org/w/api.php?action=query&prop=revisions%7Cpageprops&rvprop=content&maxlag=5&rvslots=main&origin=*&format=json&redirects=true&titles=Apaloderma_vittatum\n\n    url: 'https://' + explore.language + '.wikipedia.org/w/api.php?action=parse&page=' + encodeURIComponent( title ) + '&prop=text&formatversion=2&format=json&redirects=',\n\n    dataType: \"jsonp\",\n\n    success: function( res ) {\n\n      if ( res === null ){ res = undefined; } // avoid using \"null\" values\n\n      // hack to fix 'undefined' language when going back to the explore-homepage\n      // TODO: research if we should/could do this fallback earlier?\n      if ( explore.language === undefined || explore.language === 'undefined' ){\n        explore.language = window.language = 'en';\n      }\n\n      if ( title.startsWith( explore.lang_category + ':' ) ){ // category page\n\n        // get all content ( preface text, subcategories, included pages)\n        //\n        // https://www.mediawiki.org/wiki/API:Categorymembers\n        // https://www.mediawiki.org/wiki/API:Categories\n        // https://en.wikipedia.org/w/api.php?action=query&list=categorymembers&cmtitle=Category:Flamenco&cmlimit=10\n\n        $.ajax({\n\n          url: 'https://' + explore.language + '.wikipedia.org/w/api.php',\n          //url: 'https://' + lang +'.wikipedia.org/w/api.php?action=query&list=categorymembers&cmtitle=' + title + '&cmlimit=10',\n          dataType: \"jsonp\",\n\n          data: {\n            'action': \"query\",\n            'format': \"json\",\n            'list' : 'categorymembers',\n            'cmlimit': 300,\n            'cmtitle': decodeURIComponent( title ),\n            'cmnamespace': '0|14|100',\n            // prop=categories\n          },\n\n          success: function( pages ) {\n\n            renderWikipediaHTML( title, lang, hash_, doc, 'category', pages.query.categorymembers, '', languages, tag, qid, gbif_id, banner );\n\n          },\n\n          error: function( data ) {\n            console.log('Category JSON fetch error: ' + errorMessage);\n          },\n\n          //timeout: 3000,\n\n        });\n\n      }\n      else { // standard page\n\n        // 1) check if there is a category with the same name as the article-title (lowercased)\n        $.ajax({\n\n          url: 'https://' + explore.language + '.wikipedia.org/w/api.php',\n          dataType: \"jsonp\",\n          data: {\n            'action': \"query\",\n            'format': \"json\",\n            'list' : 'categorymembers',\n            'cmlimit': 300,\n            'cmtitle': decodeURIComponent( explore.lang_category + ':' + title ),\n            'cmnamespace': '0|14',\n            //'cmnamespace': '0|14|100',\n            // prop=categories\n          },\n\n          success: function( pages ) {\n\n            if ( typeof pages.query === undefined || typeof pages.query === 'undefined' ){\n\n              console.log('warning: no pages.query results found');\n\n\t\t\t\t\t\t\t// FIXME: \n              //tryFallbackToQid();\n\n            }\n            else {\n\n              // 2) if so: get subcategories, main-category and main-category-articles (aka related articles)\n              \n              // check res.query.redirects[0].to\n              if ( typeof res.query === undefined || typeof res.query === 'undefined' ){\n              }\n              else {\n\n                if ( typeof res.query.redirects[0].to === undefined ){\n                  // no redirect for this title\n                }\n                else { // found redirect\n\n                  doc.title = res.query.redirects[0].to || '';\n\n                }\n\n              }\n\n              if ( typeof res.parse === undefined || typeof res.parse === 'undefined' ){\n              }\n              else {\n\n                if ( typeof res.parse.title === undefined ){\n                  // no direct title found\n                }\n                else { // found title\n\n                  doc.title = res.parse.title;\n\n                  //console.log('direct title: ', doc.title );\n                }\n\n              }\n\n              if ( title == doc.title || allow_recheck === false ){\n\n                if ( typeof res.parse === undefined || typeof res.parse === 'undefined' ){ // article does not exist in this language-Wikipedia\n\n                  console.log('Wikipedia app: no article found for: ', explore.language, explore.title );\n\n                  window.location.href = 'https://www.bing.com/search?q=%22' + explore.title + '%22+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-wikipedia.org+-wikimedia.org+-wikiwand.com+-wiki2.org&setlang=' + explore.language + '-' + explore.language;\n\n                  $('#loader').hide();\n\n                  return 1;\n\n                }\n\n                doc.html = res.parse.text;\n\n                if ( doc === undefined ){\n\n                  explore.noWikipediaContentYet = true;\n\n                  //tryFallbackToQid();\n\n                  //return 1;\n                }\n                else {\n\n                  explore.noWikipediaContentYet = false;\n\n                  renderWikipediaHTML( doc.title, lang, hash_, doc, 'standard-with-category', pages.query.categorymembers, '', languages, tag, qid, gbif_id, banner )\n\n                }\n\n              }\n              else { // if \"title\" is different from \"doc.title()\"\n\n                console.log('Hmmm... redirect found: fetch wikidata for it: ', doc.title, title );\n\t\t\t\t\t\t\t\treturn 0;\n\n              }\n\n            }\n\n          },\n\n          error: function(data) {\n\n\t\t\t\t\t\tconsole.log('error fetching wikipedia data');\n\n          },\n\n        });\n      }\n\n    },\n\n  });\n\n}\n\nfunction renderWikipediaHTML( title, lang, hash_, doc, type, cat_members, raw_html, languages, tag, qid, gbif_id, banner ){\n\n  const source_page       = 'https://' + lang + '.wikipedia.org/wiki/' + title;\n  const contributors_page = 'https://' + lang + '.wikipedia.org/w/index.php?title=' + title + '&action=history';\n\n\tconst language_display = ( explore.isMobile ) ? lang : getNamefromLangCode2( explore.language ); // show the shorter ISO2 language-name on mobile\n\n  //console.log( 'renderWikipediaHTML: ', title, lang, hash_, doc, type, cat_members, raw_html, languages, tag, qid, gbif_id );\n\n  // grab the whole HTML string of this article\n  let html_ = '<body id=\"wikipedia-content\"><h2 class=\"article-title\">' + title + '</h2> <!--catheadline-->' + doc.html + '</body>';\n\n  let catheadline = '<div class=\"catheadline\"><ul class=\"notts\">';\n\n  // FIXME\n  //console.log( cat_members  );\n\n  // https://en.wikipedia.org/w/api.php?action=query&format=json&titles=Janelle%20Mon%C3%A1e&prop=categories\n  let c = [];\n  const cat_url = 'https://' + explore.language + '.wikipedia.org/w/api.php?action=query&format=json&titles=' + encodeURIComponent( title ) + '&prop=categories';\n\n  $.ajax({\n\n    url: cat_url,\n    dataType: \"jsonp\",\n\n    success: function( res ) {\n\n      if ( typeof res.query.pages === undefined || typeof res.query.pages === 'undefined' ){\n        // do nothing\n      }\n      else {\n\n        //if ( typeof res.query.pages[ Object.keys( res.query.pages)[0] ].categories === undefined || typeof res.query.pages[ Object.keys( res.query.pages)[0] ].categories === 'undefined' ){\n          // do nothing\n        //}\n        //else {\n\n          //console.log ( res.query.pages[ Object.keys( res.query.pages)[0] ].categories ) ;\n\n          if ( !valid( res.query.pages ) ){\n\n            //console.log('hmm.. no categories found');\n            //console.log( res.query.pages );\n\n          }\n          else {\n\n            if ( valid( Object.keys( res.query.pages)[0] ) ){\n\n              if ( valid( res.query.pages[ Object.keys( res.query.pages)[0] ].categories ) ){\n\n                c = res.query.pages[ Object.keys( res.query.pages)[0] ].categories.map( a => a.title );\n\n              }\n\n            }\n\n          }\n\n        //}\n\n      }\n      \n      //const c = doc.categories(); // categories _of_ the article ( NOT the child categories or pages)\n\n      //console.log( 'categories: ', c)\n\n      let own_cats = '';\n      let j = 0;\n\n      for ( let i = 0; i < c.length; ++i) {\n\n        const own_cat = encodeURIComponent( c[i] ) ;\n        //const own_cat = explore.lang_category + '%3A' + encodeURIComponent( c[i] ) ;\n\n        let t =  c[i].replace( explore.lang_catre1, '');\n\n        //if ( explore.lang_category + ':'  + title === own_cat )\n        if ( title === own_cat ){\n          own_cats += '<li class=\"notts\"><a class=\"link catlink\" href=\"' + own_cat + '\"><b>  <span class=\"icon\"><i class=\"fa-regular fa-folder-open fa-xs\">&nbsp; </i></span> ' + t + '</b></a></li>';\n          //own_cats += '<li><a class=\"link catlink\" href=\"./?l=' + explore.language + '&t=' + own_cat + '\"><b>  <span class=\"icon\"><i class=\"fa-regular fa-folder-open fa-xs\">&nbsp; </i></span> ' + t + '</b></a></li>';\n        }\n        else {\n          own_cats += '<li class=\"notts\"><a class=\"link catlink\" href=\"' + own_cat + '\">  <span class=\"icon\"><i class=\"fa-regular fa-folder-open fa-xs\">&nbsp; </i></span> ' + t + '</a></li>';\n          //own_cats += '<li><a class=\"link catlink\" href=\"./?l=' + explore.language + '&t=' + own_cat + '\">  <span class=\"icon\"><i class=\"fa-regular fa-folder-open fa-xs\">&nbsp; </i></span> ' + t + '</a></li>';\n        }\n\n        // collect first 3 categories for display under page title \n        if ( j < 3 ){\n\n          //console.log( own_cat );\n\n          // TODO: can we put these strings somewhere into the 'en' language object (and also register the start or end matching mode?)\n          // skip uninteresting cats\n          if (\n\n                // multi-lingual start\n                own_cat.startsWith( explore.lang_category + '%3AWikipedia') ||\n                own_cat.startsWith( explore.lang_category + '%3ACS1') ||\n                own_cat.startsWith( explore.lang_category + '%3A!') || // see eg.: https://conze.pt/explore/Trogon?l=pt&t=wikipedia&s=true&i=945088\n                own_cat.startsWith( explore.lang_category + '%3APages%20') ||\n                own_cat.startsWith( explore.lang_category + '%3AWebarchive%20') ||\n                own_cat.startsWith( explore.lang_category + '%3ACite%20') ||\n                own_cat.startsWith( explore.lang_category + '%3ATemplate%20') ||\n\n                // multi-lingual end\n                own_cat.endsWith('%20errors') ||\n                own_cat.endsWith('%20Wikidata') ||\n                own_cat.endsWith('%20categories') ||\n                own_cat.endsWith('%20pages') ||\n                own_cat.endsWith('uncertain') ||\n\n                // english start\n                own_cat.startsWith( explore.lang_category + '%3AAll%20') ||\n                own_cat.startsWith( explore.lang_category + '%3AArticles%20') ||\n                own_cat.startsWith( explore.lang_category + '%3ABurials%20at') ||\n                own_cat.startsWith( explore.lang_category + '%3ABurials%20in') ||\n                own_cat.startsWith( explore.lang_category + '%3APeople%20from') ||\n                own_cat.startsWith( explore.lang_category + '%3AGood%20articles') ||\n                own_cat.startsWith( explore.lang_category + '%3AAC%20with%20') ||\n                own_cat.startsWith( explore.lang_category + '%3AUse%20') ||\n\n                // english end\n                own_cat.endsWith('births') ||\n                own_cat.endsWith('deaths') ||\n                own_cat.endsWith('alumni') ||\n                own_cat.endsWith('people') ||\n\n                // french start\n                // ? constrain to 'fr' language?\n                // TODO: encode all explore.lang_category first, as they may contain non-ascii characters\n                own_cat.startsWith( 'Cat%C3%A9gorie%3AArticle%20') ||\n                own_cat.startsWith( 'Cat%C3%A9gorie%3APage%20') ||\n                own_cat.startsWith( 'Cat%C3%A9gorie%3APortail%3A')\n                //own_cat.startsWith( explore.lang_category + '%3AArticle%20') ||\n                //own_cat.startsWith( 'Cat\u00E9gorie%3AArticle%20')\n\n            ){\n            // do nothing\n          }\n          else {\n            j += 1;\n            // remove upto ':' from category name\n            //const own_cat_ = own_cat.substring( own_cat.indexOf(\":\") + 1 );\n            catheadline += '<li class=\"notts\"><a class=\"link catlink\" href=\"' + own_cat + '\"><span class=\"icon\"><i class=\"fa-regular fa-folder-open fa-xs\"></i></span>&nbsp; ' + t + '</a></li>';\n          }\n\n        }\n\n        //console.log( catheadline );\n\n      }\n\n      catheadline += '</ul></div>';\n\n      // dont show catheadline if there are no entries\n      const test_ = catheadline.match(/<ul class=\"notts\"><\\/ul>/g);\n\n      if ( test_ !== null ){\n        if ( test_.length > 0 ){\n          catheadline = '';\n        }\n      }\n\n      // remove catheadline if it has no entries\n      if ( catheadline.length < 33 ){\n        catheadline = '';\n      }\n\n      let inner_cats = '';\n      let inner_pages = '';\n      let cathtml = '';\n      let catparents_title = 'super';\n\n      let main_title = '<h1>' + decodeURIComponent( title ) +  '</h1>';\n\n      if ( type === 'portal' ){\n        main_title = '';\n        catheadline = ''; // dont show catheadline on category-pages\n      }\n      else if ( type === 'book' ){\n        main_title = '';\n        catheadline = ''; // dont show catheadline on category-pages\n      }\n      else if ( type === 'category' ){\n\n        main_title = '<h2> <span class=\"icon\"><i class=\"fa-regular fa-folder-open fa-xs\">&nbsp; </i></span> ' + decodeURIComponent( title.replace( explore.lang_catre1 , '') ) +  '</h2>';\n\n        catparents_title = '';\n\n        const catpattern = '^' + explore.lang_category + ':';\n        const catre = new RegExp( catpattern, \"g\" );\n\n        for ( let i = 0; i < cat_members.length; ++i) {\n\n          if ( cat_members[i].ns === 14 ){ // sub-categories namespace\n\n            const t = cat_members[i].title.replace( explore.lang_catre1, '');\n\n            inner_cats += '<li class=\"notts\"><a class=\"link catlink\" href=\"' + encodeURIComponent( cat_members[i].title ) + '\"> <span class=\"icon\"><i class=\"fa-regular fa-folder-open fa-xs\">&nbsp; </i></span> ' + t + '</a></li>';\n\n          }\n          else { // non-category-page\n\n            const t = decodeURIComponent( title.replace( explore.lang_catre2 , '' ) );\n\n            if ( t === cat_members[i].title ){\n\n              inner_pages += '<li class=\"notts\"><a class=\"link catlinks\" href=\"' +  encodeURIComponent( cat_members[i].title ) + '\"><b>' + cat_members[i].title + '</b></a></li>';\n\n            }\n            else {\n\n              inner_pages += '<li class=\"notts\"><a class=\"link catlink\" href=\"' + encodeURIComponent( cat_members[i].title ) + '\">' + cat_members[i].title + '</a></li>';\n\n            }\n          }\n\n        }\n\n        if ( own_cats !== '' ){ // supercats\n          cathtml += '<div class=\"catheadline\"><ul class=\"notts\">' + own_cats + '</ul></div>';\n        }\n\n        if ( inner_cats !== '' ){ // subcats\n          cathtml += '<h3 class=\"catheader\">sub </h3><ul class=\"foldercats subs notts\">' + inner_cats + '</ul>';\n        }\n\n        if ( inner_pages !== '' ){ // related pages\n          cathtml += '<h3 class=\"catheader\">pages</h3><ul class=\"notts\">' + inner_pages + '</ul>'; \n\n        }\n\n      }\n      else if ( type === 'standard-with-category' ){\n\n        if ( typeof gbif_id === undefined || typeof gbif_id === 'undefined' || gbif_id === '' || gbif_id === true || gbif_id === false ){\n          // do nothing\n        }\n        else {\n          cathtml += renderEmbeddedGbifMap( gbif_id, title );\n        }\n\n        catparents_title = 'super';\n\n        for ( let i = 0; i < cat_members.length; ++i) {\n\n          if ( cat_members[i].ns === 14 ){ // sub-categories namespace\n\n            const t = cat_members[i].title.replace( explore.lang_catre1 , '');\n\n            inner_cats += '<li class=\"notts\"><a class=\"link catlink\" href=\"' + cat_members[i].title + '\"> <span class=\"icon\"><i class=\"fa-regular fa-folder-open fa-xs\">&nbsp; </i></span> ' + t + '</a></li>';\n\n          }\n          else {\n\n            const t = decodeURIComponent( title.replace(/Category%3A/, '' ) );\n\n            if ( t === cat_members[i].title ){\n              inner_pages += '<li class=\"notts\"><a class=\"link catlink\" href=\"' + encodeURIComponent( cat_members[i].title ) + '\"><b>' + cat_members[i].title + '</b></a></li>';\n            }\n            else {\n              inner_pages += '<li class=\"notts\"><a class=\"link catlink\" href=\"' + encodeURIComponent( cat_members[i].title ) + '\">' + cat_members[i].title + '</a></li>';\n            }\n\n          }\n\n        }\n\n        // FIXME: ideally we use the plural name for \"Category\" here instead of the singular (add another column for this word?)\n        const cat_plural = ( explore.language === 'en') ? 'Categories' : explore.lang_category;\n\n        cathtml += '<div class=\"section\"> <h2 class=\"catheader\">' + cat_plural + '</h2>';\n\n        if ( own_cats !== '' ){ // super categories\n          cathtml +=  '<h3 class=\"catheader\">super</h3>' + '<div class=\"categories\"><div class=\"catheadline\"><ul class=\"foldercats\">' + own_cats + '</ul></div></div>';\n        }\n\n        if ( inner_cats !== '' ){ // sub categories\n          cathtml += '<h3 class=\"catheader\">sub </h3><ul class=\"foldercats subs\">' + inner_cats + '</ul>';\n        }\n\n        if ( inner_pages !== '' ){ // related pages\n          cathtml += '<h3 class=\"catheader\">pages</h3><ul>' + inner_pages + '</ul>';\n        }\n\n        cathtml += '</div>';\n\n        html_ = html_.replace(/<\\!--catheadline-->/, catheadline );\n\n      }\n\n      const darkclass = ( explore.darkmode ) ? 'dark' : '';\n\n      raw_html = raw_html\n                  .replace(/\\/wiki\\//g, '/explore/')\n                  ;\n\n      html_ = html_.replace(/\\/wiki\\//g, '/explore/')\n                .replace(/listaref/g, 'listaref reflist')\n                .replace(/references-small/g, 'references-small reflist')\n                //.replace(/<ol class=\"references\">/g, '<ol class=\"references reflist\">') // correct in all cases? no. how to fix this?\n                .replace(/infobox_v2/g, 'infobox')\n                .replace(/infobox_v3/g, 'infobox')\n                .replace(/\"tright\"/g, '\"tright infobox\"') // TODO: verify there are no unintended effects from this!\n                .replace(/infocaseta/g, 'infobox infocaseta') // french: table legend\n                .replace(/legende-bloc/g, 'legend legende-bloc') // french: table legend\n                //.replace(/<img /g, '<img loading=\"lazy\" ') // lazy image loading\n                ;\n\n      let fontlink_html = '<link id=\"fontlink\" />';\n\n      if ( explore.font1 !== CONZEPT_FONT ){ // only add font-link for alternative fonts\n        fontlink_html = '<link id=\"fontlink\" href=\"https://fonts.googleapis.com/css?family=' + explore.font1 + ':400,500&display=swap&subset=latin-ext\" rel=\"stylesheet\" type=\"text/css\">';\n      }\n\n      let banner_html = '';\n\n      if ( typeof banner === undefined || typeof banner === 'undefined' ){\n        // do nothing\n      }\n      else {\n\n        if ( banner !== '' ){\n\n          banner_html = '<img id=\"article-banner\" class=\"no-enlarge\" src=\"' + banner + '\"></img>';\n\n        }\n\n      }\n\n      let talk_page_button = '<span id=\"gotoTalkPage\"><button onclick=\"gotoTalkPage()\" onauxclick=\"gotoTalkPage( true )\" class=\"dropbtn\" tabIndex=\"0\" title=\"go to talk-page\" aria-label=\"go to talk-page\"><span class=\"icon\"><i class=\"fa-regular fa-clipboard\"></i></span></button></span> ';\n\n      if ( title.startsWith( explore.lang_talk + ':' ) ){ // already on a talk page\n\n        // replace talk button with the Wikipedia-article button\n        talk_page_button = '<span id=\"gotoArticle\"><button onclick=\"gotoArticle()\" onauxclick=\"gotoArticle( true )\" class=\"dropbtn\" tabIndex=\"0\" title=\"go to article\" aria-label=\"go to article\"><span class=\"icon\"><i class=\"fa-solid fa-align-justify\"></i></span></button></span> ';\n\n      }\n\n      html_ = html_.replace(/<body id=\"wikipedia-content\">/, fontlink_html +\n\n        '<a href=\"javascript:void(0)\" id=\"fullscreenToggle\" onclick=\"document.toggleFullscreen()\" class=\"global-actions\"><i id=\"fullscreenIcon\" title=\"fullscreen toggle\" class=\"fa-solid fa-expand\"></i></a>' +\n        // TODO: move all JS variables into one object and put that object stringified into the iframe data-fields attribute\n        '<script> let language = \"' + lang + '\"; let locale =  \"' + explore.locale + '\"; let title =  \"' + title + '\"; let qid =  \"' + explore.qid + '\"; let languages =  \"' + languages + '\"; let font1 =  \"' + explore.font1 + '\"; let darkmode = ' + explore.darkmode + '; </script>' +\n        '<meta name=\"viewport\" content=\"width=device-width, height=device-height, initial-scale=1.0, user-scalable=1, minimum-scale=1.0, maximum-scale=5.0\">' +\n        '<style>html{visibility: hidden;opacity:0;}</style>' +\n        '<aside class=\"js-toc\"> </aside>' +\n        '<main class=\"explore\" role=\"main\">' +\n          '<div id=\"openseadragon\" style=\"display:none; width: 100vw; height: 100vh;\"><img id=\"loader-openseadragon\" class=\"no-enlarge\" style=\"position: fixed; top: 50%; left: 10%; transform: translate(-50%, -50%); z-index: 999999; width: 100px; height: 100px;\" alt=\"loading\" src=\"../explore2/assets/images/loading.gif\"/></div>' +\n          '<div id=\"wikipedia-menu\">' +\n            '<span id=\"exploreTopic\"><button onclick=\"goExplore()\" onauxclick=\"goExplore(true)\" class=\"dropbtn\" tabIndex=\"0\" title=\"explore this topic\" aria-label=\"explore this topic\"><span class=\"icon\"><i class=\"fa-solid fa-retweet\"></i></span></button></span> ' +\n\n            '<span id=\"newTab\"><button onclick=\"openInNewTab( &quot;' + 'https://' + CONZEPT_HOSTNAME + CONZEPT_WEB_BASE + '/explore/' + encodeURIComponent( title ) + '?l=' + explore.language + '&t=wikipedia&i=' + explore.qid + '&quot;)\" onauxclick=\"openInNewTab( &quot;' + 'https://' + CONZEPT_HOSTNAME + CONZEPT_WEB_BASE + '/explore/' + encodeURIComponent( title ) + '?l=' + explore.language + '&t=wikipedia&i=' + explore.qid + '&quot;)\" class=\"dropbtn\" tabIndex=\"0\" title=\"open in new tab\"><span class=\"icon\"><i class=\"fa-solid fa-external-link-alt\"></i></span></button></span>' +\n            talk_page_button +\n            '<span id=\"gotoVideo\"><button onclick=\"gotoVideo()\" onauxclick=\"gotoVideo( true )\" class=\"dropbtn\" tabIndex=\"0\" title=\"go to video\" aria-label=\"go to video\"><span class=\"icon\"><i class=\"fa-solid fa-video\"></i></span></button></span> ' +\n            '<span id=\"gotoImages\"><button onclick=\"gotoImages()\" onauxclick=\"gotoImages( true )\" class=\"dropbtn\" tabIndex=\"0\" title=\"go to images\" aria-label=\"go to images\"><span class=\"icon\"><i class=\"fa-regular fa-images\"></i></span></button></span> ' +\n            '<span id=\"gotoBooks\"><button onclick=\"gotoBooks()\"  onauxclick=\"gotoBooks( true )\" class=\"dropbtn\" tabIndex=\"0\" title=\"go to books\" aria-label=\"go to books\"><span class=\"icon\"><i class=\"fa-brands fa-mizuni\"></i></span></button></span> ' +\n            '<span id=\"addToCompare\"><button onclick=\"addToCompare()\" class=\"dropbtn\" tabIndex=\"0\" title=\"add to compare\" aria-label=\"add to compare\"><span class=\"icon\"><i class=\"fa-solid fa-plus\"></i></span></button></span> ' +\n            '<span id=\"printPage\"><button onclick=\"window.print()\" class=\"dropbtn\" tabIndex=\"0\" title=\"print page\" aria-label=\"print page\"><span class=\"icon\"><i class=\"fa-solid fa-print\"></i></span></button></span> ' +\n            '<span id=\"gotoWikipedia\"><button onclick=\"gotoWikipedia()\" onauxclick=\"gotoWikipedia( true )\"class=\"dropbtn\" tabIndex=\"0\" title=\"go to Wikipedia\" aria-label=\"go to wikipedia\"><span class=\"icon\"><i class=\"fa-brands fa-wikipedia-w\"></i></span></button></span> ' +\n            '<span id=\"otherLanguage\"><button onclick=\"showWikipediaLanguages()\" class=\"dropbtn active uls-trigger\" tabIndex=\"0\" title=\"article in other languages\"> '  + language_display + '</button></span>' +\n\n          '</div>' +\n\n          banner_html\n\n      );\n\n      $( 'body#wikipedia-content' ).html(\n\t\t\t\thtml_ + \n        '<base target=\"_parent\" />' + \n\n        '<script type=\"text/javascript\" src=\"../wikipedia/dist/transform.js?' + explore.version + '\"></script>' +\n\n        raw_html +\n\n        cathtml +\n\n        '<script src=\"../explore2/dist/webcomponent/gbif-map.js?' + explore.version + '\" type=\"module\"></script>' +\n        '<script src=\"../explore2/libs/sortable.js\"></script>' +\n\n        '<br/><div id=\"legalnotice\">This page is based on a <a target=\"_blank_\" href=\"' + source_page + '\">Wikipedia</a> article written by <a href=\"' + contributors_page + '\">contributors</a>. The text is available under the <a href=\"https://creativecommons.org/licenses/by-sa/4.0/\">CC BY-SA 4.0</a> license; additional terms may apply. Images, videos and audio are available under their respective licenses.</div>' + \n        '</main><br/><br/><br/>'\n\n      );\n\n\t\t\t// on mobile hide some buttons\n\t\t\tif ( explore.isMobile ){\n\t\t\t\t$( '#gotoImages' ).hide();\n\t\t\t\t$( '#gotoBooks' ).hide();\n\t\t\t\t$( '#addToCompare' ).hide();\n\t\t\t\t$( '#printPage' ).hide();\n\t\t\t}\n\n\t\t\tif ( explore.isFirefox ){ // pause() does nothing with Firefox on Linux (what about Firefox on Windows?), so hide the pause-button\n\t\t\t\t$('#pauseButton').hide();\n\t\t\t}\n\n\t\t\t/*\n      $( explore.baseframe ).attr({\"data-title\": title });\n      $( explore.baseframe ).attr({\"data-language\": explore.language });\n      $( explore.baseframe ).attr({\"data-hash\": hash_ });\n      $( explore.baseframe ).attr({\"data-font1\": explore.font1 });\n\t\t\t*/\n\n    },\n\n  });\n\n}\n\ndocument.toggleFullscreen = function() {\n\n  if ( screenfull.enabled ) {\n\n    screenfull.toggle();\n\n  }\n\n  return 0;\n\n};\n\nfunction getLangCode3( lang2 ){\n\n  let lang3 = undefined;\n\n  for ( const [ code , langobj ] of Object.entries( explore.wp_languages )) {\n\n    if ( lang2 === code ){\n\n      lang3 = langobj.iso3;\n\n\t\t\t//console.log( langobj, lang3 );\n\n      // TODO DRY this code\n      explore.language_script = langobj.script;\n      explore.language_name = langobj.name;\n\n      if ( explore.voice_code.startsWith( explore.language ) ){\n        // do nothing\n      }\n      else {\n\n        explore.voice_code = langobj.voice || 'en-GB';\n\n      }\n\n      explore.langcode_librivox = langobj.librivox || 1;\n      //setLanguageDirection(); // FIXME?\n\n      // \"Category\" regexes\n      explore.lang_category = langobj.namespaces.category;\n\n      // TODO handle RTL-scripts like Arab for category-matching\n\n      if ( explore.language_direction === 'rtl' ){\n\n        //console.log('using RTL-direction for category matching');\n\n        const c1 = ':' + explore.lang_category + '$';\n        explore.lang_catre1 = new RegExp( c1, \"g\" );\n\n        const c2 = '%3A' + explore.lang_category + '$';\n        explore.lang_catre2 = new RegExp( c2, \"g\" );\n\n        explore.lang_portal = langobj.namespaces.portal;\n        const p1 = ':' + explore.lang_portal + '$';\n        explore.lang_porre1 = new RegExp( p1, \"g\" );\n\n        explore.lang_talk = langobj.namespaces.talk;\n        const t1 = ':' + explore.lang_talk + '$';\n        explore.lang_talkre = new RegExp( t1, \"g\" );\n\n        //const t1 = ':' + explore.lang_talk + '$';\n        //explore.lang_talkre = new RegExp( t1, \"g\" );\n\n      }\n      else {\n\n        const c1 = '^' + explore.lang_category + ':';\n        explore.lang_catre1 = new RegExp( c1, \"g\" );\n\n        const c2 = '^' + explore.lang_category + '%3A';\n        explore.lang_catre2 = new RegExp( c2, \"g\" );\n\n        explore.lang_portal = langobj.namespaces.portal;\n        const p1 = '^' + explore.lang_portal + ':';\n        explore.lang_porre1 = new RegExp( p1, \"g\" );\n\n        explore.lang_book = langobj.namespaces.book; // TODO\n        const b1 = '^' + explore.lang_book + ':';\n        explore.lang_bookre = new RegExp( b1, \"g\" );\n\n        explore.lang_talk = langobj.namespaces.talk;\n        const t1 = '^' + explore.lang_talk + ':';\n        explore.lang_talkre = new RegExp( t1, \"g\" );\n\n      }\n\n      break;\n    } \n\n  }\n\n  return lang3;\n\n}\n\nfunction getNamefromLangCode2( lang2 ){\n\n  let name = '';\n\n  if ( explore.wp_languages.hasOwnProperty( lang2 ) ){\n\n    name = explore.wp_languages[ lang2 ].namelocal;\n\n  }\n\n  return name;\n\n}\n\nfunction detectMobile(){\n\n  if ( getParameterByName('v') === 'mobile' ){ // force mobile view from URL param\n    return true;\n  }\n  else if ( getParameterByName('v') === 'desktop' ){ // force desktop view from URL param\n    return false;\n  }\n  else {\n    return (/Android|webOS|iPhone|iPad|iPod|BlackBerry|Mobile/i.test(navigator.userAgent) );\n  }\n\n}\n\nfunction receiveMessage(event){\n\n\t//console.log('receiveMessage() called: ', event.data.data );\n\n  if ( event.data.event_id === 'set-value' ){\n\n\t  //console.log( 'set-value: ', event.data.data[0], event.data.data[1] );\n    explore[ event.data.data[0] ] = event.data.data[1];\n\n  }\n  else if ( event.data.event_id === 'pause-speaking' ){ // signal from main-app to pause any speech\n\n    pauseSpeaking();\n\n  }\n  else if ( event.data.event_id === 'resume-speaking' ){ // signal from main-app to resume any speech\n\n    resumeSpeaking();\n\n  }\n  else if ( event.data.event_id === 'stop-speaking' ){ // signal from main-app to stop any speech\n\n    //console.log('wikipedia app: stop speaking');\n\n    stopSpeaking();\n\n  }\n  else if ( event.data.event_id === 'goto' ){ // move text-cursor\n\n    const fragment = '#:~:text=' + encodeURIComponent( event.data.data[0] );\n\n\t\tconsole.log('goto fragment: ', fragment );\n\n\t\twindow.location.hash = fragment;\n\n  }\n\n}\n\nfunction showWikipediaLanguages() {\n  //console.log('opening article ULS menu');\n  //console.log( explore.languages );\n}\n\nfunction renderEmbeddedGbifMap( id, title ){\n\n    //console.log( id, title );\n\n    const height = explore.isMobile ? '300px' : '500px';\n\n    const html = '<div class=\"section\"><h2 class=\"map-gbif\">' + explore.banana_native.i18n('app-title-occurence') + '</h2><gbif-map style=\"resize: both; overflow: auto; width:100%;height:' + height + ';\" gbif-id=\"'+ id +'\" gbif-title=\"'+ title + '\" gbif-language=\"'+ explore.language +'\" gbif-style=\"scaled.circles\" center-latitude=\"30.0\" center-longitude=\"13.6\" controls ></gbif-map>';\n\n    return html;\n\n}\n\nfunction pauseSpeaking(){\n\n  console.log('speaking paused');\n  explore.synth_paused = true;\n  explore.synth.pause();\n\n}\n\nfunction stopSpeaking(){\n\n\texplore.synth.cancel();\n\n  // also stop parent-frame speaking (if needed)\n  parentref.postMessage({ event_id: 'stop-all-speaking', data: { } }, '*' );\n\n}\n\nfunction cleanText( text ){\n\n  if ( typeof text === undefined || typeof text === 'undefined' ){\n\n    return '';\n\n  }\n  else {\n\n    text = text.replace(/(\\r\\n|\\n|\\r|'|\"|`|\\(|\\)|\\[|\\])/gm, '');\n\n    while (text != (text = text.replace(/\\{[^\\{\\}]*\\}/gm, ''))); // remove math-element-noise\n    //.replace(/ {displaystyle.*?} /gm, '');\n\n    //console.log( text );\n\n    return text;\n\n  }\n\n}\n\nfunction resumeSpeaking(){\n\n  explore.synth_paused = false;\n  explore.synth.resume();\n\n}\n\nfunction startSpeaking( text ){\n\n  parentref.postMessage({ event_id: 'show-loader', data: { } }, '*' );\n\n  if ( explore.synth_paused ){\n\n    resumeSpeaking();\n\n    return 0;\n\n  }\n  else if ( explore.synth.speaking ){ // something else is currently speaking\n\n    if ( explore.firstVisit === true ){ // but dont stop it upon first visit\n\n      //console.log( 'other speaker active upon first visit');\n      explore.firstVisit = false;\n      //return 0;\n\n    }\n\n    //console.log('already speaking, so cancelling first');\n    stopSpeaking();\n    //parentref.postMessage({ event_id: 'stop-parent-speaking', data: { } }, '*' );\n\n  }\n\n  explore.synth_paused = false;\n\n  //console.log( text );\n\n\tif ( typeof text === undefined || typeof text === 'undefined' || text === '' ){ // speak full article\n\n    text  = $('.mw-parser-output h2, h3, h4, h5, h6, p:not(table p), ul:not(table ul), li:not(table li), dl, dd').clone()\n          .find( explore.tts_removals ).remove()\n          .end().text()\n\n    //console.log( text );\n\n    text = $('h2:first').text() + text;\n\n\t}\n\telse { // speak article section\n\n\t}\n\n  text = cleanText( text );\n\n\t//console.log( text );\n\n  let utterance   = new SpeechSynthesisUtterance( text );\n\n\tutterance.lang  = explore.voice_code;\n\tutterance.rate  = explore.voice_rate;\n\tutterance.pitch = explore.voice_pitch;\n\n\t//if ( explore.synth.speaking ){\n\t\t// do nothing, already speaking\n\t//}\n\t//else {\n\t\texplore.synth.speak( utterance );\n\t//}\n\n  parentref.postMessage({ event_id: 'hide-loader', data: { } }, '*' );\n\n}\n"],
  "mappings": "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",
  "names": []
}
